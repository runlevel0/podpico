<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style>html, body {
  margin: 0;
  padding: 0;
}

.app {
  margin: 10px;
  padding: 0;
}

.files-list {
  margin: 10px 0 0;
  width: 100%;
  border-collapse: collapse;
}
.files-list__head {
  border: 1px solid #999;
}
.files-list__head > tr > th {
  padding: 10px;
  border: 1px solid #999;
  text-align: left;
  font-weight: normal;
  background: #ddd;
}
.files-list__body {
}
.files-list__file {
  cursor: pointer;
}
.files-list__file:hover {
  background: #ccf;
}
.files-list__file > td {
  padding: 10px;
  border: 1px solid #999;
}
.files-list__file > td:first-child::before {
  content: '\01F4C4';
  margin-right: 1em;
}
.files-list__file_low {
  background: #fcc;
}
.files-list__file_medium {
  background: #ffc;
}
.files-list__file_high {
  background: #cfc;
}
.files-list__file_folder > td:first-child::before {
  content: '\01F4C1';
  margin-right: 1em;
}

.file-header {
  border: 1px solid #999;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  background: white;
}

.file-header__back {
  margin: 10px;
  cursor: pointer;
  flex-shrink: 0;
  flex-grow: 0;
  text-decoration: underline;
  color: #338;
}

.file-header__name {
  margin: 10px;
  flex-shrink: 2;
  flex-grow: 2;
}

.file-header__stat {
  margin: 10px;
  flex-shrink: 0;
  flex-grow: 0;
}

.file-content {
  margin: 10px 0 0;
  border: 1px solid #999;
  padding: 10px;
  counter-reset: line;
  display: flex;
  flex-direction: column;
}

.code-line::before {
    content: counter(line);
    margin-right: 10px;
}
.code-line {
  margin: 0;
  padding: 0.3em;
  height: 1em;
  counter-increment: line;
}
.code-line_covered {
  background: #cfc;
}
.code-line_uncovered {
  background: #fcc;
}
</style>
</head>
<body>
    <div id="root"></div>
    <script>
        var data = {"files":[{"path":["/","home","patrick","Workspaces","podpico","src-tauri","build.rs"],"content":"fn main() {\n    tauri_build::build()\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","patrick","Workspaces","podpico","src-tauri","src","commands.rs"],"content":"// Tauri commands for PodPico application\n// These are the functions that can be called from the frontend\n// User Story Driven Implementation\n\nuse crate::database::DatabaseManager;\nuse crate::file_manager::FileManager;\nuse crate::rss_manager::RssManager;\nuse crate::usb_manager::UsbManager;\nuse serde::{Deserialize, Serialize};\nuse std::sync::Arc;\nuse tokio::sync::Mutex;\n\n// Data structures for communication between frontend and backend\n#[derive(Debug, Serialize, Deserialize)]\npub struct Podcast {\n    pub id: i64,\n    pub name: String,\n    pub rss_url: String,\n    pub description: Option\u003cString\u003e,\n    pub artwork_url: Option\u003cString\u003e,\n    pub website_url: Option\u003cString\u003e,\n    pub last_updated: Option\u003cString\u003e,\n    pub episode_count: i64,\n    pub new_episode_count: i64,\n}\n\n#[derive(Debug, Serialize, Deserialize)]\npub struct Episode {\n    pub id: i64,\n    pub podcast_id: i64,\n    pub podcast_name: String,\n    pub title: String,\n    pub description: Option\u003cString\u003e,\n    pub episode_url: String,\n    pub published_date: Option\u003cString\u003e,\n    pub duration: Option\u003ci32\u003e,\n    pub file_size: Option\u003ci64\u003e,\n    pub local_file_path: Option\u003cString\u003e,\n    pub status: String,\n    pub downloaded: bool,\n    pub on_device: bool,\n}\n\n#[derive(Debug, Serialize, Deserialize)]\npub struct UsbDevice {\n    pub id: String,\n    pub name: String,\n    pub path: String,\n    pub total_space: u64,\n    pub available_space: u64,\n    pub is_connected: bool,\n}\n\n#[derive(Debug, Serialize, Deserialize)]\npub struct AppConfig {\n    pub download_directory: String,\n    pub max_concurrent_downloads: i32,\n    pub auto_download_new_episodes: bool,\n    pub check_for_updates_interval: i32,\n    pub default_episode_status: String,\n}\n\n// Global instances (to be initialized in lib.rs)\nstatic DATABASE: Mutex\u003cOption\u003cArc\u003cDatabaseManager\u003e\u003e\u003e = Mutex::const_new(None);\nstatic RSS_MANAGER: Mutex\u003cOption\u003cArc\u003cRssManager\u003e\u003e\u003e = Mutex::const_new(None);\nstatic FILE_MANAGER: Mutex\u003cOption\u003cArc\u003cFileManager\u003e\u003e\u003e = Mutex::const_new(None);\nstatic USB_MANAGER: Mutex\u003cOption\u003cArc\u003cUsbManager\u003e\u003e\u003e = Mutex::const_new(None);\n\npub async fn initialize_managers(\n    db: DatabaseManager,\n    rss: RssManager,\n    file: FileManager,\n    usb: UsbManager,\n) {\n    let mut db_lock = DATABASE.lock().await;\n    *db_lock = Some(Arc::new(db));\n\n    let mut rss_lock = RSS_MANAGER.lock().await;\n    *rss_lock = Some(Arc::new(rss));\n\n    let mut file_lock = FILE_MANAGER.lock().await;\n    *file_lock = Some(Arc::new(file));\n\n    let mut usb_lock = USB_MANAGER.lock().await;\n    *usb_lock = Some(Arc::new(usb));\n}\n\n// Development/demo command\n#[tauri::command]\npub async fn greet(name: \u0026str) -\u003e Result\u003cString, String\u003e {\n    Ok(format!(\"Hello, {}! Welcome to PodPico!\", name))\n}\n\n// Core podcast management commands\n#[tauri::command]\npub async fn add_podcast(rss_url: String) -\u003e Result\u003cPodcast, String\u003e {\n    log::info!(\"Adding podcast: {} (User Story #1)\", rss_url);\n\n    // Get managers\n    let db_lock = DATABASE.lock().await;\n    let db = db_lock.as_ref().ok_or(\"Database not initialized\")?;\n\n    let rss_lock = RSS_MANAGER.lock().await;\n    let rss_manager = rss_lock.as_ref().ok_or(\"RSS manager not initialized\")?;\n\n    // User Story #1: Add new podcast subscription via RSS URL\n    // Acceptance Criteria: Given a valid RSS feed URL, when I paste it in the add podcast dialog,\n    // then the app validates the feed within 5 seconds\n\n    // Step 1 \u0026 2: Fetch and validate RSS feed in one operation (with 5-second timeout)\n    let channel = rss_manager\n        .validate_and_fetch_feed(\u0026rss_url)\n        .await\n        .map_err(|e| format!(\"RSS validation/fetch failed: {}\", e))?;\n\n    let (title, description, artwork_url) = rss_manager\n        .extract_podcast_info(\u0026channel)\n        .await\n        .map_err(|e| format!(\"Failed to extract podcast info: {}\", e))?;\n\n    let website_url = rss_manager.extract_website_url(\u0026channel);\n\n    // Step 3: Save to database\n    let podcast = db\n        .add_podcast(\n            \u0026title,\n            \u0026rss_url,\n            description.as_deref(),\n            artwork_url.as_deref(),\n            website_url.as_deref(),\n        )\n        .await\n        .map_err(|e| format!(\"Failed to save podcast: {}\", e))?;\n\n    // Step 4: Extract and save episodes\n    let episodes = rss_manager\n        .extract_episodes(\u0026channel)\n        .await\n        .map_err(|e| format!(\"Failed to extract episodes: {}\", e))?;\n\n    let episode_count = episodes.len();\n\n    for item in \u0026episodes {\n        // Extract episode information\n        let episode_title = item.title().unwrap_or(\"Untitled Episode\").to_string();\n        let episode_description = item.description().map(|s| s.to_string());\n\n        // Get the audio file URL from enclosure (not link)\n        let episode_url = item\n            .enclosure()\n            .map(|enc| enc.url().to_string())\n            .unwrap_or_else(|| item.link().unwrap_or(\"\").to_string());\n\n        if !episode_url.is_empty() {\n            // Try to parse duration from iTunes extension\n            let duration = item\n                .itunes_ext()\n                .and_then(|itunes| itunes.duration())\n                .and_then(|d| {\n                    // Parse duration string (e.g., \"1:23:45\" or \"23:45\" or \"45\")\n                    let parts: Vec\u003c\u0026str\u003e = d.split(':').collect();\n                    match parts.len() {\n                        1 =\u003e parts[0].parse::\u003ci32\u003e().ok(), // seconds\n                        2 =\u003e {\n                            // minutes:seconds\n                            let minutes = parts[0].parse::\u003ci32\u003e().ok()?;\n                            let seconds = parts[1].parse::\u003ci32\u003e().ok()?;\n                            Some(minutes * 60 + seconds)\n                        }\n                        3 =\u003e {\n                            // hours:minutes:seconds\n                            let hours = parts[0].parse::\u003ci32\u003e().ok()?;\n                            let minutes = parts[1].parse::\u003ci32\u003e().ok()?;\n                            let seconds = parts[2].parse::\u003ci32\u003e().ok()?;\n                            Some(hours * 3600 + minutes * 60 + seconds)\n                        }\n                        _ =\u003e None,\n                    }\n                });\n\n            // Parse published date\n            let published_date = item.pub_date().map(|s| s.to_string());\n\n            // Save episode to database\n            let _episode_id = db\n                .add_episode(\n                    podcast.id,\n                    \u0026episode_title,\n                    episode_description.as_deref(),\n                    \u0026episode_url,\n                    published_date.as_deref(),\n                    duration,\n                    None, // file_size - will be determined during download\n                )\n                .await\n                .map_err(|e| {\n                    log::warn!(\"Failed to save episode '{}': {}\", episode_title, e);\n                    e\n                })?;\n        }\n    }\n\n    log::info!(\n        \"Successfully added podcast: {} with {} episodes\",\n        title,\n        episode_count\n    );\n    Ok(podcast)\n}\n\n#[tauri::command]\npub async fn remove_podcast(podcast_id: i64) -\u003e Result\u003c(), String\u003e {\n    log::info!(\"Removing podcast: {} (User Story #4)\", podcast_id);\n\n    let db_lock = DATABASE.lock().await;\n    let db = db_lock.as_ref().ok_or(\"Database not initialized\")?;\n\n    db.remove_podcast(podcast_id)\n        .await\n        .map_err(|e| format!(\"Failed to remove podcast: {}\", e))?;\n\n    Ok(())\n}\n\n#[tauri::command]\npub async fn get_podcasts() -\u003e Result\u003cVec\u003cPodcast\u003e, String\u003e {\n    log::info!(\"Getting all podcasts (User Story #2, #7)\");\n\n    let db_lock = DATABASE.lock().await;\n    let db = db_lock.as_ref().ok_or(\"Database not initialized\")?;\n\n    db.get_podcasts()\n        .await\n        .map_err(|e| format!(\"Failed to get podcasts: {}\", e))\n}\n\n#[tauri::command]\npub async fn get_episodes(podcast_id: Option\u003ci64\u003e) -\u003e Result\u003cVec\u003cEpisode\u003e, String\u003e {\n    log::info!(\n        \"Getting episodes for podcast: {:?} (User Story #2, #7)\",\n        podcast_id\n    );\n\n    let db_lock = DATABASE.lock().await;\n    let db = db_lock.as_ref().ok_or(\"Database not initialized\")?;\n\n    db.get_episodes(podcast_id)\n        .await\n        .map_err(|e| format!(\"Failed to get episodes: {}\", e))\n}\n\n#[tauri::command]\npub async fn update_episode_status(episode_id: i64, status: String) -\u003e Result\u003c(), String\u003e {\n    log::info!(\n        \"Updating episode {} status to: {} (User Story #5, #6)\",\n        episode_id,\n        status\n    );\n\n    // Validate status\n    if ![\"new\", \"unlistened\", \"listened\"].contains(\u0026status.as_str()) {\n        return Err(\"Invalid status. Must be 'new', 'unlistened', or 'listened'\".to_string());\n    }\n\n    let db_lock = DATABASE.lock().await;\n    let db = db_lock.as_ref().ok_or(\"Database not initialized\")?;\n\n    db.update_episode_status(episode_id, \u0026status)\n        .await\n        .map_err(|e| format!(\"Failed to update episode status: {}\", e))\n}\n\n// Download management commands\n#[tauri::command]\npub async fn download_episode(episode_id: i64) -\u003e Result\u003c(), String\u003e {\n    log::info!(\n        \"Starting download for episode: {} (User Story #3)\",\n        episode_id\n    );\n\n    // Get managers\n    let db_lock = DATABASE.lock().await;\n    let db = db_lock.as_ref().ok_or(\"Database not initialized\")?;\n\n    // Get episode information\n    let episodes = db\n        .get_episodes(None)\n        .await\n        .map_err(|e| format!(\"Failed to get episode: {}\", e))?;\n\n    let episode = episodes\n        .iter()\n        .find(|e| e.id == episode_id)\n        .ok_or(\"Episode not found\")?;\n\n    // User Story #3 Acceptance Criteria: Check if already downloaded\n    if episode.downloaded {\n        log::info!(\"Episode {} already downloaded\", episode_id);\n        return Ok(());\n    }\n\n    // Initialize FileManager for this download\n    // TODO: Get download directory from config\n    let file_manager = crate::file_manager::FileManager::new(\"./episodes\");\n    file_manager\n        .initialize()\n        .await\n        .map_err(|e| format!(\"Failed to initialize file manager: {}\", e))?;\n\n    // User Story #3 Acceptance Criteria: Download with progress tracking\n    let result = file_manager\n        .download_episode(\u0026episode.episode_url, episode_id, episode.podcast_id)\n        .await;\n\n    match result {\n        Ok(file_path) =\u003e {\n            log::info!(\n                \"Successfully downloaded episode {} to {}\",\n                episode_id,\n                file_path\n            );\n\n            // Update database to mark episode as downloaded\n            db.update_episode_downloaded_status(episode_id, true, Some(\u0026file_path))\n                .await\n                .map_err(|e| format!(\"Failed to update episode status: {}\", e))?;\n\n            Ok(())\n        }\n        Err(e) =\u003e {\n            log::error!(\"Failed to download episode {}: {}\", episode_id, e);\n            Err(format!(\"Download failed: {}\", e))\n        }\n    }\n}\n\n#[tauri::command]\npub async fn get_download_progress(episode_id: i64) -\u003e Result\u003cf64, String\u003e {\n    log::info!(\"Getting download progress for episode: {}\", episode_id);\n\n    // User Story #3 Acceptance Criteria: Return download progress percentage\n    // TODO: Get from FileManager singleton when properly implemented\n    // For now, return a basic implementation\n\n    let file_manager = crate::file_manager::FileManager::new(\"./episodes\");\n\n    if let Some(progress) = file_manager.get_download_progress(episode_id).await {\n        Ok(progress.percentage)\n    } else {\n        Ok(0.0) // No download in progress\n    }\n}\n\n// USB device management commands\n#[tauri::command]\npub async fn get_usb_devices() -\u003e Result\u003cVec\u003cUsbDevice\u003e, String\u003e {\n    log::info!(\"Getting USB devices (User Story #8)\");\n\n    let mut usb_manager = crate::usb_manager::UsbManager::new();\n    usb_manager\n        .detect_devices()\n        .map_err(|e| format!(\"Failed to detect USB devices: {}\", e))\n}\n\n#[tauri::command]\npub async fn transfer_episode_to_device(episode_id: i64, device_id: String) -\u003e Result\u003c(), String\u003e {\n    log::info!(\n        \"Transferring episode {} to device: {} (User Story #9)\",\n        episode_id,\n        device_id\n    );\n\n    // Get managers\n    let db_lock = DATABASE.lock().await;\n    let db = db_lock.as_ref().ok_or(\"Database not initialized\")?;\n\n    let usb_lock = USB_MANAGER.lock().await;\n    let usb_manager = usb_lock.as_ref().ok_or(\"USB manager not initialized\")?;\n\n    // User Story #9: Transfer episodes to USB device\n    // Acceptance Criteria: Progress indicator, transfer speed, success indication, error handling\n\n    // Step 1: Get episode information from database\n    let episodes = db\n        .get_episodes(Some(episode_id))\n        .await\n        .map_err(|e| format!(\"Failed to get episode: {}\", e))?;\n\n    let episode = episodes\n        .into_iter()\n        .find(|ep| ep.id == episode_id)\n        .ok_or(format!(\"Episode {} not found\", episode_id))?;\n\n    // Step 2: Verify episode is downloaded\n    if !episode.downloaded || episode.local_file_path.is_none() {\n        return Err(format!(\n            \"Episode {} is not downloaded yet. Please download it first.\",\n            episode_id\n        ));\n    }\n\n    let local_file_path = episode.local_file_path.unwrap();\n\n    // Step 3: Find USB device by device_id\n    let mut usb_manager_mut = UsbManager::new(); // Create a mutable instance for device detection\n    let devices = usb_manager_mut\n        .detect_devices()\n        .map_err(|e| format!(\"Failed to detect USB devices: {}\", e))?;\n\n    let device = devices\n        .into_iter()\n        .find(|dev| dev.id == device_id)\n        .ok_or(format!(\n            \"USB device {} not found or not connected\",\n            device_id\n        ))?;\n\n    // Step 4: Generate filename from episode title (sanitized for filesystem)\n    let filename = format!(\n        \"{}.mp3\",\n        episode\n            .title\n            .chars()\n            .map(\n                |c| if c.is_alphanumeric() || c == ' ' || c == '-' || c == '_' {\n                    c\n                } else {\n                    '_'\n                }\n            )\n            .collect::\u003cString\u003e()\n            .trim()\n    );\n\n    // Step 5: Transfer file with progress tracking\n    usb_manager\n        .transfer_file(\u0026local_file_path, \u0026device.path, \u0026filename)\n        .await\n        .map_err(|e| format!(\"Transfer failed: {}\", e))?;\n\n    // Step 6: Update episode transfer status in database\n    // TODO: Add database field for tracking which episodes are on which devices\n    // For now, we'll update the on_device flag\n    db.update_episode_on_device_status(episode_id, true)\n        .await\n        .map_err(|e| format!(\"Failed to update episode transfer status: {}\", e))?;\n\n    log::info!(\n        \"Successfully transferred episode {} to device {}\",\n        episode_id,\n        device_id\n    );\n    Ok(())\n}\n\n#[tauri::command]\npub async fn remove_episode_from_device(episode_id: i64, device_id: String) -\u003e Result\u003c(), String\u003e {\n    log::info!(\n        \"Removing episode {} from device: {} (User Story #10)\",\n        episode_id,\n        device_id\n    );\n\n    // Get managers\n    let db_lock = DATABASE.lock().await;\n    let db = db_lock.as_ref().ok_or(\"Database not initialized\")?;\n\n    let usb_lock = USB_MANAGER.lock().await;\n    let usb_manager = usb_lock.as_ref().ok_or(\"USB manager not initialized\")?;\n\n    // User Story #10: Remove episodes from USB device\n    // Acceptance Criteria: Confirmation before deletion, update indicators, increase storage space\n\n    // Step 1: Get episode information from database\n    let episodes = db\n        .get_episodes(Some(episode_id))\n        .await\n        .map_err(|e| format!(\"Failed to get episode: {}\", e))?;\n\n    let episode = episodes\n        .into_iter()\n        .find(|ep| ep.id == episode_id)\n        .ok_or(format!(\"Episode {} not found\", episode_id))?;\n\n    // Step 2: Verify episode is currently on device\n    if !episode.on_device {\n        return Err(format!(\n            \"Episode {} is not currently on any USB device\",\n            episode_id\n        ));\n    }\n\n    // Step 3: Find USB device by device_id\n    let mut usb_manager_mut = UsbManager::new(); // Create a mutable instance for device detection\n    let devices = usb_manager_mut\n        .detect_devices()\n        .map_err(|e| format!(\"Failed to detect USB devices: {}\", e))?;\n\n    let device = devices\n        .into_iter()\n        .find(|dev| dev.id == device_id)\n        .ok_or(format!(\n            \"USB device {} not found or not connected\",\n            device_id\n        ))?;\n\n    // Step 4: Generate filename from episode title (same as transfer logic)\n    let filename = format!(\n        \"{}.mp3\",\n        episode\n            .title\n            .chars()\n            .map(\n                |c| if c.is_alphanumeric() || c == ' ' || c == '-' || c == '_' {\n                    c\n                } else {\n                    '_'\n                }\n            )\n            .collect::\u003cString\u003e()\n            .trim()\n    );\n\n    // Step 5: User Story #10 Acceptance Criteria: Remove file from USB device\n    usb_manager\n        .remove_file(\u0026device.path, \u0026filename)\n        .await\n        .map_err(|e| format!(\"File removal failed: {}\", e))?;\n\n    // Step 6: User Story #10 Acceptance Criteria: Update episode status (no longer shows \"on device\" indicator)\n    db.update_episode_on_device_status(episode_id, false)\n        .await\n        .map_err(|e| format!(\"Failed to update episode device status: {}\", e))?;\n\n    log::info!(\n        \"Successfully removed episode {} from device {} (User Story #10)\",\n        episode_id,\n        device_id\n    );\n    Ok(())\n}\n\n// Configuration commands\n#[tauri::command]\npub async fn get_app_config() -\u003e Result\u003cAppConfig, String\u003e {\n    log::info!(\"Getting app configuration\");\n    // TODO: Implement configuration loading\n    Ok(AppConfig {\n        download_directory: \"./episodes\".to_string(),\n        max_concurrent_downloads: 3,\n        auto_download_new_episodes: false,\n        check_for_updates_interval: 3600,\n        default_episode_status: \"new\".to_string(),\n    })\n}\n\n#[tauri::command]\npub async fn update_app_config(config: AppConfig) -\u003e Result\u003c(), String\u003e {\n    log::info!(\"Updating app configuration: {:?}\", config);\n    // TODO: Implement configuration saving\n    Err(\"Not implemented yet\".to_string())\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use crate::database::DatabaseManager;\n    use crate::file_manager::FileManager;\n    use crate::rss_manager::RssManager;\n    use crate::usb_manager::UsbManager;\n    use httpmock::prelude::*;\n    use serial_test::serial;\n    use std::time::Instant;\n\n    async fn setup_test_environment() -\u003e (DatabaseManager, RssManager, FileManager, UsbManager) {\n        // Use in-memory SQLite database for testing\n        let db_url = \"sqlite::memory:\";\n\n        let db = DatabaseManager::new(db_url).await.unwrap();\n        db.initialize().await.unwrap();\n\n        let rss_manager = RssManager::new();\n        let file_manager = FileManager::new(\"./test_episodes\");\n        file_manager.initialize().await.unwrap();\n        let usb_manager = UsbManager::new();\n\n        // Initialize global managers for command testing\n        initialize_managers(\n            db.clone_manager(),\n            rss_manager.clone_manager(),\n            file_manager.clone_manager(),\n            usb_manager.clone_manager(),\n        )\n        .await;\n\n        (db, rss_manager, file_manager, usb_manager)\n    }\n\n    impl Clone for DatabaseManager {\n        fn clone(\u0026self) -\u003e Self {\n            self.clone_manager()\n        }\n    }\n\n    impl Clone for RssManager {\n        fn clone(\u0026self) -\u003e Self {\n            self.clone_manager()\n        }\n    }\n\n    impl Clone for FileManager {\n        fn clone(\u0026self) -\u003e Self {\n            FileManager::new(\"./test_episodes\")\n        }\n    }\n\n    impl Clone for UsbManager {\n        fn clone(\u0026self) -\u003e Self {\n            UsbManager::new()\n        }\n    }\n\n    #[tokio::test]\n    async fn test_greet_command() {\n        let result = greet(\"Test User\").await;\n        assert!(result.is_ok());\n        assert_eq!(result.unwrap(), \"Hello, Test User! Welcome to PodPico!\");\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_1_add_podcast_command() {\n        // User Story #1: Add new podcast subscription via RSS URL\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n        let server = MockServer::start();\n\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\" xmlns:itunes=\"http://www.itunes.com/dtds/podcast-1.0.dtd\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eTest Podcast Command\u003c/title\u003e\n            \u003cdescription\u003eA test podcast for command testing\u003c/description\u003e\n            \u003clink\u003ehttps://example.com/podcast\u003c/link\u003e\n            \u003citunes:image href=\"https://example.com/artwork.jpg\"/\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eTest Episode 1\u003c/title\u003e\n                \u003cdescription\u003eFirst test episode\u003c/description\u003e\n                \u003cenclosure url=\"https://example.com/ep1.mp3\" type=\"audio/mpeg\" length=\"1000000\"/\u003e\n                \u003cpubDate\u003eMon, 01 Jan 2023 00:00:00 +0000\u003c/pubDate\u003e\n                \u003citunes:duration\u003e30:00\u003c/itunes:duration\u003e\n            \u003c/item\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eTest Episode 2\u003c/title\u003e\n                \u003cdescription\u003eSecond test episode\u003c/description\u003e\n                \u003cenclosure url=\"https://example.com/ep2.mp3\" type=\"audio/mpeg\" length=\"2000000\"/\u003e\n                \u003cpubDate\u003eTue, 02 Jan 2023 00:00:00 +0000\u003c/pubDate\u003e\n                \u003citunes:duration\u003e45:30\u003c/itunes:duration\u003e\n            \u003c/item\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/feed.xml\");\n            then.status(200)\n                .header(\"content-type\", \"application/rss+xml\")\n                .body(mock_feed);\n        });\n\n        let url = server.url(\"/feed.xml\");\n        let start_time = Instant::now();\n\n        let result = add_podcast(url).await;\n        let elapsed = start_time.elapsed();\n\n        assert!(result.is_ok());\n        assert!(elapsed.as_secs() \u003c 5); // User Story #1 acceptance criteria\n\n        let podcast = result.unwrap();\n        assert_eq!(podcast.name, \"Test Podcast Command\");\n        assert_eq!(\n            podcast.description,\n            Some(\"A test podcast for command testing\".to_string())\n        );\n        assert_eq!(\n            podcast.artwork_url,\n            Some(\"https://example.com/artwork.jpg\".to_string())\n        );\n        assert_eq!(\n            podcast.website_url,\n            Some(\"https://example.com/podcast\".to_string())\n        );\n        assert!(podcast.id \u003e 0);\n\n        mock.assert();\n\n        // Verify episodes were saved\n        let episodes = get_episodes(Some(podcast.id)).await.unwrap();\n        assert_eq!(episodes.len(), 2);\n        assert_eq!(episodes[0].title, \"Test Episode 2\"); // Should be ordered by date DESC\n        assert_eq!(episodes[1].title, \"Test Episode 1\");\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_add_podcast_invalid_url() {\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        let result = add_podcast(\"invalid-url\".to_string()).await;\n        assert!(result.is_err());\n        assert!(result.unwrap_err().contains(\"must start with http://\"));\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_4_remove_podcast_command() {\n        // User Story #4: Remove podcast subscriptions\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n        let server = MockServer::start();\n\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003ePodcast to Remove\u003c/title\u003e\n            \u003cdescription\u003eThis podcast will be removed\u003c/description\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/remove-me.xml\");\n            then.status(200)\n                .header(\"content-type\", \"application/rss+xml\")\n                .body(mock_feed);\n        });\n\n        let url = server.url(\"/remove-me.xml\");\n\n        // Add podcast first\n        let podcast = add_podcast(url).await.unwrap();\n\n        // Verify it exists\n        let podcasts = get_podcasts().await.unwrap();\n        assert_eq!(podcasts.len(), 1);\n        assert_eq!(podcasts[0].id, podcast.id);\n\n        // Remove podcast\n        let result = remove_podcast(podcast.id).await;\n        assert!(result.is_ok());\n\n        // Verify it's gone\n        let podcasts = get_podcasts().await.unwrap();\n        assert_eq!(podcasts.len(), 0);\n\n        mock.assert();\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_2_get_episodes_command() {\n        // User Story #2: View all episodes of specific podcast\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n        let server = MockServer::start();\n\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eEpisode Test Podcast\u003c/title\u003e\n            \u003cdescription\u003eFor testing episode retrieval\u003c/description\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eLatest Episode\u003c/title\u003e\n                \u003cdescription\u003eThe newest episode\u003c/description\u003e\n                \u003cenclosure url=\"https://example.com/latest.mp3\" type=\"audio/mpeg\" length=\"1000000\"/\u003e\n                \u003cpubDate\u003eWed, 03 Jan 2023 00:00:00 +0000\u003c/pubDate\u003e\n            \u003c/item\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eOlder Episode\u003c/title\u003e\n                \u003cdescription\u003eAn older episode\u003c/description\u003e\n                \u003cenclosure url=\"https://example.com/older.mp3\" type=\"audio/mpeg\" length=\"1500000\"/\u003e\n                \u003cpubDate\u003eMon, 01 Jan 2023 00:00:00 +0000\u003c/pubDate\u003e\n            \u003c/item\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/episodes.xml\");\n            then.status(200)\n                .header(\"content-type\", \"application/rss+xml\")\n                .body(mock_feed);\n        });\n\n        let url = server.url(\"/episodes.xml\");\n        let podcast = add_podcast(url).await.unwrap();\n\n        // Test User Story #2: Get episodes for specific podcast\n        let start_time = Instant::now();\n        let episodes = get_episodes(Some(podcast.id)).await.unwrap();\n        let elapsed = start_time.elapsed();\n\n        assert!(elapsed.as_secs() \u003c 3); // User Story #2 acceptance criteria: within 3 seconds\n        assert_eq!(episodes.len(), 2);\n\n        // Episodes should be ordered by published date DESC\n        assert_eq!(episodes[0].title, \"Latest Episode\");\n        assert_eq!(episodes[1].title, \"Older Episode\");\n\n        // All episodes should belong to the correct podcast\n        for episode in \u0026episodes {\n            assert_eq!(episode.podcast_id, podcast.id);\n            assert_eq!(episode.podcast_name, \"Episode Test Podcast\");\n            assert_eq!(episode.status, \"new\"); // Default status\n        }\n\n        mock.assert();\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_7_combined_inbox_command() {\n        // User Story #7: View all new episodes across podcasts (Combined Inbox)\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n        let server = MockServer::start();\n\n        let feed1 = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003ePodcast One\u003c/title\u003e\n            \u003cdescription\u003eFirst podcast\u003c/description\u003e\n            \u003citem\u003e\n                \u003ctitle\u003ePodcast 1 Episode\u003c/title\u003e\n                \u003cenclosure url=\"https://example.com/p1e1.mp3\" type=\"audio/mpeg\" length=\"1000000\"/\u003e\n                \u003cpubDate\u003eWed, 03 Jan 2023 00:00:00 +0000\u003c/pubDate\u003e\n            \u003c/item\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let feed2 = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003ePodcast Two\u003c/title\u003e\n            \u003cdescription\u003eSecond podcast\u003c/description\u003e\n            \u003citem\u003e\n                \u003ctitle\u003ePodcast 2 Episode\u003c/title\u003e\n                \u003cenclosure url=\"https://example.com/p2e1.mp3\" type=\"audio/mpeg\" length=\"1500000\"/\u003e\n                \u003cpubDate\u003eTue, 02 Jan 2023 00:00:00 +0000\u003c/pubDate\u003e\n            \u003c/item\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock1 = server.mock(|when, then| {\n            when.method(GET).path(\"/feed1.xml\");\n            then.status(200).body(feed1);\n        });\n\n        let mock2 = server.mock(|when, then| {\n            when.method(GET).path(\"/feed2.xml\");\n            then.status(200).body(feed2);\n        });\n\n        // Add both podcasts\n        let _podcast1 = add_podcast(server.url(\"/feed1.xml\")).await.unwrap();\n        let _podcast2 = add_podcast(server.url(\"/feed2.xml\")).await.unwrap();\n\n        // Test User Story #7: Get all new episodes (Combined Inbox)\n        let new_episodes = get_episodes(None).await.unwrap();\n        assert_eq!(new_episodes.len(), 2);\n\n        // Should be ordered by published date DESC\n        assert_eq!(new_episodes[0].title, \"Podcast 1 Episode\");\n        assert_eq!(new_episodes[0].podcast_name, \"Podcast One\");\n        assert_eq!(new_episodes[1].title, \"Podcast 2 Episode\");\n        assert_eq!(new_episodes[1].podcast_name, \"Podcast Two\");\n\n        // All should have \"new\" status\n        for episode in \u0026new_episodes {\n            assert_eq!(episode.status, \"new\");\n        }\n\n        mock1.assert();\n        mock2.assert();\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_5_update_episode_status_command() {\n        // User Story #5: Mark episodes as \"listened\"\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n        let server = MockServer::start();\n\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eStatus Test Podcast\u003c/title\u003e\n            \u003cdescription\u003eFor testing status updates\u003c/description\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eStatus Test Episode\u003c/title\u003e\n                \u003cenclosure url=\"https://example.com/status.mp3\" type=\"audio/mpeg\" length=\"1000000\"/\u003e\n                \u003cpubDate\u003eMon, 01 Jan 2023 00:00:00 +0000\u003c/pubDate\u003e\n            \u003c/item\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/status.xml\");\n            then.status(200).body(mock_feed);\n        });\n\n        let url = server.url(\"/status.xml\");\n        let podcast = add_podcast(url).await.unwrap();\n        let episodes = get_episodes(Some(podcast.id)).await.unwrap();\n        let episode_id = episodes[0].id;\n\n        // Initially should be \"new\"\n        assert_eq!(episodes[0].status, \"new\");\n\n        // Update to \"listened\"\n        let result = update_episode_status(episode_id, \"listened\".to_string()).await;\n        assert!(result.is_ok());\n\n        // Verify status changed and persists\n        let episodes = get_episodes(Some(podcast.id)).await.unwrap();\n        assert_eq!(episodes[0].status, \"listened\");\n\n        // Update to \"unlistened\"\n        let result = update_episode_status(episode_id, \"unlistened\".to_string()).await;\n        assert!(result.is_ok());\n\n        let episodes = get_episodes(Some(podcast.id)).await.unwrap();\n        assert_eq!(episodes[0].status, \"unlistened\");\n\n        mock.assert();\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_update_episode_status_invalid() {\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        let result = update_episode_status(999, \"invalid_status\".to_string()).await;\n        assert!(result.is_err());\n        assert!(result.unwrap_err().contains(\"Invalid status\"));\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_get_podcasts_empty() {\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        let result = get_podcasts().await;\n        assert!(result.is_ok());\n        assert_eq!(result.unwrap().len(), 0);\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_get_episodes_empty() {\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        let result = get_episodes(Some(1)).await;\n        assert!(result.is_ok());\n        assert_eq!(result.unwrap().len(), 0);\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_1_complete_workflow() {\n        // Complete User Story #1 workflow test\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n        let server = MockServer::start();\n\n        let complete_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\" xmlns:itunes=\"http://www.itunes.com/dtds/podcast-1.0.dtd\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eComplete Workflow Test\u003c/title\u003e\n            \u003cdescription\u003eTesting complete User Story #1 workflow\u003c/description\u003e\n            \u003clink\u003ehttps://example.com/complete\u003c/link\u003e\n            \u003citunes:image href=\"https://example.com/complete-art.jpg\"/\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eComplete Episode\u003c/title\u003e\n                \u003cdescription\u003eComplete episode metadata\u003c/description\u003e\n                \u003cenclosure url=\"https://example.com/complete.mp3\" type=\"audio/mpeg\" length=\"25000000\"/\u003e\n                \u003cpubDate\u003eMon, 01 Jan 2023 12:00:00 +0000\u003c/pubDate\u003e\n                \u003citunes:duration\u003e1:23:45\u003c/itunes:duration\u003e\n            \u003c/item\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/complete.xml\");\n            then.status(200)\n                .header(\"content-type\", \"application/rss+xml\")\n                .body(complete_feed);\n        });\n\n        let url = server.url(\"/complete.xml\");\n\n        // Step 1: Add podcast (User Story #1)\n        let start_time = Instant::now();\n        let podcast = add_podcast(url).await.unwrap();\n        let add_time = start_time.elapsed();\n\n        // Verify acceptance criteria\n        assert!(add_time.as_secs() \u003c 5); // Within 5 seconds\n        assert_eq!(podcast.name, \"Complete Workflow Test\");\n        assert_eq!(\n            podcast.description,\n            Some(\"Testing complete User Story #1 workflow\".to_string())\n        );\n        assert_eq!(\n            podcast.artwork_url,\n            Some(\"https://example.com/complete-art.jpg\".to_string())\n        );\n        assert_eq!(\n            podcast.website_url,\n            Some(\"https://example.com/complete\".to_string())\n        );\n\n        // Step 2: Verify podcast is in list\n        let podcasts = get_podcasts().await.unwrap();\n        assert_eq!(podcasts.len(), 1);\n        assert_eq!(podcasts[0].id, podcast.id);\n        assert_eq!(podcasts[0].episode_count, 1);\n        assert_eq!(podcasts[0].new_episode_count, 1);\n\n        // Step 3: Verify episodes were extracted and saved\n        let episodes = get_episodes(Some(podcast.id)).await.unwrap();\n        assert_eq!(episodes.len(), 1);\n\n        let episode = \u0026episodes[0];\n        assert_eq!(episode.title, \"Complete Episode\");\n        assert_eq!(\n            episode.description,\n            Some(\"Complete episode metadata\".to_string())\n        );\n        assert_eq!(episode.episode_url, \"https://example.com/complete.mp3\");\n        assert_eq!(episode.duration, Some(5025)); // 1:23:45 = 5025 seconds\n        assert_eq!(episode.status, \"new\");\n        assert_eq!(episode.podcast_name, \"Complete Workflow Test\");\n\n        mock.assert();\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_3_download_progress_tracking() {\n        // User Story #3 Acceptance Criteria: Download progress percentage tracking\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        // Test that progress tracking works for non-existent episode\n        let progress = get_download_progress(999).await; // Non-existent episode\n        assert!(\n            progress.is_ok(),\n            \"Should return 0% for non-existent episode\"\n        );\n        assert_eq!(progress.unwrap(), 0.0, \"Should return 0% progress\");\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_3_download_already_downloaded() {\n        // Test downloading an already downloaded episode\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n        let server = MockServer::start();\n\n        let feed_mock = server.mock(|when, then| {\n            when.method(GET).path(\"/feed.xml\");\n            then.status(200).body(format!(\n                r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n                \u003crss version=\"2.0\"\u003e\n                \u003cchannel\u003e\n                    \u003ctitle\u003eAlready Downloaded Test\u003c/title\u003e\n                    \u003cdescription\u003eTesting already downloaded episodes\u003c/description\u003e\n                    \u003citem\u003e\n                        \u003ctitle\u003eAlready Downloaded Episode\u003c/title\u003e\n                        \u003cenclosure url=\"{}/already.mp3\" type=\"audio/mpeg\" length=\"1000000\"/\u003e\n                        \u003cpubDate\u003eMon, 01 Jan 2023 00:00:00 +0000\u003c/pubDate\u003e\n                    \u003c/item\u003e\n                \u003c/channel\u003e\n                \u003c/rss\u003e\"#,\n                server.base_url()\n            ));\n        });\n\n        // Add podcast and get episode\n        let podcast = add_podcast(server.url(\"/feed.xml\")).await.unwrap();\n        let episodes = get_episodes(Some(podcast.id)).await.unwrap();\n        let episode_id = episodes[0].id;\n\n        // Mark episode as already downloaded manually in database\n        let db_lock = DATABASE.lock().await;\n        let db = db_lock.as_ref().unwrap();\n        db.update_episode_downloaded_status(episode_id, true, Some(\"/fake/path.mp3\"))\n            .await\n            .unwrap();\n        drop(db_lock);\n\n        // Try to download again - should succeed immediately without network call\n        let result = download_episode(episode_id).await;\n        assert!(\n            result.is_ok(),\n            \"Should succeed for already downloaded episode\"\n        );\n\n        feed_mock.assert();\n        // Note: No download mock needed since episode is already marked as downloaded\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_3_download_episode_basic() {\n        // User Story #3: Download episodes with basic validation\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        // Simple test: Try to download an episode that doesn't exist in database\n        let result = download_episode(99999).await;\n        assert!(result.is_err(), \"Should fail for non-existent episode\");\n        assert!(\n            result.unwrap_err().contains(\"Episode not found\"),\n            \"Should return appropriate error message\"\n        );\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_8_get_usb_devices_command() {\n        // User Story #8: See USB device storage capacity\n        // Test the command interface for USB device detection\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n        let start_time = Instant::now();\n\n        let result = get_usb_devices().await;\n        let elapsed = start_time.elapsed();\n\n        // Should complete successfully\n        assert!(\n            result.is_ok(),\n            \"USB device detection command should not fail: {:?}\",\n            result\n        );\n\n        // Should complete within 5 seconds (User Story #8 acceptance criteria)\n        assert!(\n            elapsed.as_secs() \u003c 5,\n            \"USB device detection should complete within 5 seconds, took {:?}\",\n            elapsed\n        );\n\n        let devices = result.unwrap();\n\n        // Should return a vector (may be empty if no USB devices connected)\n        log::info!(\"Found {} USB devices in command test\", devices.len());\n\n        // If devices are found, validate structure\n        for device in \u0026devices {\n            // User Story #8: Storage capacity display requirements\n            assert!(!device.id.is_empty(), \"Device ID should not be empty\");\n            assert!(!device.name.is_empty(), \"Device name should not be empty\");\n            assert!(!device.path.is_empty(), \"Device path should not be empty\");\n            assert!(device.is_connected, \"Detected devices should be connected\");\n\n            // Storage space validation (User Story #8 acceptance criteria)\n            assert!(\n                device.available_space \u003c= device.total_space,\n                \"Available space should not exceed total space\"\n            );\n\n            log::info!(\n                \"USB Device - Name: {}, Path: {}, Total: {} bytes, Available: {} bytes\",\n                device.name,\n                device.path,\n                device.total_space,\n                device.available_space\n            );\n        }\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_8_usb_device_structure_validation() {\n        // User Story #8: Validate USB device data structure meets acceptance criteria\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        let devices = get_usb_devices().await.unwrap();\n\n        for device in \u0026devices {\n            // Validate required fields are present and valid\n            assert!(!device.id.is_empty(), \"Device ID should not be empty\");\n            assert!(!device.name.is_empty(), \"Device name should not be empty\");\n            assert!(!device.path.is_empty(), \"Device path should not be empty\");\n\n            // Validate device is marked as connected\n            assert!(\n                device.is_connected,\n                \"Detected devices should be marked as connected\"\n            );\n\n            // Validate storage information (User Story #8 core requirement)\n\n            // Validate storage relationship\n            assert!(\n                device.available_space \u003c= device.total_space,\n                \"Available space ({} bytes) cannot exceed total space ({} bytes)\",\n                device.available_space,\n                device.total_space\n            );\n\n            // Validate ID is filesystem safe\n            assert!(\n                !device.id.contains('/'),\n                \"Device ID should not contain path separators\"\n            );\n            assert!(\n                !device.id.contains('\\\\'),\n                \"Device ID should not contain path separators\"\n            );\n            assert!(\n                !device.id.contains(' '),\n                \"Device ID should not contain spaces\"\n            );\n\n            // Validate path looks reasonable\n            assert!(\n                device.path.starts_with('/') || device.path.contains(':'),\n                \"Device path should look like a valid mount point: {}\",\n                device.path\n            );\n        }\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_8_performance_requirements() {\n        // User Story #8 Acceptance Criteria: Performance requirements\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        // Test multiple calls to ensure consistent performance\n        for i in 0..3 {\n            let start_time = Instant::now();\n            let result = get_usb_devices().await;\n            let elapsed = start_time.elapsed();\n\n            assert!(\n                result.is_ok(),\n                \"USB detection call {} should succeed\",\n                i + 1\n            );\n            assert!(\n                elapsed.as_secs() \u003c 5,\n                \"USB detection call {} should complete within 5 seconds, took {:?}\",\n                i + 1,\n                elapsed\n            );\n\n            // Performance should be consistent across calls\n            if i \u003e 0 {\n                assert!(\n                    elapsed.as_millis() \u003c 2000,\n                    \"Subsequent USB detection calls should be fast (\u003c 2s), took {:?}\",\n                    elapsed\n                );\n            }\n        }\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_8_storage_space_calculations() {\n        // User Story #8: Storage space display validation\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        let devices = get_usb_devices().await.unwrap();\n\n        for device in \u0026devices {\n            // Storage space should be reasonable\n            assert!(device.total_space \u003e 0, \"Total space should be positive\");\n            assert!(\n                device.available_space \u003c= device.total_space,\n                \"Available space should not exceed total\"\n            );\n\n            // Storage space should be in reasonable ranges (not absurdly large)\n            // Allow for very large drives (up to 10TB)\n            assert!(\n                device.total_space \u003c 10_000_000_000_000,\n                \"Total space should be reasonable (\u003c 10TB)\"\n            );\n        }\n\n        // Test should complete within reasonable time\n        let start = std::time::Instant::now();\n        let _devices = get_usb_devices().await.unwrap();\n        let elapsed = start.elapsed();\n        assert!(\n            elapsed.as_secs() \u003c 2,\n            \"Multiple USB device calls should complete quickly\"\n        );\n    }\n\n    // USER STORY #9 TESTS - Transfer episodes to USB device\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_9_transfer_episode_to_device_command() {\n        // User Story #9: Transfer episodes to USB device\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n        let server = MockServer::start();\n\n        // Create a mock podcast and episode\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eTransfer Test Podcast\u003c/title\u003e\n            \u003cdescription\u003ePodcast for testing episode transfers\u003c/description\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eEpisode to Transfer\u003c/title\u003e\n                \u003cdescription\u003eThis episode will be transferred to USB\u003c/description\u003e\n                \u003cenclosure url=\"https://example.com/transfer.mp3\" type=\"audio/mpeg\" length=\"1000000\"/\u003e\n                \u003cpubDate\u003eWed, 01 Feb 2023 00:00:00 +0000\u003c/pubDate\u003e\n            \u003c/item\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/transfer-test.xml\");\n            then.status(200)\n                .header(\"content-type\", \"application/rss+xml\")\n                .body(mock_feed);\n        });\n\n        let url = server.url(\"/transfer-test.xml\");\n\n        // Add podcast and get episode\n        let podcast = add_podcast(url).await.unwrap();\n        let episodes = get_episodes(Some(podcast.id)).await.unwrap();\n        assert_eq!(episodes.len(), 1);\n        let episode_id = episodes[0].id;\n\n        // Mock episode as downloaded (normally would be done by download_episode)\n        // For testing, we'll create a test file and mark it as downloaded\n        std::fs::create_dir_all(\"./test_episodes\").unwrap();\n        let test_file_path = format!(\n            \"./test_episodes/{}/{}_Episode_to_Transfer.mp3\",\n            podcast.id, episode_id\n        );\n        std::fs::create_dir_all(format!(\"./test_episodes/{}\", podcast.id)).unwrap();\n        std::fs::write(\u0026test_file_path, b\"test episode content for transfer\").unwrap();\n\n        // Manually update database to mark as downloaded\n        let db_lock = DATABASE.lock().await;\n        let db = db_lock.as_ref().unwrap();\n        db.update_episode_downloaded_status(episode_id, true, Some(\u0026test_file_path))\n            .await\n            .unwrap();\n        drop(db_lock);\n\n        // Test transfer to non-existent device (should fail)\n        let result = transfer_episode_to_device(episode_id, \"nonexistent_device\".to_string()).await;\n        assert!(\n            result.is_err(),\n            \"Transfer to nonexistent device should fail\"\n        );\n        assert!(\n            result.unwrap_err().contains(\"not found\"),\n            \"Error should mention device not found\"\n        );\n\n        // Test transfer of non-downloaded episode\n        let episodes2 = get_episodes(Some(podcast.id)).await.unwrap();\n        let non_downloaded_episode = episodes2.iter().find(|ep| !ep.downloaded);\n        if let Some(ep) = non_downloaded_episode {\n            let result = transfer_episode_to_device(ep.id, \"test_device\".to_string()).await;\n            assert!(\n                result.is_err(),\n                \"Transfer of non-downloaded episode should fail\"\n            );\n            assert!(\n                result.unwrap_err().contains(\"not downloaded\"),\n                \"Error should mention episode not downloaded\"\n            );\n        }\n\n        mock.assert();\n\n        // Cleanup\n        std::fs::remove_file(\u0026test_file_path).unwrap_or(());\n        std::fs::remove_dir_all(\"./test_episodes\").unwrap_or(());\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_9_transfer_nonexistent_episode() {\n        // User Story #9: Error handling for nonexistent episode\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        let result = transfer_episode_to_device(999, \"test_device\".to_string()).await;\n        assert!(\n            result.is_err(),\n            \"Transfer of nonexistent episode should fail\"\n        );\n        assert!(\n            result.unwrap_err().contains(\"not found\"),\n            \"Error should mention episode not found\"\n        );\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_9_transfer_performance_requirements() {\n        // User Story #9: Transfer performance requirements\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        // Test that transfer command responds quickly even when failing\n        let start_time = std::time::Instant::now();\n        let result = transfer_episode_to_device(999, \"nonexistent\".to_string()).await;\n        let elapsed = start_time.elapsed();\n\n        assert!(result.is_err(), \"Transfer should fail for invalid inputs\");\n        assert!(\n            elapsed.as_millis() \u003c 1000,\n            \"Transfer command should respond within 1 second even when failing\"\n        );\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_9_transfer_error_messages() {\n        // User Story #9: Clear error messages for transfer failures\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        // Test various error scenarios\n        let result1 = transfer_episode_to_device(999, \"device\".to_string()).await;\n        assert!(result1.is_err());\n        let error1 = result1.unwrap_err();\n        assert!(!error1.is_empty(), \"Error message should not be empty\");\n        assert!(error1.contains(\"Episode\"), \"Error should mention episode\");\n\n        let result2 = transfer_episode_to_device(1, \"nonexistent_device\".to_string()).await;\n        assert!(result2.is_err());\n        let error2 = result2.unwrap_err();\n        assert!(!error2.is_empty(), \"Error message should not be empty\");\n        // Error could be about episode not found or device not found, both are valid\n    }\n\n    // USER STORY #10 TESTS - Remove episodes from USB device (Command Interface)\n    // These tests validate command-level acceptance criteria BEFORE implementation\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_10_remove_episode_from_device_command() {\n        // User Story #10: Remove episodes from USB device\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n        let server = MockServer::start();\n\n        // Create a mock podcast and episode\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eRemove Test Podcast\u003c/title\u003e\n            \u003cdescription\u003ePodcast for testing episode removal\u003c/description\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eEpisode to Remove\u003c/title\u003e\n                \u003cdescription\u003eThis episode will be removed from USB\u003c/description\u003e\n                \u003cenclosure url=\"https://example.com/remove.mp3\" type=\"audio/mpeg\" length=\"1000000\"/\u003e\n                \u003cpubDate\u003eWed, 01 Feb 2023 00:00:00 +0000\u003c/pubDate\u003e\n            \u003c/item\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/remove-test.xml\");\n            then.status(200)\n                .header(\"content-type\", \"application/rss+xml\")\n                .body(mock_feed);\n        });\n\n        let url = server.url(\"/remove-test.xml\");\n\n        // Add podcast and get episode\n        let podcast = add_podcast(url).await.unwrap();\n        let episodes = get_episodes(Some(podcast.id)).await.unwrap();\n        assert_eq!(episodes.len(), 1);\n        let episode_id = episodes[0].id;\n\n        // Mock episode as downloaded and transferred\n        std::fs::create_dir_all(\"./test_episodes\").unwrap();\n        let test_file_path = format!(\n            \"./test_episodes/{}/{}_Episode_to_Remove.mp3\",\n            podcast.id, episode_id\n        );\n        std::fs::create_dir_all(format!(\"./test_episodes/{}\", podcast.id)).unwrap();\n        std::fs::write(\u0026test_file_path, b\"test episode content for removal\").unwrap();\n\n        // Manually update database to mark as downloaded and on device\n        let db_lock = DATABASE.lock().await;\n        let db = db_lock.as_ref().unwrap();\n        db.update_episode_downloaded_status(episode_id, true, Some(\u0026test_file_path))\n            .await\n            .unwrap();\n        db.update_episode_on_device_status(episode_id, true)\n            .await\n            .unwrap();\n        drop(db_lock);\n\n        // Test removal from non-existent device (should fail)\n        let result = remove_episode_from_device(episode_id, \"nonexistent_device\".to_string()).await;\n        assert!(\n            result.is_err(),\n            \"Removal from nonexistent device should fail\"\n        );\n        let error_msg = result.unwrap_err();\n        assert!(\n            error_msg.contains(\"not found\") || error_msg.contains(\"not implemented\"),\n            \"Error should mention device not found or not implemented: {}\",\n            error_msg\n        );\n\n        // Test removal of episode not on device\n        let db_lock = DATABASE.lock().await;\n        let db = db_lock.as_ref().unwrap();\n        db.update_episode_on_device_status(episode_id, false)\n            .await\n            .unwrap();\n        drop(db_lock);\n\n        let result = remove_episode_from_device(episode_id, \"test_device\".to_string()).await;\n        assert!(\n            result.is_err(),\n            \"Removal of episode not on device should fail\"\n        );\n\n        mock.assert();\n\n        // Cleanup\n        std::fs::remove_file(\u0026test_file_path).unwrap_or(());\n        std::fs::remove_dir_all(\"./test_episodes\").unwrap_or(());\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_10_remove_nonexistent_episode_command() {\n        // User Story #10: Error handling for nonexistent episode\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        let result = remove_episode_from_device(999, \"test_device\".to_string()).await;\n        assert!(\n            result.is_err(),\n            \"Removal of nonexistent episode should fail\"\n        );\n        let error_msg = result.unwrap_err();\n        assert!(\n            error_msg.contains(\"not found\") || error_msg.contains(\"not implemented\"),\n            \"Error should mention episode not found or not implemented: {}\",\n            error_msg\n        );\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_10_remove_episode_performance_requirements() {\n        // User Story #10: Performance requirements for episode removal\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n\n        let start_time = std::time::Instant::now();\n        let result = remove_episode_from_device(1, \"test_device\".to_string()).await;\n        let elapsed = start_time.elapsed();\n\n        // Should complete within reasonable time (even if not implemented)\n        assert!(\n            elapsed.as_secs() \u003c 5,\n            \"Remove episode command should complete within 5 seconds, took {:?}\",\n            elapsed\n        );\n\n        // Will fail until implemented, but should fail quickly\n        assert!(\n            result.is_err(),\n            \"Remove episode should fail until implemented\"\n        );\n    }\n\n    #[tokio::test]\n    #[serial]\n    async fn test_user_story_10_remove_episode_database_integration() {\n        // User Story #10: Database integration for episode removal tracking\n        let (_db, _rss, _file, _usb) = setup_test_environment().await;\n        let server = MockServer::start();\n\n        // Create test podcast and episode\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eDatabase Integration Test\u003c/title\u003e\n            \u003cdescription\u003eTesting database integration for removal\u003c/description\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eDatabase Test Episode\u003c/title\u003e\n                \u003cdescription\u003eThis episode tests database integration\u003c/description\u003e\n                \u003cenclosure url=\"https://example.com/db-test.mp3\" type=\"audio/mpeg\" length=\"500000\"/\u003e\n                \u003cpubDate\u003eThu, 02 Feb 2023 00:00:00 +0000\u003c/pubDate\u003e\n            \u003c/item\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/db-test.xml\");\n            then.status(200)\n                .header(\"content-type\", \"application/rss+xml\")\n                .body(mock_feed);\n        });\n\n        let url = server.url(\"/db-test.xml\");\n        let podcast = add_podcast(url).await.unwrap();\n        let episodes = get_episodes(Some(podcast.id)).await.unwrap();\n        let episode_id = episodes[0].id;\n\n        // Verify episode starts as not on device\n        let episode_before = get_episodes(Some(podcast.id)).await.unwrap();\n        let test_episode_before = episode_before\n            .iter()\n            .find(|ep| ep.id == episode_id)\n            .unwrap();\n        assert!(\n            !test_episode_before.on_device,\n            \"Episode should not be on device initially\"\n        );\n\n        // Set episode as on device\n        let db_lock = DATABASE.lock().await;\n        let db = db_lock.as_ref().unwrap();\n        db.update_episode_on_device_status(episode_id, true)\n            .await\n            .unwrap();\n        drop(db_lock);\n\n        // Test removal command (will fail until implemented, but should update database)\n        let _result = remove_episode_from_device(episode_id, \"test_device\".to_string()).await;\n\n        // When implemented, should update database to mark episode as not on device\n        // For now, we just verify the command completes\n\n        mock.assert();\n    }\n}\n","traces":[{"line":69,"address":[15365040],"length":1,"stats":{"Line":1}},{"line":75,"address":[17053587,17053447,17053683,17053392],"length":1,"stats":{"Line":2}},{"line":76,"address":[17054084,17053901,17053943,17054026,17054311],"length":1,"stats":{"Line":1}},{"line":78,"address":[14301076],"length":1,"stats":{"Line":2}},{"line":79,"address":[17054964,17054596,17054679,17054554,17054737],"length":1,"stats":{"Line":1}},{"line":81,"address":[11848420,11848297,11846821,11848220],"length":1,"stats":{"Line":2}},{"line":82,"address":[17055372,17055289,17055201,17055657,17055430],"length":1,"stats":{"Line":1}},{"line":84,"address":[17053510,17055590,17055505,17055685],"length":1,"stats":{"Line":2}},{"line":85,"address":[17055887,17056095,17056037,17056351,17055961],"length":1,"stats":{"Line":1}},{"line":90,"address":[17072141,17072221,17072496,17072112,17072243],"length":1,"stats":{"Line":4}},{"line":91,"address":[11865861,11865951],"length":1,"stats":{"Line":2}},{"line":96,"address":[19143088,19143091],"length":1,"stats":{"Line":4}},{"line":97,"address":[17073036,17072733,17073005],"length":1,"stats":{"Line":3}},{"line":100,"address":[17073340,17073436,17073011,17072811],"length":1,"stats":{"Line":2}},{"line":101,"address":[17073752,17073673,17074049],"length":1,"stats":{"Line":2}},{"line":103,"address":[14294132],"length":1,"stats":{"Line":1}},{"line":104,"address":[17074316,17074395,17074771],"length":1,"stats":{"Line":2}},{"line":111,"address":[11868348,11868438,11868943,11868820,11868792,11868484,11869304],"length":1,"stats":{"Line":7}},{"line":112,"address":[17074611],"length":1,"stats":{"Line":1}},{"line":113,"address":[17074795,17075002,17072853,17074741,17074701],"length":1,"stats":{"Line":4}},{"line":114,"address":[17081514,17075107,17081488],"length":1,"stats":{"Line":3}},{"line":116,"address":[17075780,17075367,17075264,17075397,17075662,17075879,17076856],"length":1,"stats":{"Line":5}},{"line":117,"address":[17075347],"length":1,"stats":{"Line":1}},{"line":118,"address":[8686474],"length":1,"stats":{"Line":3}},{"line":119,"address":[17081680,17081706,17075847],"length":1,"stats":{"Line":0}},{"line":121,"address":[11870044,11869954],"length":1,"stats":{"Line":2}},{"line":124,"address":[17077089,17077228,17077587,17076793,17076729,17077129,17076221],"length":1,"stats":{"Line":5}},{"line":126,"address":[17076314],"length":1,"stats":{"Line":1}},{"line":127,"address":[17076384],"length":1,"stats":{"Line":1}},{"line":128,"address":[17076451],"length":1,"stats":{"Line":1}},{"line":129,"address":[17076525],"length":1,"stats":{"Line":1}},{"line":130,"address":[11870459],"length":1,"stats":{"Line":1}},{"line":132,"address":[14294195],"length":1,"stats":{"Line":4}},{"line":133,"address":[17077196,17081872,17081898],"length":1,"stats":{"Line":0}},{"line":136,"address":[17078309,17077504,17077371,17077474,17077896,17077810,17077972],"length":1,"stats":{"Line":5}},{"line":137,"address":[17077454],"length":1,"stats":{"Line":1}},{"line":138,"address":[8686524],"length":1,"stats":{"Line":3}},{"line":139,"address":[11876101,11871872,11876080],"length":1,"stats":{"Line":0}},{"line":141,"address":[17078075,17078189],"length":1,"stats":{"Line":2}},{"line":143,"address":[17078192,17078272,17079121],"length":1,"stats":{"Line":3}},{"line":145,"address":[17080194,17079184],"length":1,"stats":{"Line":2}},{"line":146,"address":[17080283,17082256,17082278],"length":1,"stats":{"Line":3}},{"line":149,"address":[17080356],"length":1,"stats":{"Line":1}},{"line":151,"address":[17082304,17082334],"length":1,"stats":{"Line":2}},{"line":152,"address":[17082386,17082368],"length":1,"stats":{"Line":0}},{"line":154,"address":[17080443],"length":1,"stats":{"Line":1}},{"line":156,"address":[17080497],"length":1,"stats":{"Line":1}},{"line":158,"address":[17082448,17082457],"length":1,"stats":{"Line":2}},{"line":159,"address":[17084751,17082480,17084757],"length":1,"stats":{"Line":1}},{"line":161,"address":[17082509],"length":1,"stats":{"Line":1}},{"line":162,"address":[17082580,17082651],"length":1,"stats":{"Line":2}},{"line":163,"address":[17082707,17082835],"length":1,"stats":{"Line":0}},{"line":166,"address":[17082997,17082745,17083706],"length":1,"stats":{"Line":2}},{"line":167,"address":[17083235,17083659],"length":1,"stats":{"Line":1}},{"line":168,"address":[11877543,11877643],"length":1,"stats":{"Line":1}},{"line":172,"address":[11878726,11876802,11877746],"length":1,"stats":{"Line":2}},{"line":173,"address":[17083965,17084677],"length":1,"stats":{"Line":1}},{"line":174,"address":[17084650,17084205],"length":1,"stats":{"Line":1}},{"line":175,"address":[17084449,17084621],"length":1,"stats":{"Line":1}},{"line":177,"address":[11876707],"length":1,"stats":{"Line":0}},{"line":182,"address":[17084806,17080638,17084784],"length":1,"stats":{"Line":3}},{"line":185,"address":[11872778,11872639,11872499,11875190,11874707,11875086],"length":1,"stats":{"Line":5}},{"line":187,"address":[17080730],"length":1,"stats":{"Line":1}},{"line":188,"address":[17080753],"length":1,"stats":{"Line":1}},{"line":189,"address":[17080815],"length":1,"stats":{"Line":1}},{"line":190,"address":[17080886],"length":1,"stats":{"Line":1}},{"line":191,"address":[17080950],"length":1,"stats":{"Line":1}},{"line":193,"address":[17081066],"length":1,"stats":{"Line":1}},{"line":195,"address":[14294237],"length":1,"stats":{"Line":5}},{"line":196,"address":[17085254,17078664,17084832],"length":1,"stats":{"Line":1}},{"line":197,"address":[11878875,11878995,11878956],"length":1,"stats":{"Line":0}},{"line":198,"address":[17084952],"length":1,"stats":{"Line":0}},{"line":203,"address":[11873186,11873387],"length":1,"stats":{"Line":2}},{"line":208,"address":[17079276],"length":1,"stats":{"Line":1}},{"line":212,"address":[17085280,17085419,17085894,17085315,17086482,17085477],"length":1,"stats":{"Line":4}},{"line":213,"address":[17085377,17085525,17085556],"length":1,"stats":{"Line":3}},{"line":215,"address":[11879563,11879964,11879859,11879478],"length":1,"stats":{"Line":2}},{"line":216,"address":[17086178,17086461,17086111],"length":1,"stats":{"Line":2}},{"line":218,"address":[17086947,17086634,17086413,17086349,17086817,17086714],"length":1,"stats":{"Line":4}},{"line":219,"address":[17085464,17086406,17086440,17086488,17086682],"length":1,"stats":{"Line":4}},{"line":220,"address":[17086960,17086986,17086785],"length":1,"stats":{"Line":0}},{"line":222,"address":[17086861],"length":1,"stats":{"Line":1}},{"line":226,"address":[11881299,11881826,11882465,11881391,11881264,11881449],"length":1,"stats":{"Line":4}},{"line":227,"address":[17087385,17087416,17087237],"length":1,"stats":{"Line":3}},{"line":229,"address":[17087306,17087647,17087391,17087728],"length":1,"stats":{"Line":2}},{"line":230,"address":[17087912,17087971],"length":1,"stats":{"Line":2}},{"line":232,"address":[17088517,17088634,17088142,17088204,17088234],"length":1,"stats":{"Line":5}},{"line":233,"address":[17087324,17088227,17088261,17088377,17088565],"length":1,"stats":{"Line":4}},{"line":234,"address":[17088682,17088656],"length":1,"stats":{"Line":0}},{"line":238,"address":[17089466,17088848,17089053,17090075,17088883,17088995],"length":1,"stats":{"Line":4}},{"line":239,"address":[11883309,11883344,11883161],"length":1,"stats":{"Line":3}},{"line":244,"address":[17089022,17089411,17089107,17089492],"length":1,"stats":{"Line":2}},{"line":245,"address":[17089744,17089677],"length":1,"stats":{"Line":2}},{"line":247,"address":[17089915,17090311,17090432,17089973,17090024],"length":1,"stats":{"Line":5}},{"line":248,"address":[8688290],"length":1,"stats":{"Line":4}},{"line":249,"address":[17090464,17090490],"length":1,"stats":{"Line":0}},{"line":253,"address":[19143208,19143200],"length":1,"stats":{"Line":4}},{"line":254,"address":[17090968,17090804,17091006],"length":1,"stats":{"Line":3}},{"line":261,"address":[17091333,17090974],"length":1,"stats":{"Line":2}},{"line":262,"address":[17091447,17091394],"length":1,"stats":{"Line":2}},{"line":265,"address":[17090879,17091425,17091537,17091624],"length":1,"stats":{"Line":2}},{"line":266,"address":[17091906,17091833],"length":1,"stats":{"Line":2}},{"line":268,"address":[17092077,17092243,17092133,17092634,17092761,17092273],"length":1,"stats":{"Line":6}},{"line":269,"address":[11886618,11885204,11886675,11886856,11887070],"length":1,"stats":{"Line":4}},{"line":270,"address":[17092842,17092816],"length":1,"stats":{"Line":0}},{"line":275,"address":[17093198,17094496,17093325,17093787,17093070,17093008],"length":1,"stats":{"Line":4}},{"line":276,"address":[17093150,17093382,17093413],"length":1,"stats":{"Line":3}},{"line":282,"address":[17093813,17093228,17093388,17093717],"length":1,"stats":{"Line":2}},{"line":283,"address":[17094119,17094472,17094040],"length":1,"stats":{"Line":2}},{"line":286,"address":[17094355,17094755,17094669,17095899,17094308,17094409,17094831],"length":1,"stats":{"Line":5}},{"line":287,"address":[17094343],"length":1,"stats":{"Line":1}},{"line":288,"address":[8690680],"length":1,"stats":{"Line":4}},{"line":289,"address":[11893429,11889303,11893408],"length":1,"stats":{"Line":0}},{"line":291,"address":[11890453,11889539,11889766,11889436,11889610],"length":1,"stats":{"Line":5}},{"line":293,"address":[17095082,17098928,17098938],"length":1,"stats":{"Line":3}},{"line":297,"address":[11889823],"length":1,"stats":{"Line":1}},{"line":298,"address":[17095587,17095343,17095558],"length":1,"stats":{"Line":3}},{"line":299,"address":[11890116],"length":1,"stats":{"Line":1}},{"line":304,"address":[17095312],"length":1,"stats":{"Line":0}},{"line":305,"address":[11889927,11890635,11890709,11890832,11891068,11890033],"length":1,"stats":{"Line":0}},{"line":307,"address":[14298342],"length":1,"stats":{"Line":0}},{"line":308,"address":[17098986,17098960,17096228],"length":1,"stats":{"Line":0}},{"line":311,"address":[17096424,17096672,17096297,17096394],"length":1,"stats":{"Line":0}},{"line":312,"address":[11890889],"length":1,"stats":{"Line":0}},{"line":313,"address":[8690730],"length":1,"stats":{"Line":0}},{"line":315,"address":[17096789],"length":1,"stats":{"Line":0}},{"line":316,"address":[11891522],"length":1,"stats":{"Line":0}},{"line":317,"address":[11891689,11891652,11891555],"length":1,"stats":{"Line":0}},{"line":324,"address":[17097405,17098408,17097058,17098322,17098511,17097541],"length":1,"stats":{"Line":0}},{"line":325,"address":[17097574,17093312,17098158,17098370,17097534],"length":1,"stats":{"Line":0}},{"line":326,"address":[11893845,11893824,11893131],"length":1,"stats":{"Line":0}},{"line":328,"address":[11893210],"length":1,"stats":{"Line":0}},{"line":330,"address":[11891430],"length":1,"stats":{"Line":0}},{"line":331,"address":[17096877,17097648,17097680],"length":1,"stats":{"Line":0}},{"line":332,"address":[17097670,17097989],"length":1,"stats":{"Line":0}},{"line":338,"address":[15367488,15367496],"length":1,"stats":{"Line":4}},{"line":339,"address":[11894292,11894251,11894124],"length":1,"stats":{"Line":3}},{"line":345,"address":[17099585],"length":1,"stats":{"Line":1}},{"line":347,"address":[17099865,17099515,17100614,17100049,17099950,17100413],"length":1,"stats":{"Line":4}},{"line":348,"address":[17100533],"length":1,"stats":{"Line":0}},{"line":350,"address":[17100584],"length":1,"stats":{"Line":1}},{"line":356,"address":[11896231,11895648,11895678,11895747,11895769],"length":1,"stats":{"Line":3}},{"line":357,"address":[11895816,11895711,11895844],"length":1,"stats":{"Line":3}},{"line":359,"address":[17101094],"length":1,"stats":{"Line":1}},{"line":360,"address":[17101380,17101317],"length":1,"stats":{"Line":2}},{"line":362,"address":[17101546,17101520],"length":1,"stats":{"Line":0}},{"line":366,"address":[11897385,11896526,11896739,11904940,11896464,11898090],"length":1,"stats":{"Line":4}},{"line":367,"address":[17102200,17101939,17102169],"length":1,"stats":{"Line":3}},{"line":374,"address":[8699010],"length":1,"stats":{"Line":2}},{"line":375,"address":[11898062,11897650,11897737],"length":1,"stats":{"Line":2}},{"line":377,"address":[14307528],"length":1,"stats":{"Line":1}},{"line":378,"address":[17103507,17103586,17104001],"length":1,"stats":{"Line":2}},{"line":384,"address":[11898627,11898740,11898802,11902911,11899146,11899072,11899246],"length":1,"stats":{"Line":5}},{"line":385,"address":[11898708],"length":1,"stats":{"Line":1}},{"line":386,"address":[8699062],"length":1,"stats":{"Line":4}},{"line":387,"address":[17110784,17110810,17104322],"length":1,"stats":{"Line":0}},{"line":389,"address":[17104822,17104603,17104470,17104885,17104932,17104992],"length":1,"stats":{"Line":6}},{"line":391,"address":[17110976,17104645,17104575,17110986],"length":1,"stats":{"Line":4}},{"line":392,"address":[11899553,11900048,11899872,11902889,11899765,11899510,11899800,11899436,11902790,11899584],"length":1,"stats":{"Line":5}},{"line":395,"address":[11900115,11900166],"length":1,"stats":{"Line":2}},{"line":396,"address":[11900132,11902616],"length":1,"stats":{"Line":0}},{"line":402,"address":[11900212],"length":1,"stats":{"Line":1}},{"line":405,"address":[11900306],"length":1,"stats":{"Line":1}},{"line":406,"address":[11900383,11900480,11902614,11900580],"length":1,"stats":{"Line":2}},{"line":408,"address":[17111008,17105612,17111034],"length":1,"stats":{"Line":0}},{"line":410,"address":[17105893,17106222,17105760,17106112,17106175,17106291],"length":1,"stats":{"Line":6}},{"line":412,"address":[17105865,17111200,17105935,17111225],"length":1,"stats":{"Line":2}},{"line":413,"address":[17105943,17106012],"length":1,"stats":{"Line":2}},{"line":419,"address":[17106877,17106762],"length":1,"stats":{"Line":0}},{"line":421,"address":[17106584,17106822],"length":1,"stats":{"Line":0}},{"line":425,"address":[17111686,17111632,17111660],"length":1,"stats":{"Line":0}},{"line":426,"address":[11906770],"length":1,"stats":{"Line":0}},{"line":428,"address":[11906794],"length":1,"stats":{"Line":0}},{"line":436,"address":[11903499,11903105,11902414,11902078,11902358,11903179,11903302],"length":1,"stats":{"Line":0}},{"line":437,"address":[17107184],"length":1,"stats":{"Line":0}},{"line":438,"address":[14307572],"length":1,"stats":{"Line":0}},{"line":439,"address":[11906357,11906336,11903270],"length":1,"stats":{"Line":0}},{"line":444,"address":[11903702,11903435,11903339,11903776,11905064,11903899],"length":1,"stats":{"Line":0}},{"line":445,"address":[17108432,17108392,17108490,17102101,17108702],"length":1,"stats":{"Line":0}},{"line":446,"address":[11906528,11903867,11906549],"length":1,"stats":{"Line":0}},{"line":448,"address":[17108880,17108979],"length":1,"stats":{"Line":0}},{"line":453,"address":[11903998],"length":1,"stats":{"Line":0}},{"line":457,"address":[11908427,11907722,11906816,11907076,11914509,11906878],"length":1,"stats":{"Line":4}},{"line":458,"address":[17111940,17112170,17112201],"length":1,"stats":{"Line":3}},{"line":465,"address":[8698194],"length":1,"stats":{"Line":2}},{"line":466,"address":[17113251,17112875,17112954],"length":1,"stats":{"Line":2}},{"line":468,"address":[17112039,17113281,17113143],"length":1,"stats":{"Line":1}},{"line":469,"address":[11908759,11909206,11908672],"length":1,"stats":{"Line":2}},{"line":475,"address":[11912919,11909077,11909139,11908964,11909483,11909409,11909583],"length":1,"stats":{"Line":5}},{"line":476,"address":[11909045],"length":1,"stats":{"Line":1}},{"line":477,"address":[14306782],"length":1,"stats":{"Line":4}},{"line":478,"address":[17119338,17114323,17119312],"length":1,"stats":{"Line":0}},{"line":480,"address":[11910241,11909820,11910059,11909699,11910110,11910181],"length":1,"stats":{"Line":6}},{"line":482,"address":[17114646,17119514,17119504,17114576],"length":1,"stats":{"Line":4}},{"line":483,"address":[17115130,17117474,17114862,17117557,17114685,17114654,17114961,17114901,17114541,17114611],"length":1,"stats":{"Line":5}},{"line":486,"address":[17115181],"length":1,"stats":{"Line":1}},{"line":487,"address":[17115198,17115254],"length":1,"stats":{"Line":2}},{"line":494,"address":[17115229],"length":1,"stats":{"Line":1}},{"line":495,"address":[17115608,17115532,17117464,17115424],"length":1,"stats":{"Line":2}},{"line":497,"address":[17119562,17115576,17119536],"length":1,"stats":{"Line":0}},{"line":499,"address":[11911125,11911555,11911364,11911415,11911004,11911486],"length":1,"stats":{"Line":6}},{"line":501,"address":[17119753,17115899,17115829,17119728],"length":1,"stats":{"Line":2}},{"line":502,"address":[17115907,17115976],"length":1,"stats":{"Line":2}},{"line":508,"address":[17116829,17116726],"length":1,"stats":{"Line":0}},{"line":510,"address":[17116786,17116548],"length":1,"stats":{"Line":0}},{"line":514,"address":[17120160,17120188,17120214],"length":1,"stats":{"Line":0}},{"line":515,"address":[17120210],"length":1,"stats":{"Line":0}},{"line":517,"address":[17120234],"length":1,"stats":{"Line":0}},{"line":525,"address":[17117280,17118100,17117058,17117250,17117922,17117733,17117819],"length":1,"stats":{"Line":0}},{"line":526,"address":[17117133],"length":1,"stats":{"Line":0}},{"line":527,"address":[17117781,17117313,17112081,17117569,17117273],"length":1,"stats":{"Line":0}},{"line":528,"address":[11915216,11913258,11915237],"length":1,"stats":{"Line":0}},{"line":531,"address":[17118484,17118381,17119213,17118040,17117959,17118295],"length":1,"stats":{"Line":0}},{"line":532,"address":[11913453,11913735,11913393,11907190,11913515],"length":1,"stats":{"Line":0}},{"line":533,"address":[17119994,17119968,17118452],"length":1,"stats":{"Line":0}},{"line":535,"address":[17118620,17118521],"length":1,"stats":{"Line":0}},{"line":540,"address":[11913983],"length":1,"stats":{"Line":0}},{"line":545,"address":[11915817,11915726,11915696,11915795,11916372],"length":1,"stats":{"Line":0}},{"line":546,"address":[17120424,17120464,17120319],"length":1,"stats":{"Line":0}},{"line":548,"address":[17120736],"length":1,"stats":{"Line":0}},{"line":549,"address":[17120430],"length":1,"stats":{"Line":0}},{"line":553,"address":[17120661],"length":1,"stats":{"Line":0}},{"line":558,"address":[17121006,17121632,17121526,17120976,17121122],"length":1,"stats":{"Line":0}},{"line":559,"address":[17121225,17121080,17121185],"length":1,"stats":{"Line":0}},{"line":561,"address":[17121482,17121191],"length":1,"stats":{"Line":0}}],"covered":152,"coverable":225},{"path":["/","home","patrick","Workspaces","podpico","src-tauri","src","config.rs"],"content":"// Configuration management module for PodPico\n// Handles loading and saving application configuration\n\nuse crate::commands::AppConfig;\nuse crate::error::PodPicoError;\nuse std::path::PathBuf;\nuse tokio::fs;\n\npub struct ConfigManager {\n    config_path: PathBuf,\n}\n\nimpl ConfigManager {\n    pub fn new(config_path: \u0026str) -\u003e Self {\n        Self {\n            config_path: PathBuf::from(config_path),\n        }\n    }\n\n    pub async fn load_config(\u0026self) -\u003e Result\u003cAppConfig, PodPicoError\u003e {\n        log::info!(\"Loading configuration from: {:?}\", self.config_path);\n        // TODO: Load configuration from file or return defaults\n        Ok(AppConfig {\n            download_directory: \"./episodes\".to_string(),\n            max_concurrent_downloads: 3,\n            auto_download_new_episodes: false,\n            check_for_updates_interval: 3600,\n            default_episode_status: \"new\".to_string(),\n        })\n    }\n\n    pub async fn save_config(\u0026self, _config: \u0026AppConfig) -\u003e Result\u003c(), PodPicoError\u003e {\n        log::info!(\"Saving configuration to: {:?}\", self.config_path);\n        // TODO: Save configuration to file\n        Err(PodPicoError::Generic(\"Not implemented yet\".to_string()))\n    }\n\n    pub async fn initialize(\u0026self) -\u003e Result\u003c(), PodPicoError\u003e {\n        log::info!(\"Initializing configuration manager\");\n        // TODO: Create config directory if it doesn't exist\n        if let Some(parent) = self.config_path.parent() {\n            fs::create_dir_all(parent).await?;\n        }\n        Ok(())\n    }\n}\n","traces":[{"line":13,"address":[79620895],"length":1,"stats":{"Line":0}},{"line":14,"address":[9185312],"length":1,"stats":{"Line":0}},{"line":16,"address":[9185335],"length":1,"stats":{"Line":0}},{"line":20,"address":[8332912,8332942,8333033,8333055,8333660],"length":1,"stats":{"Line":0}},{"line":21,"address":[8332997,8333103,8333143],"length":1,"stats":{"Line":0}},{"line":23,"address":[8333463],"length":1,"stats":{"Line":0}},{"line":24,"address":[79619425,79619394,79619498],"length":1,"stats":{"Line":0}},{"line":25,"address":[79619421],"length":1,"stats":{"Line":0}},{"line":27,"address":[79619494],"length":1,"stats":{"Line":0}},{"line":28,"address":[8333388],"length":1,"stats":{"Line":0}},{"line":32,"address":[8333834,8334326,8333696,8333726,8333856],"length":1,"stats":{"Line":0}},{"line":33,"address":[8333798,8333904,8333944],"length":1,"stats":{"Line":0}},{"line":35,"address":[79619573],"length":1,"stats":{"Line":0}},{"line":38,"address":[8334393,8334352,8334518,8334558,8335090,8335475],"length":1,"stats":{"Line":0}},{"line":39,"address":[8334640,8334476,8334609],"length":1,"stats":{"Line":0}},{"line":41,"address":[8334620,8334865,8335417],"length":1,"stats":{"Line":0}},{"line":42,"address":[8335473,8334545,8334983,8335029,8335116],"length":1,"stats":{"Line":0}},{"line":44,"address":[8334990],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":18},{"path":["/","home","patrick","Workspaces","podpico","src-tauri","src","database.rs"],"content":"// Database management module for PodPico\n// Handles SQLite database operations for podcasts, episodes, and related data\n// User Stories #1-11: Podcast and Episode Management\n\nuse crate::commands::{Episode, Podcast};\nuse crate::error::PodPicoError;\nuse sqlx::{Row, SqlitePool};\n\npub struct DatabaseManager {\n    pool: SqlitePool,\n}\n\nimpl DatabaseManager {\n    pub async fn new(database_url: \u0026str) -\u003e Result\u003cSelf, PodPicoError\u003e {\n        let pool = SqlitePool::connect(database_url).await?;\n        Ok(Self { pool })\n    }\n\n    pub fn clone_manager(\u0026self) -\u003e Self {\n        Self {\n            pool: self.pool.clone(),\n        }\n    }\n\n    pub async fn initialize(\u0026self) -\u003e Result\u003c(), PodPicoError\u003e {\n        log::info!(\"Creating database tables for podcast management user stories\");\n\n        // User Story #1: Add podcast subscription\n        // User Story #4: Remove podcast subscription\n        sqlx::query(\n            r#\"\n            CREATE TABLE IF NOT EXISTS podcasts (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                name TEXT NOT NULL,\n                rss_url TEXT UNIQUE NOT NULL,\n                description TEXT,\n                artwork_url TEXT,\n                website_url TEXT,\n                last_updated DATETIME,\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n                updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n            )\n        \"#,\n        )\n        .execute(\u0026self.pool)\n        .await?;\n\n        // User Story #2: View episodes of specific podcast\n        // User Story #3: Download episodes\n        // User Story #5: Mark episodes as listened\n        sqlx::query(\n            r#\"\n            CREATE TABLE IF NOT EXISTS episodes (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                podcast_id INTEGER NOT NULL,\n                title TEXT NOT NULL,\n                description TEXT,\n                episode_url TEXT NOT NULL,\n                published_date DATETIME,\n                duration INTEGER,\n                file_size INTEGER,\n                local_file_path TEXT,\n                status TEXT CHECK(status IN ('new', 'unlistened', 'listened')) DEFAULT 'new',\n                downloaded BOOLEAN DEFAULT FALSE,\n                on_device BOOLEAN DEFAULT FALSE,\n                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n                updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n                FOREIGN KEY (podcast_id) REFERENCES podcasts (id) ON DELETE CASCADE\n            )\n        \"#,\n        )\n        .execute(\u0026self.pool)\n        .await?;\n\n        // User Story #8-11: USB device integration\n        sqlx::query(\n            r#\"\n            CREATE TABLE IF NOT EXISTS usb_devices (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                device_name TEXT NOT NULL,\n                device_path TEXT NOT NULL,\n                last_connected DATETIME DEFAULT CURRENT_TIMESTAMP\n            )\n        \"#,\n        )\n        .execute(\u0026self.pool)\n        .await?;\n\n        // User Story #9-11: Track episode transfers to USB devices\n        sqlx::query(\n            r#\"\n            CREATE TABLE IF NOT EXISTS episode_transfers (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                episode_id INTEGER NOT NULL,\n                device_id INTEGER NOT NULL,\n                transferred_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n                file_path_on_device TEXT,\n                FOREIGN KEY (episode_id) REFERENCES episodes (id) ON DELETE CASCADE,\n                FOREIGN KEY (device_id) REFERENCES usb_devices (id) ON DELETE CASCADE,\n                UNIQUE(episode_id, device_id)\n            )\n        \"#,\n        )\n        .execute(\u0026self.pool)\n        .await?;\n\n        log::info!(\"Database tables created successfully\");\n        Ok(())\n    }\n\n    pub async fn add_podcast(\n        \u0026self,\n        name: \u0026str,\n        rss_url: \u0026str,\n        description: Option\u003c\u0026str\u003e,\n        artwork_url: Option\u003c\u0026str\u003e,\n        website_url: Option\u003c\u0026str\u003e,\n    ) -\u003e Result\u003cPodcast, PodPicoError\u003e {\n        log::info!(\"Adding podcast to database: {} (User Story #1)\", rss_url);\n\n        let result = sqlx::query(r#\"\n            INSERT INTO podcasts (name, rss_url, description, artwork_url, website_url, last_updated)\n            VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP)\n        \"#)\n        .bind(name)\n        .bind(rss_url)\n        .bind(description)\n        .bind(artwork_url)\n        .bind(website_url)\n        .execute(\u0026self.pool)\n        .await?;\n\n        let podcast_id = result.last_insert_rowid();\n\n        // Return the created podcast\n        self.get_podcast_by_id(podcast_id).await\n    }\n\n    pub async fn get_podcast_by_id(\u0026self, podcast_id: i64) -\u003e Result\u003cPodcast, PodPicoError\u003e {\n        let row = sqlx::query(r#\"\n            SELECT p.id, p.name, p.rss_url, p.description, p.artwork_url, p.website_url, p.last_updated,\n                   COUNT(e.id) as episode_count,\n                   COUNT(CASE WHEN e.status = 'new' THEN 1 END) as new_episode_count\n            FROM podcasts p\n            LEFT JOIN episodes e ON p.id = e.podcast_id\n            WHERE p.id = ?\n            GROUP BY p.id\n        \"#)\n        .bind(podcast_id)\n        .fetch_one(\u0026self.pool)\n        .await?;\n\n        Ok(Podcast {\n            id: row.get(\"id\"),\n            name: row.get(\"name\"),\n            rss_url: row.get(\"rss_url\"),\n            description: row.get(\"description\"),\n            artwork_url: row.get(\"artwork_url\"),\n            website_url: row.get(\"website_url\"),\n            last_updated: row.get(\"last_updated\"),\n            episode_count: row.get(\"episode_count\"),\n            new_episode_count: row.get(\"new_episode_count\"),\n        })\n    }\n\n    pub async fn get_podcasts(\u0026self) -\u003e Result\u003cVec\u003cPodcast\u003e, PodPicoError\u003e {\n        log::info!(\"Retrieving podcasts from database (User Story #2, #7)\");\n\n        let rows = sqlx::query(r#\"\n            SELECT p.id, p.name, p.rss_url, p.description, p.artwork_url, p.website_url, p.last_updated,\n                   COUNT(e.id) as episode_count,\n                   COUNT(CASE WHEN e.status = 'new' THEN 1 END) as new_episode_count\n            FROM podcasts p\n            LEFT JOIN episodes e ON p.id = e.podcast_id\n            GROUP BY p.id\n            ORDER BY p.name\n        \"#)\n        .fetch_all(\u0026self.pool)\n        .await?;\n\n        let podcasts = rows\n            .into_iter()\n            .map(|row| Podcast {\n                id: row.get(\"id\"),\n                name: row.get(\"name\"),\n                rss_url: row.get(\"rss_url\"),\n                description: row.get(\"description\"),\n                artwork_url: row.get(\"artwork_url\"),\n                website_url: row.get(\"website_url\"),\n                last_updated: row.get(\"last_updated\"),\n                episode_count: row.get(\"episode_count\"),\n                new_episode_count: row.get(\"new_episode_count\"),\n            })\n            .collect();\n\n        Ok(podcasts)\n    }\n\n    pub async fn remove_podcast(\u0026self, podcast_id: i64) -\u003e Result\u003c(), PodPicoError\u003e {\n        log::info!(\n            \"Removing podcast from database: {} (User Story #4)\",\n            podcast_id\n        );\n\n        sqlx::query(\"DELETE FROM podcasts WHERE id = ?\")\n            .bind(podcast_id)\n            .execute(\u0026self.pool)\n            .await?;\n\n        Ok(())\n    }\n\n    pub async fn get_episodes(\n        \u0026self,\n        podcast_id: Option\u003ci64\u003e,\n    ) -\u003e Result\u003cVec\u003cEpisode\u003e, PodPicoError\u003e {\n        log::info!(\n            \"Retrieving episodes from database for podcast: {:?} (User Story #2, #7)\",\n            podcast_id\n        );\n\n        let rows = if let Some(podcast_id) = podcast_id {\n            // User Story #2: Get episodes for specific podcast\n            sqlx::query(\n                r#\"\n                SELECT e.id, e.podcast_id, p.name as podcast_name, e.title, e.description, \n                       e.episode_url, e.published_date, e.duration, e.file_size, \n                       e.local_file_path, e.status, e.downloaded, e.on_device\n                FROM episodes e\n                JOIN podcasts p ON e.podcast_id = p.id\n                WHERE e.podcast_id = ?\n                ORDER BY e.published_date DESC\n            \"#,\n            )\n            .bind(podcast_id)\n            .fetch_all(\u0026self.pool)\n            .await?\n        } else {\n            // User Story #7: Get all new episodes across all podcasts (Combined Inbox)\n            sqlx::query(\n                r#\"\n                SELECT e.id, e.podcast_id, p.name as podcast_name, e.title, e.description, \n                       e.episode_url, e.published_date, e.duration, e.file_size, \n                       e.local_file_path, e.status, e.downloaded, e.on_device\n                FROM episodes e\n                JOIN podcasts p ON e.podcast_id = p.id\n                WHERE e.status = 'new'\n                ORDER BY e.published_date DESC\n            \"#,\n            )\n            .fetch_all(\u0026self.pool)\n            .await?\n        };\n\n        let episodes = rows\n            .into_iter()\n            .map(|row| Episode {\n                id: row.get(\"id\"),\n                podcast_id: row.get(\"podcast_id\"),\n                podcast_name: row.get(\"podcast_name\"),\n                title: row.get(\"title\"),\n                description: row.get(\"description\"),\n                episode_url: row.get(\"episode_url\"),\n                published_date: row.get(\"published_date\"),\n                duration: row.get(\"duration\"),\n                file_size: row.get(\"file_size\"),\n                local_file_path: row.get(\"local_file_path\"),\n                status: row.get(\"status\"),\n                downloaded: row.get(\"downloaded\"),\n                on_device: row.get(\"on_device\"),\n            })\n            .collect();\n\n        Ok(episodes)\n    }\n\n    pub async fn update_episode_status(\n        \u0026self,\n        episode_id: i64,\n        status: \u0026str,\n    ) -\u003e Result\u003c(), PodPicoError\u003e {\n        log::info!(\n            \"Updating episode {} status to: {} (User Story #5, #6)\",\n            episode_id,\n            status\n        );\n\n        sqlx::query(\n            r#\"\n            UPDATE episodes \n            SET status = ?, updated_at = CURRENT_TIMESTAMP \n            WHERE id = ?\n        \"#,\n        )\n        .bind(status)\n        .bind(episode_id)\n        .execute(\u0026self.pool)\n        .await?;\n\n        Ok(())\n    }\n\n    pub async fn update_episode_downloaded_status(\n        \u0026self,\n        episode_id: i64,\n        downloaded: bool,\n        local_file_path: Option\u003c\u0026str\u003e,\n    ) -\u003e Result\u003c(), PodPicoError\u003e {\n        log::info!(\n            \"Updating episode {} downloaded status to: {} (User Story #3)\",\n            episode_id,\n            downloaded\n        );\n\n        sqlx::query(\n            r#\"\n            UPDATE episodes \n            SET downloaded = ?, local_file_path = ?, updated_at = CURRENT_TIMESTAMP \n            WHERE id = ?\n        \"#,\n        )\n        .bind(downloaded)\n        .bind(local_file_path)\n        .bind(episode_id)\n        .execute(\u0026self.pool)\n        .await?;\n\n        Ok(())\n    }\n\n    pub async fn update_episode_on_device_status(\n        \u0026self,\n        episode_id: i64,\n        on_device: bool,\n    ) -\u003e Result\u003c(), PodPicoError\u003e {\n        log::info!(\n            \"Updating episode {} on_device status to: {} (User Story #9)\",\n            episode_id,\n            on_device\n        );\n\n        sqlx::query(\n            r#\"\n            UPDATE episodes \n            SET on_device = ?, updated_at = CURRENT_TIMESTAMP \n            WHERE id = ?\n        \"#,\n        )\n        .bind(on_device)\n        .bind(episode_id)\n        .execute(\u0026self.pool)\n        .await?;\n\n        Ok(())\n    }\n\n    #[allow(clippy::too_many_arguments)]\n    pub async fn add_episode(\n        \u0026self,\n        podcast_id: i64,\n        title: \u0026str,\n        description: Option\u003c\u0026str\u003e,\n        episode_url: \u0026str,\n        published_date: Option\u003c\u0026str\u003e,\n        duration: Option\u003ci32\u003e,\n        file_size: Option\u003ci64\u003e,\n    ) -\u003e Result\u003ci64, PodPicoError\u003e {\n        log::info!(\n            \"Adding episode to database for podcast {}: {}\",\n            podcast_id,\n            title\n        );\n\n        let result = sqlx::query(r#\"\n            INSERT INTO episodes (podcast_id, title, description, episode_url, published_date, duration, file_size)\n            VALUES (?, ?, ?, ?, ?, ?, ?)\n        \"#)\n        .bind(podcast_id)\n        .bind(title)\n        .bind(description)\n        .bind(episode_url)\n        .bind(published_date)\n        .bind(duration)\n        .bind(file_size)\n        .execute(\u0026self.pool)\n        .await?;\n\n        Ok(result.last_insert_rowid())\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    async fn create_test_db() -\u003e DatabaseManager {\n        // Use in-memory SQLite database for testing\n        let db_url = \"sqlite::memory:\";\n\n        let db = DatabaseManager::new(db_url).await.unwrap();\n        db.initialize().await.unwrap();\n        db\n    }\n\n    #[tokio::test]\n    async fn test_database_initialization() {\n        // Test that database tables are created correctly\n        let db = create_test_db().await;\n\n        // Verify tables exist by attempting basic operations\n        let podcasts = db.get_podcasts().await.unwrap();\n        assert_eq!(podcasts.len(), 0);\n    }\n\n    #[tokio::test]\n    async fn test_user_story_1_add_podcast() {\n        // User Story #1: Add new podcast subscription via RSS URL\n        let db = create_test_db().await;\n\n        let podcast = db\n            .add_podcast(\n                \"Test Podcast\",\n                \"https://example.com/feed.xml\",\n                Some(\"A test podcast\"),\n                Some(\"https://example.com/art.jpg\"),\n                Some(\"https://example.com\"),\n            )\n            .await\n            .unwrap();\n\n        assert_eq!(podcast.name, \"Test Podcast\");\n        assert_eq!(podcast.rss_url, \"https://example.com/feed.xml\");\n        assert_eq!(podcast.description, Some(\"A test podcast\".to_string()));\n        assert_eq!(\n            podcast.artwork_url,\n            Some(\"https://example.com/art.jpg\".to_string())\n        );\n        assert_eq!(podcast.website_url, Some(\"https://example.com\".to_string()));\n        assert_eq!(podcast.episode_count, 0);\n        assert_eq!(podcast.new_episode_count, 0);\n        assert!(podcast.id \u003e 0);\n    }\n\n    #[tokio::test]\n    async fn test_add_podcast_duplicate_url() {\n        // Test that duplicate RSS URLs are rejected\n        let db = create_test_db().await;\n\n        // Add first podcast\n        db.add_podcast(\n            \"Test Podcast 1\",\n            \"https://example.com/feed.xml\",\n            None,\n            None,\n            None,\n        )\n        .await\n        .unwrap();\n\n        // Try to add duplicate URL\n        let result = db\n            .add_podcast(\n                \"Test Podcast 2\",\n                \"https://example.com/feed.xml\",\n                None,\n                None,\n                None,\n            )\n            .await;\n\n        assert!(result.is_err());\n    }\n\n    #[tokio::test]\n    async fn test_get_podcasts() {\n        // User Story #2, #7: Get all podcasts with episode counts\n        let db = create_test_db().await;\n\n        // Add multiple podcasts\n        let _podcast1 = db\n            .add_podcast(\n                \"Podcast 1\",\n                \"https://example1.com/feed.xml\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n        let _podcast2 = db\n            .add_podcast(\n                \"Podcast 2\",\n                \"https://example2.com/feed.xml\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n\n        let podcasts = db.get_podcasts().await.unwrap();\n        assert_eq!(podcasts.len(), 2);\n\n        // Should be sorted by name\n        assert_eq!(podcasts[0].name, \"Podcast 1\");\n        assert_eq!(podcasts[1].name, \"Podcast 2\");\n    }\n\n    #[tokio::test]\n    async fn test_user_story_4_remove_podcast() {\n        // User Story #4: Remove podcast subscriptions\n        let db = create_test_db().await;\n\n        let podcast = db\n            .add_podcast(\n                \"Test Podcast\",\n                \"https://example.com/feed.xml\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n\n        // Add an episode to test cascade deletion\n        let _episode_id = db\n            .add_episode(\n                podcast.id,\n                \"Test Episode\",\n                Some(\"Description\"),\n                \"https://example.com/episode.mp3\",\n                Some(\"2023-01-01T00:00:00Z\"),\n                Some(1800),\n                Some(25000000),\n            )\n            .await\n            .unwrap();\n\n        // Remove podcast\n        db.remove_podcast(podcast.id).await.unwrap();\n\n        // Verify podcast is removed\n        let podcasts = db.get_podcasts().await.unwrap();\n        assert_eq!(podcasts.len(), 0);\n\n        // Verify episodes are cascade deleted\n        let episodes = db.get_episodes(Some(podcast.id)).await.unwrap();\n        assert_eq!(episodes.len(), 0);\n    }\n\n    #[tokio::test]\n    async fn test_remove_nonexistent_podcast() {\n        let db = create_test_db().await;\n\n        // Removing non-existent podcast should not error (returns 0 affected rows)\n        let result = db.remove_podcast(999).await;\n        assert!(result.is_ok());\n    }\n\n    #[tokio::test]\n    async fn test_add_episode() {\n        let db = create_test_db().await;\n\n        let podcast = db\n            .add_podcast(\n                \"Test Podcast\",\n                \"https://example.com/feed.xml\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n\n        let episode_id = db\n            .add_episode(\n                podcast.id,\n                \"Test Episode\",\n                Some(\"Episode description\"),\n                \"https://example.com/episode.mp3\",\n                Some(\"2023-01-01T00:00:00Z\"),\n                Some(1800),     // 30 minutes\n                Some(25000000), // ~25MB\n            )\n            .await\n            .unwrap();\n\n        assert!(episode_id \u003e 0);\n\n        // Verify episode was added\n        let episodes = db.get_episodes(Some(podcast.id)).await.unwrap();\n        assert_eq!(episodes.len(), 1);\n\n        let episode = \u0026episodes[0];\n        assert_eq!(episode.title, \"Test Episode\");\n        assert_eq!(episode.description, Some(\"Episode description\".to_string()));\n        assert_eq!(episode.episode_url, \"https://example.com/episode.mp3\");\n        assert_eq!(episode.duration, Some(1800));\n        assert_eq!(episode.file_size, Some(25000000));\n        assert_eq!(episode.status, \"new\");\n        assert!(!episode.downloaded);\n        assert!(!episode.on_device);\n    }\n\n    #[tokio::test]\n    async fn test_user_story_2_get_episodes_by_podcast() {\n        // User Story #2: View all episodes of specific podcast\n        let db = create_test_db().await;\n\n        let podcast1 = db\n            .add_podcast(\n                \"Podcast 1\",\n                \"https://example1.com/feed.xml\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n        let podcast2 = db\n            .add_podcast(\n                \"Podcast 2\",\n                \"https://example2.com/feed.xml\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n\n        // Add episodes to podcast 1\n        db.add_episode(\n            podcast1.id,\n            \"Episode 1-1\",\n            None,\n            \"https://example.com/ep1.mp3\",\n            Some(\"2023-01-01T00:00:00Z\"),\n            None,\n            None,\n        )\n        .await\n        .unwrap();\n        db.add_episode(\n            podcast1.id,\n            \"Episode 1-2\",\n            None,\n            \"https://example.com/ep2.mp3\",\n            Some(\"2023-01-02T00:00:00Z\"),\n            None,\n            None,\n        )\n        .await\n        .unwrap();\n\n        // Add episode to podcast 2\n        db.add_episode(\n            podcast2.id,\n            \"Episode 2-1\",\n            None,\n            \"https://example.com/ep3.mp3\",\n            Some(\"2023-01-03T00:00:00Z\"),\n            None,\n            None,\n        )\n        .await\n        .unwrap();\n\n        // Get episodes for podcast 1 only\n        let episodes = db.get_episodes(Some(podcast1.id)).await.unwrap();\n        assert_eq!(episodes.len(), 2);\n\n        // Should be ordered by published date DESC\n        assert_eq!(episodes[0].title, \"Episode 1-2\");\n        assert_eq!(episodes[1].title, \"Episode 1-1\");\n\n        // All episodes should be from podcast 1\n        for episode in \u0026episodes {\n            assert_eq!(episode.podcast_id, podcast1.id);\n            assert_eq!(episode.podcast_name, \"Podcast 1\");\n        }\n    }\n\n    #[tokio::test]\n    async fn test_user_story_7_get_all_new_episodes() {\n        // User Story #7: View all new episodes across podcasts (Combined Inbox)\n        let db = create_test_db().await;\n\n        let podcast1 = db\n            .add_podcast(\n                \"Podcast 1\",\n                \"https://example1.com/feed.xml\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n        let podcast2 = db\n            .add_podcast(\n                \"Podcast 2\",\n                \"https://example2.com/feed.xml\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n\n        // Add episodes with different statuses\n        db.add_episode(\n            podcast1.id,\n            \"New Episode 1\",\n            None,\n            \"https://example.com/ep1.mp3\",\n            Some(\"2023-01-03T00:00:00Z\"),\n            None,\n            None,\n        )\n        .await\n        .unwrap();\n        let _episode2_id = db\n            .add_episode(\n                podcast2.id,\n                \"New Episode 2\",\n                None,\n                \"https://example.com/ep2.mp3\",\n                Some(\"2023-01-02T00:00:00Z\"),\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n        let episode3_id = db\n            .add_episode(\n                podcast1.id,\n                \"Old Episode\",\n                None,\n                \"https://example.com/ep3.mp3\",\n                Some(\"2023-01-01T00:00:00Z\"),\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n\n        // Mark one episode as listened\n        db.update_episode_status(episode3_id, \"listened\")\n            .await\n            .unwrap();\n\n        // Get all new episodes (no podcast filter)\n        let new_episodes = db.get_episodes(None).await.unwrap();\n        assert_eq!(new_episodes.len(), 2); // Only episodes with \"new\" status\n\n        // Should be ordered by published date DESC\n        assert_eq!(new_episodes[0].title, \"New Episode 1\");\n        assert_eq!(new_episodes[1].title, \"New Episode 2\");\n\n        // Episodes should have correct podcast names\n        assert_eq!(new_episodes[0].podcast_name, \"Podcast 1\");\n        assert_eq!(new_episodes[1].podcast_name, \"Podcast 2\");\n\n        // All should have \"new\" status\n        for episode in \u0026new_episodes {\n            assert_eq!(episode.status, \"new\");\n        }\n    }\n\n    #[tokio::test]\n    async fn test_user_story_5_update_episode_status() {\n        // User Story #5: Mark episodes as \"listened\"\n        let db = create_test_db().await;\n\n        let podcast = db\n            .add_podcast(\n                \"Test Podcast\",\n                \"https://example.com/feed.xml\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n        let episode_id = db\n            .add_episode(\n                podcast.id,\n                \"Test Episode\",\n                None,\n                \"https://example.com/ep.mp3\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n\n        // Initially should be \"new\"\n        let episodes = db.get_episodes(Some(podcast.id)).await.unwrap();\n        assert_eq!(episodes[0].status, \"new\");\n\n        // Update to \"listened\"\n        db.update_episode_status(episode_id, \"listened\")\n            .await\n            .unwrap();\n\n        // Verify status changed\n        let episodes = db.get_episodes(Some(podcast.id)).await.unwrap();\n        assert_eq!(episodes[0].status, \"listened\");\n\n        // Update to \"unlistened\"\n        db.update_episode_status(episode_id, \"unlistened\")\n            .await\n            .unwrap();\n\n        // Verify status changed again\n        let episodes = db.get_episodes(Some(podcast.id)).await.unwrap();\n        assert_eq!(episodes[0].status, \"unlistened\");\n    }\n\n    #[tokio::test]\n    async fn test_update_episode_status_invalid() {\n        let db = create_test_db().await;\n\n        let podcast = db\n            .add_podcast(\n                \"Test Podcast\",\n                \"https://example.com/feed.xml\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n        let episode_id = db\n            .add_episode(\n                podcast.id,\n                \"Test Episode\",\n                None,\n                \"https://example.com/ep.mp3\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n\n        // Try to set invalid status (should be rejected by CHECK constraint)\n        let result = db.update_episode_status(episode_id, \"invalid_status\").await;\n        assert!(result.is_err());\n\n        // Status should remain unchanged\n        let episodes = db.get_episodes(Some(podcast.id)).await.unwrap();\n        assert_eq!(episodes[0].status, \"new\");\n    }\n\n    #[tokio::test]\n    async fn test_update_nonexistent_episode_status() {\n        let db = create_test_db().await;\n\n        // Try to update non-existent episode\n        let result = db.update_episode_status(999, \"listened\").await;\n        assert!(result.is_ok()); // SQLx returns Ok even if no rows affected\n    }\n\n    #[tokio::test]\n    async fn test_podcast_episode_counts() {\n        // Test that episode counts are calculated correctly\n        let db = create_test_db().await;\n\n        let podcast = db\n            .add_podcast(\n                \"Test Podcast\",\n                \"https://example.com/feed.xml\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n\n        // Add episodes with different statuses\n        let _ep1_id = db\n            .add_episode(\n                podcast.id,\n                \"Episode 1\",\n                None,\n                \"https://example.com/ep1.mp3\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n        let ep2_id = db\n            .add_episode(\n                podcast.id,\n                \"Episode 2\",\n                None,\n                \"https://example.com/ep2.mp3\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n        let ep3_id = db\n            .add_episode(\n                podcast.id,\n                \"Episode 3\",\n                None,\n                \"https://example.com/ep3.mp3\",\n                None,\n                None,\n                None,\n            )\n            .await\n            .unwrap();\n\n        // Mark one as listened\n        db.update_episode_status(ep2_id, \"listened\").await.unwrap();\n\n        // Get podcast with updated counts\n        let podcast = db.get_podcast_by_id(podcast.id).await.unwrap();\n        assert_eq!(podcast.episode_count, 3);\n        assert_eq!(podcast.new_episode_count, 2); // ep1 and ep3 are still \"new\"\n\n        // Mark another as unlistened\n        db.update_episode_status(ep3_id, \"unlistened\")\n            .await\n            .unwrap();\n\n        let podcast = db.get_podcast_by_id(podcast.id).await.unwrap();\n        assert_eq!(podcast.episode_count, 3);\n        assert_eq!(podcast.new_episode_count, 1); // only ep1 is \"new\"\n    }\n\n    #[tokio::test]\n    async fn test_get_podcast_by_id_not_found() {\n        let db = create_test_db().await;\n\n        let result = db.get_podcast_by_id(999).await;\n        assert!(result.is_err());\n    }\n\n    #[tokio::test]\n    async fn test_add_episode_invalid_podcast() {\n        let db = create_test_db().await;\n\n        // Try to add episode to non-existent podcast\n        let result = db\n            .add_episode(\n                999,\n                \"Test Episode\",\n                None,\n                \"https://example.com/ep.mp3\",\n                None,\n                None,\n                None,\n            )\n            .await;\n\n        assert!(result.is_err()); // Should fail due to foreign key constraint\n    }\n}\n","traces":[{"line":14,"address":[14959234,14959330,14959367,14959478,14959928,14959184],"length":1,"stats":{"Line":4}},{"line":15,"address":[14302295],"length":1,"stats":{"Line":3}},{"line":16,"address":[14959852],"length":1,"stats":{"Line":1}},{"line":19,"address":[14614048],"length":1,"stats":{"Line":1}},{"line":21,"address":[14614053],"length":1,"stats":{"Line":1}},{"line":25,"address":[14614072,14614064],"length":1,"stats":{"Line":4}},{"line":26,"address":[14960272,14960042,14960232],"length":1,"stats":{"Line":3}},{"line":45,"address":[14960487],"length":1,"stats":{"Line":1}},{"line":46,"address":[16333822,16334141,16334228,16333410,16333933,16333879],"length":1,"stats":{"Line":4}},{"line":72,"address":[14961052],"length":1,"stats":{"Line":1}},{"line":73,"address":[14960132,14961140,14961503,14961420,14961103,14961220],"length":1,"stats":{"Line":4}},{"line":86,"address":[16334999],"length":1,"stats":{"Line":1}},{"line":87,"address":[8210053],"length":1,"stats":{"Line":4}},{"line":104,"address":[14962191],"length":1,"stats":{"Line":1}},{"line":105,"address":[13791692],"length":1,"stats":{"Line":4}},{"line":107,"address":[16336187,16336112],"length":1,"stats":{"Line":2}},{"line":108,"address":[14962756],"length":1,"stats":{"Line":1}},{"line":111,"address":[14614080],"length":1,"stats":{"Line":1}},{"line":119,"address":[14963533,14963493,14963330],"length":1,"stats":{"Line":3}},{"line":126,"address":[14963840],"length":1,"stats":{"Line":1}},{"line":130,"address":[14963988],"length":1,"stats":{"Line":1}},{"line":131,"address":[8210831],"length":1,"stats":{"Line":5}},{"line":133,"address":[14964550],"length":1,"stats":{"Line":1}},{"line":136,"address":[16338042,16336834,16338220],"length":1,"stats":{"Line":2}},{"line":139,"address":[14614256,14614269],"length":1,"stats":{"Line":4}},{"line":151,"address":[16338803,16339110,16338682,16338857,16339194,16338908],"length":1,"stats":{"Line":5}},{"line":153,"address":[14966484],"length":1,"stats":{"Line":1}},{"line":154,"address":[14965837],"length":1,"stats":{"Line":1}},{"line":155,"address":[14965914],"length":1,"stats":{"Line":1}},{"line":156,"address":[14965953],"length":1,"stats":{"Line":1}},{"line":157,"address":[14966036],"length":1,"stats":{"Line":1}},{"line":158,"address":[14966116],"length":1,"stats":{"Line":1}},{"line":159,"address":[14966196],"length":1,"stats":{"Line":1}},{"line":160,"address":[14966276],"length":1,"stats":{"Line":1}},{"line":161,"address":[14966356],"length":1,"stats":{"Line":1}},{"line":162,"address":[14966433],"length":1,"stats":{"Line":1}},{"line":166,"address":[16340486,16340526,16341727,16340336,16340371,16340956],"length":1,"stats":{"Line":4}},{"line":167,"address":[14967038,14967078,14966914],"length":1,"stats":{"Line":3}},{"line":179,"address":[14967434,14967627,14967354,14967388,14966977,14967703],"length":1,"stats":{"Line":4}},{"line":181,"address":[14967976,14967856],"length":1,"stats":{"Line":2}},{"line":183,"address":[16342444,16342675,16341744],"length":1,"stats":{"Line":2}},{"line":184,"address":[16341782],"length":1,"stats":{"Line":1}},{"line":185,"address":[14968275],"length":1,"stats":{"Line":1}},{"line":186,"address":[16341903],"length":1,"stats":{"Line":1}},{"line":187,"address":[16341984],"length":1,"stats":{"Line":1}},{"line":188,"address":[16342062],"length":1,"stats":{"Line":1}},{"line":189,"address":[16342140],"length":1,"stats":{"Line":1}},{"line":190,"address":[16342221],"length":1,"stats":{"Line":1}},{"line":191,"address":[16342305],"length":1,"stats":{"Line":1}},{"line":192,"address":[16342386],"length":1,"stats":{"Line":1}},{"line":196,"address":[16341586],"length":1,"stats":{"Line":1}},{"line":199,"address":[16342739,16342899,16342704,16343383,16342859,16343874],"length":1,"stats":{"Line":4}},{"line":200,"address":[14969371,14969331,14969207],"length":1,"stats":{"Line":3}},{"line":205,"address":[16343872,16343245,16343631,16343331,16342953,16343563,16343743],"length":1,"stats":{"Line":5}},{"line":206,"address":[14969620],"length":1,"stats":{"Line":1}},{"line":208,"address":[14969270,14969700,14969781,14969975,14969734,14970055],"length":1,"stats":{"Line":4}},{"line":210,"address":[14970165],"length":1,"stats":{"Line":1}},{"line":213,"address":[14614336],"length":1,"stats":{"Line":1}},{"line":217,"address":[14970367,14970509,14970539],"length":1,"stats":{"Line":3}},{"line":222,"address":[16344442,16344163,16345864],"length":1,"stats":{"Line":3}},{"line":237,"address":[8213359],"length":1,"stats":{"Line":4}},{"line":252,"address":[13795534],"length":1,"stats":{"Line":4}},{"line":255,"address":[14972165,14971586],"length":1,"stats":{"Line":2}},{"line":257,"address":[14972272,14973207,14973541],"length":1,"stats":{"Line":2}},{"line":258,"address":[14972311],"length":1,"stats":{"Line":1}},{"line":259,"address":[14972388],"length":1,"stats":{"Line":1}},{"line":260,"address":[16346160],"length":1,"stats":{"Line":1}},{"line":261,"address":[14972460],"length":1,"stats":{"Line":1}},{"line":262,"address":[14972537],"length":1,"stats":{"Line":1}},{"line":263,"address":[16346362],"length":1,"stats":{"Line":1}},{"line":264,"address":[16346446],"length":1,"stats":{"Line":1}},{"line":265,"address":[16346530],"length":1,"stats":{"Line":1}},{"line":266,"address":[16346630],"length":1,"stats":{"Line":1}},{"line":267,"address":[14972931],"length":1,"stats":{"Line":1}},{"line":268,"address":[14972970],"length":1,"stats":{"Line":1}},{"line":269,"address":[16346825],"length":1,"stats":{"Line":1}},{"line":270,"address":[16346905],"length":1,"stats":{"Line":1}},{"line":274,"address":[16345923],"length":1,"stats":{"Line":1}},{"line":277,"address":[13441376],"length":1,"stats":{"Line":1}},{"line":282,"address":[16347487,16347654,16347614],"length":1,"stats":{"Line":3}},{"line":295,"address":[16347947],"length":1,"stats":{"Line":1}},{"line":296,"address":[14974211],"length":1,"stats":{"Line":1}},{"line":298,"address":[13806279],"length":1,"stats":{"Line":5}},{"line":300,"address":[14974759],"length":1,"stats":{"Line":1}},{"line":303,"address":[14614432],"length":1,"stats":{"Line":1}},{"line":309,"address":[14975141,14975181,14975017],"length":1,"stats":{"Line":3}},{"line":322,"address":[16349272],"length":1,"stats":{"Line":1}},{"line":324,"address":[14975545],"length":1,"stats":{"Line":1}},{"line":326,"address":[14975706,14975900,14975659,14975625,14975980,14975080],"length":1,"stats":{"Line":4}},{"line":328,"address":[16349918],"length":1,"stats":{"Line":1}},{"line":331,"address":[14614496],"length":1,"stats":{"Line":1}},{"line":336,"address":[16350255,16350131,16350295],"length":1,"stats":{"Line":3}},{"line":349,"address":[14976764],"length":1,"stats":{"Line":1}},{"line":350,"address":[16350624],"length":1,"stats":{"Line":1}},{"line":352,"address":[13818436],"length":1,"stats":{"Line":4}},{"line":354,"address":[14977325],"length":1,"stats":{"Line":1}},{"line":358,"address":[13441536],"length":1,"stats":{"Line":1}},{"line":368,"address":[16351789,16351644,16351829],"length":1,"stats":{"Line":3}},{"line":378,"address":[14978290],"length":1,"stats":{"Line":1}},{"line":379,"address":[14978329],"length":1,"stats":{"Line":1}},{"line":386,"address":[13792295],"length":1,"stats":{"Line":5}},{"line":388,"address":[14979094],"length":1,"stats":{"Line":1}}],"covered":102,"coverable":102},{"path":["/","home","patrick","Workspaces","podpico","src-tauri","src","episode_manager.rs"],"content":"// Episode management module for PodPico\n// Coordinates episode operations between database, file manager, and other modules\n\nuse crate::commands::Episode;\nuse crate::error::PodPicoError;\n\npub struct EpisodeManager {\n    // This will coordinate between other managers\n}\n\nimpl Default for EpisodeManager {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\nimpl EpisodeManager {\n    pub fn new() -\u003e Self {\n        Self {}\n    }\n\n    pub async fn process_new_episodes(\n        \u0026self,\n        podcast_id: i64,\n    ) -\u003e Result\u003cVec\u003cEpisode\u003e, PodPicoError\u003e {\n        log::info!(\"Processing new episodes for podcast: {}\", podcast_id);\n        // TODO: Coordinate RSS fetching, database updates, and file operations\n        Err(PodPicoError::Generic(\"Not implemented yet\".to_string()))\n    }\n\n    pub async fn update_episode_status(\n        \u0026self,\n        episode_id: i64,\n        status: \u0026str,\n    ) -\u003e Result\u003c(), PodPicoError\u003e {\n        log::info!(\"Updating episode {} status to: {}\", episode_id, status);\n        // TODO: Update status in database and handle side effects\n        Err(PodPicoError::Generic(\"Not implemented yet\".to_string()))\n    }\n\n    pub async fn cleanup_old_episodes(\u0026self) -\u003e Result\u003c(), PodPicoError\u003e {\n        log::info!(\"Cleaning up old episodes\");\n        // TODO: Implement cleanup logic based on configuration\n        Ok(())\n    }\n}\n","traces":[{"line":12,"address":[18469184],"length":1,"stats":{"Line":0}},{"line":13,"address":[9223457],"length":1,"stats":{"Line":0}},{"line":22,"address":[9223488],"length":1,"stats":{"Line":0}},{"line":26,"address":[11643592,11643632,11643486],"length":1,"stats":{"Line":0}},{"line":28,"address":[11643598,11643877],"length":1,"stats":{"Line":0}},{"line":31,"address":[9223520],"length":1,"stats":{"Line":0}},{"line":36,"address":[11644165,11644311,11644271],"length":1,"stats":{"Line":0}},{"line":38,"address":[11644277,11644596],"length":1,"stats":{"Line":0}},{"line":41,"address":[9223568,9223576],"length":1,"stats":{"Line":0}},{"line":42,"address":[11645023,11644954,11644848],"length":1,"stats":{"Line":0}},{"line":44,"address":[11644965],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":11},{"path":["/","home","patrick","Workspaces","podpico","src-tauri","src","error.rs"],"content":"// Error types for PodPico application\n\nuse thiserror::Error;\n\n#[derive(Error, Debug)]\npub enum PodPicoError {\n    #[error(\"Database error: {0}\")]\n    Database(#[from] sqlx::Error),\n\n    #[error(\"HTTP request error: {0}\")]\n    Http(#[from] reqwest::Error),\n\n    #[error(\"Network error: {0}\")]\n    NetworkError(String),\n\n    #[error(\"RSS parsing error: {0}\")]\n    RssParsing(#[from] rss::Error),\n\n    #[error(\"IO error: {0}\")]\n    Io(#[from] std::io::Error),\n\n    #[error(\"IO error: {0}\")]\n    IoError(String),\n\n    #[error(\"Serialization error: {0}\")]\n    Serialization(#[from] serde_json::Error),\n\n    #[error(\"UUID parsing error: {0}\")]\n    Uuid(#[from] uuid::Error),\n\n    #[error(\"Invalid RSS feed URL: {0}\")]\n    InvalidRssUrl(String),\n\n    #[error(\"Episode not found: {0}\")]\n    EpisodeNotFound(i64),\n\n    #[error(\"Podcast not found: {0}\")]\n    PodcastNotFound(i64),\n\n    #[error(\"USB device not found: {0}\")]\n    UsbDeviceNotFound(String),\n\n    #[error(\"File transfer failed: {0}\")]\n    FileTransferFailed(String),\n\n    #[error(\"Download in progress\")]\n    DownloadInProgress,\n\n    #[error(\"Generic error: {0}\")]\n    Generic(String),\n}\n\n// Convert PodPicoError to String for Tauri commands\nimpl From\u003cPodPicoError\u003e for String {\n    fn from(error: PodPicoError) -\u003e Self {\n        error.to_string()\n    }\n}\n","traces":[{"line":54,"address":[69292392],"length":1,"stats":{"Line":0}},{"line":55,"address":[62227125],"length":1,"stats":{"Line":0}},{"line":56,"address":[66271888],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":3},{"path":["/","home","patrick","Workspaces","podpico","src-tauri","src","file_manager.rs"],"content":"// File management module for PodPico\n// Handles episode downloads, local file storage, and file operations\n\nuse crate::error::PodPicoError;\nuse reqwest;\nuse std::collections::HashMap;\nuse std::path::Path;\nuse std::path::PathBuf;\nuse std::sync::Arc;\nuse tokio::fs;\nuse tokio::sync::Mutex;\n\n#[derive(Debug, Clone)]\npub struct DownloadProgress {\n    pub episode_id: i64,\n    pub total_bytes: u64,\n    pub downloaded_bytes: u64,\n    pub percentage: f64,\n    pub speed_bytes_per_sec: f64,\n    pub eta_seconds: Option\u003cu64\u003e,\n    pub status: DownloadStatus,\n}\n\n#[derive(Debug, Clone, PartialEq)]\npub enum DownloadStatus {\n    Pending,\n    InProgress,\n    Completed,\n    Failed(String),\n    Cancelled,\n}\n\npub struct FileManager {\n    download_directory: PathBuf,\n    client: reqwest::Client,\n    downloads: Arc\u003cMutex\u003cHashMap\u003ci64, DownloadProgress\u003e\u003e\u003e,\n}\n\nimpl FileManager {\n    pub fn new(download_directory: \u0026str) -\u003e Self {\n        Self {\n            download_directory: PathBuf::from(download_directory),\n            client: reqwest::Client::builder()\n                .timeout(std::time::Duration::from_secs(300)) // 5 minute timeout for downloads\n                .build()\n                .unwrap_or_else(|_| reqwest::Client::new()),\n            downloads: Arc::new(Mutex::new(HashMap::new())),\n        }\n    }\n\n    pub fn clone_manager(\u0026self) -\u003e Self {\n        Self::new(\u0026self.download_directory.to_string_lossy())\n    }\n\n    pub async fn initialize(\u0026self) -\u003e Result\u003c(), PodPicoError\u003e {\n        log::info!(\"Initializing file manager\");\n        fs::create_dir_all(\u0026self.download_directory).await?;\n        Ok(())\n    }\n\n    pub async fn download_episode(\n        \u0026self,\n        episode_url: \u0026str,\n        episode_id: i64,\n        podcast_id: i64,\n    ) -\u003e Result\u003cString, PodPicoError\u003e {\n        log::info!(\n            \"Starting download for episode {} from {} (User Story #3)\",\n            episode_id,\n            episode_url\n        );\n\n        // Create podcast directory first\n        let podcast_dir = self.download_directory.join(podcast_id.to_string());\n        fs::create_dir_all(\u0026podcast_dir).await?;\n\n        // Extract filename from URL or use episode ID\n        let filename = self.extract_filename_from_url(episode_url, episode_id);\n        let file_path = podcast_dir.join(\u0026filename);\n\n        // Check if already downloaded BEFORE any other operations\n        if file_path.exists() {\n            log::info!(\n                \"Episode {} already downloaded at {:?}\",\n                episode_id,\n                file_path\n            );\n\n            // User Story #3 Acceptance Criteria: Progress indicator appears immediately\n            let mut downloads = self.downloads.lock().await;\n            downloads.insert(\n                episode_id,\n                DownloadProgress {\n                    episode_id,\n                    total_bytes: 0,\n                    downloaded_bytes: 0,\n                    percentage: 100.0,\n                    speed_bytes_per_sec: 0.0,\n                    eta_seconds: None,\n                    status: DownloadStatus::Completed,\n                },\n            );\n            drop(downloads);\n\n            return Ok(file_path.to_string_lossy().to_string());\n        }\n\n        // User Story #3 Acceptance Criteria: Progress indicator appears immediately\n        let mut downloads = self.downloads.lock().await;\n        downloads.insert(\n            episode_id,\n            DownloadProgress {\n                episode_id,\n                total_bytes: 0,\n                downloaded_bytes: 0,\n                percentage: 0.0,\n                speed_bytes_per_sec: 0.0,\n                eta_seconds: None,\n                status: DownloadStatus::Pending,\n            },\n        );\n        drop(downloads);\n\n        // User Story #3 Acceptance Criteria: Check disk space before download\n        self.check_disk_space(\u0026self.download_directory).await?;\n\n        // User Story #3 Acceptance Criteria: Download with progress tracking\n        let result = self\n            .download_with_progress(episode_url, \u0026file_path, episode_id)\n            .await;\n\n        match result {\n            Ok(path) =\u003e {\n                log::info!(\"Successfully downloaded episode {} to {}\", episode_id, path);\n                self.update_download_status_with_speed(\n                    episode_id,\n                    DownloadStatus::Completed,\n                    100.0,\n                    0,\n                    0,\n                    0.0,\n                )\n                .await;\n                Ok(path)\n            }\n            Err(e) =\u003e {\n                log::error!(\"Failed to download episode {}: {}\", episode_id, e);\n                self.update_download_status_with_speed(\n                    episode_id,\n                    DownloadStatus::Failed(e.to_string()),\n                    0.0,\n                    0,\n                    0,\n                    0.0,\n                )\n                .await;\n                Err(e)\n            }\n        }\n    }\n\n    async fn download_with_progress(\n        \u0026self,\n        url: \u0026str,\n        file_path: \u0026PathBuf,\n        episode_id: i64,\n    ) -\u003e Result\u003cString, PodPicoError\u003e {\n        use futures_util::StreamExt;\n        use tokio::io::AsyncWriteExt;\n\n        // Update status to in progress\n        self.update_download_status(episode_id, DownloadStatus::InProgress, 0.0, 0, 0)\n            .await;\n\n        let response =\n            self.client.get(url).send().await.map_err(|e| {\n                PodPicoError::NetworkError(format!(\"Failed to start download: {}\", e))\n            })?;\n\n        if !response.status().is_success() {\n            return Err(PodPicoError::NetworkError(format!(\n                \"HTTP error {}: {}\",\n                response.status(),\n                response\n                    .status()\n                    .canonical_reason()\n                    .unwrap_or(\"Unknown error\")\n            )));\n        }\n\n        let total_size = response.content_length().unwrap_or(0);\n        let mut downloaded = 0u64;\n        let mut file = tokio::fs::File::create(file_path)\n            .await\n            .map_err(|e| PodPicoError::IoError(format!(\"Failed to create file: {}\", e)))?;\n\n        let start_time = std::time::Instant::now();\n        let mut stream = response.bytes_stream();\n\n        while let Some(chunk) = stream.next().await {\n            let chunk = chunk\n                .map_err(|e| PodPicoError::NetworkError(format!(\"Download stream error: {}\", e)))?;\n\n            file.write_all(\u0026chunk)\n                .await\n                .map_err(|e| PodPicoError::IoError(format!(\"Failed to write file: {}\", e)))?;\n\n            downloaded += chunk.len() as u64;\n\n            // User Story #3 Acceptance Criteria: Progress percentage tracking\n            let percentage = if total_size \u003e 0 {\n                (downloaded as f64 / total_size as f64) * 100.0\n            } else {\n                0.0\n            };\n\n            // Calculate download speed\n            let elapsed = start_time.elapsed().as_secs_f64();\n            let speed = if elapsed \u003e 0.0 {\n                downloaded as f64 / elapsed\n            } else {\n                0.0\n            };\n\n            self.update_download_status_with_speed(\n                episode_id,\n                DownloadStatus::InProgress,\n                percentage,\n                downloaded,\n                total_size,\n                speed,\n            )\n            .await;\n        }\n\n        file.sync_all()\n            .await\n            .map_err(|e| PodPicoError::IoError(format!(\"Failed to sync file: {}\", e)))?;\n\n        Ok(file_path.to_string_lossy().to_string())\n    }\n\n    async fn update_download_status(\n        \u0026self,\n        episode_id: i64,\n        status: DownloadStatus,\n        percentage: f64,\n        downloaded: u64,\n        total: u64,\n    ) {\n        let mut downloads = self.downloads.lock().await;\n        if let Some(progress) = downloads.get_mut(\u0026episode_id) {\n            progress.status = status;\n            progress.percentage = percentage;\n            progress.downloaded_bytes = downloaded;\n            progress.total_bytes = total;\n\n            // Calculate speed and ETA\n            if percentage \u003e 0.0 \u0026\u0026 percentage \u003c 100.0 {\n                let remaining_bytes = total.saturating_sub(downloaded);\n                if progress.speed_bytes_per_sec \u003e 0.0 {\n                    progress.eta_seconds =\n                        Some((remaining_bytes as f64 / progress.speed_bytes_per_sec) as u64);\n                }\n            }\n        }\n    }\n\n    pub async fn update_download_status_with_speed(\n        \u0026self,\n        episode_id: i64,\n        status: DownloadStatus,\n        percentage: f64,\n        downloaded: u64,\n        total: u64,\n        speed: f64,\n    ) {\n        let mut downloads = self.downloads.lock().await;\n        if let Some(progress) = downloads.get_mut(\u0026episode_id) {\n            progress.status = status;\n            progress.percentage = percentage;\n            progress.downloaded_bytes = downloaded;\n            progress.total_bytes = total;\n            progress.speed_bytes_per_sec = speed;\n\n            // Calculate speed and ETA\n            if percentage \u003e 0.0 \u0026\u0026 percentage \u003c 100.0 {\n                let remaining_bytes = total.saturating_sub(downloaded);\n                if progress.speed_bytes_per_sec \u003e 0.0 {\n                    progress.eta_seconds =\n                        Some((remaining_bytes as f64 / progress.speed_bytes_per_sec) as u64);\n                }\n            }\n        } else {\n            // If progress doesn't exist, create it\n            downloads.insert(\n                episode_id,\n                DownloadProgress {\n                    episode_id,\n                    total_bytes: total,\n                    downloaded_bytes: downloaded,\n                    percentage,\n                    speed_bytes_per_sec: speed,\n                    eta_seconds: if percentage \u003e 0.0 \u0026\u0026 percentage \u003c 100.0 \u0026\u0026 speed \u003e 0.0 {\n                        Some(((total.saturating_sub(downloaded)) as f64 / speed) as u64)\n                    } else {\n                        None\n                    },\n                    status,\n                },\n            );\n        }\n    }\n\n    pub async fn get_download_progress(\u0026self, episode_id: i64) -\u003e Option\u003cDownloadProgress\u003e {\n        let downloads = self.downloads.lock().await;\n        downloads.get(\u0026episode_id).cloned()\n    }\n\n    async fn check_disk_space(\u0026self, directory: \u0026Path) -\u003e Result\u003c(), PodPicoError\u003e {\n        // User Story #3 Acceptance Criteria: Check disk space before download\n        // For now, just check if directory is writable\n        // TODO: Implement actual disk space check\n        if !directory.exists() {\n            return Ok(()); // Will be created\n        }\n\n        let temp_file = directory.join(\".podpico_space_check\");\n        match tokio::fs::write(\u0026temp_file, b\"test\").await {\n            Ok(_) =\u003e {\n                let _ = tokio::fs::remove_file(\u0026temp_file).await;\n                Ok(())\n            }\n            Err(e) =\u003e Err(PodPicoError::IoError(format!(\n                \"Insufficient disk space or permissions: {}\",\n                e\n            ))),\n        }\n    }\n\n    fn extract_filename_from_url(\u0026self, url: \u0026str, episode_id: i64) -\u003e String {\n        // Try to extract filename from URL\n        if let Some(filename) = url.split('/').next_back() {\n            if filename.contains('.') \u0026\u0026 filename.len() \u003c 255 {\n                return filename.to_string();\n            }\n        }\n\n        // Fallback to episode ID with .mp3 extension\n        format!(\"{}.mp3\", episode_id)\n    }\n\n    pub fn get_episode_path(\u0026self, podcast_id: i64, episode_id: i64) -\u003e PathBuf {\n        self.download_directory\n            .join(podcast_id.to_string())\n            .join(format!(\"{}.mp3\", episode_id))\n    }\n\n    pub async fn delete_episode(\n        \u0026self,\n        podcast_id: i64,\n        episode_id: i64,\n    ) -\u003e Result\u003c(), PodPicoError\u003e {\n        let file_path = self.get_episode_path(podcast_id, episode_id);\n        log::info!(\"Deleting episode file: {:?}\", file_path);\n\n        if file_path.exists() {\n            fs::remove_file(file_path).await?;\n        }\n\n        // Remove from downloads tracking\n        let mut downloads = self.downloads.lock().await;\n        downloads.remove(\u0026episode_id);\n\n        Ok(())\n    }\n\n    pub fn get_download_progress_sync(\u0026self, episode_id: i64) -\u003e f64 {\n        // TODO: Implement download progress tracking\n        log::info!(\"Getting download progress for episode: {}\", episode_id);\n        0.0\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use httpmock::prelude::*;\n    use tempfile::tempdir;\n\n    async fn create_test_file_manager() -\u003e FileManager {\n        let temp_dir = tempdir().unwrap();\n        let manager = FileManager::new(temp_dir.path().to_str().unwrap());\n        manager.initialize().await.unwrap();\n        manager\n    }\n\n    #[tokio::test]\n    async fn test_user_story_3_episode_download_success() {\n        // User Story #3: Download episodes from specific podcast\n        let file_manager = create_test_file_manager().await;\n        let server = MockServer::start();\n\n        let mock_audio_content = b\"fake audio content for testing\";\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/episode.mp3\");\n            then.status(200)\n                .header(\"content-type\", \"audio/mpeg\")\n                .header(\"content-length\", mock_audio_content.len().to_string())\n                .body(mock_audio_content);\n        });\n\n        let episode_id = 1;\n        let podcast_id = 1;\n        let url = server.url(\"/episode.mp3\");\n\n        // Test acceptance criteria: Progress indicator appears immediately\n        let result = file_manager\n            .download_episode(\u0026url, episode_id, podcast_id)\n            .await;\n\n        assert!(result.is_ok(), \"Download should succeed\");\n        let file_path = result.unwrap();\n        assert!(\n            std::path::Path::new(\u0026file_path).exists(),\n            \"Downloaded file should exist\"\n        );\n\n        // Test acceptance criteria: Episode marked as downloaded\n        let progress = file_manager.get_download_progress(episode_id).await;\n        assert!(progress.is_some(), \"Download progress should be tracked\");\n\n        if let Some(progress) = progress {\n            assert_eq!(\n                progress.status,\n                DownloadStatus::Completed,\n                \"Download should be completed\"\n            );\n            assert_eq!(\n                progress.percentage, 100.0,\n                \"Download should be 100% complete\"\n            );\n        }\n\n        mock.assert();\n    }\n\n    #[tokio::test]\n    async fn test_user_story_3_download_progress_tracking() {\n        // User Story #3 Acceptance Criteria: Download progress percentage tracking\n        let file_manager = create_test_file_manager().await;\n\n        // Test that we can track progress - start with manual progress setting\n        let episode_id = 2;\n\n        // Simulate progress tracking without actual download\n        file_manager\n            .update_download_status_with_speed(\n                episode_id,\n                DownloadStatus::InProgress,\n                50.0,\n                512,\n                1024,\n                100.0,\n            )\n            .await;\n\n        let progress = file_manager.get_download_progress(episode_id).await;\n        assert!(progress.is_some(), \"Should have progress tracking\");\n\n        if let Some(progress) = progress {\n            assert_eq!(progress.percentage, 50.0, \"Should have 50% progress\");\n            assert_eq!(\n                progress.downloaded_bytes, 512,\n                \"Should have correct downloaded bytes\"\n            );\n            assert_eq!(\n                progress.total_bytes, 1024,\n                \"Should have correct total bytes\"\n            );\n            assert_eq!(\n                progress.status,\n                DownloadStatus::InProgress,\n                \"Should be in progress\"\n            );\n        }\n    }\n\n    #[tokio::test]\n    async fn test_user_story_3_download_already_exists() {\n        // Test that downloading an already downloaded episode returns existing file\n        let file_manager = create_test_file_manager().await;\n        let server = MockServer::start();\n        let episode_id = 3;\n        let podcast_id = 1;\n\n        // Create podcast directory\n        let podcast_dir = file_manager.download_directory.join(podcast_id.to_string());\n        tokio::fs::create_dir_all(\u0026podcast_dir).await.unwrap();\n\n        // Test filename extraction first\n        let test_url = \u0026server.url(\"/episode.mp3\");\n        let expected_filename = file_manager.extract_filename_from_url(test_url, episode_id);\n\n        // Create file with the exact name that would be extracted\n        let existing_file = podcast_dir.join(\u0026expected_filename);\n        tokio::fs::write(\u0026existing_file, b\"existing content\")\n            .await\n            .unwrap();\n\n        // Verify file exists before test\n        assert!(\n            existing_file.exists(),\n            \"Test setup: existing file should exist at {:?}\",\n            existing_file\n        );\n\n        // Create a mock that shouldn't be called since file exists\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/episode.mp3\");\n            then.status(404); // This should not be called\n        });\n\n        // Test with the server URL - since file exists, no network call should be made\n        let result = file_manager\n            .download_episode(test_url, episode_id, podcast_id)\n            .await;\n        assert!(\n            result.is_ok(),\n            \"Should return existing file path: {:?}\",\n            result\n        );\n\n        // Verify the file still exists and has the same content\n        assert!(existing_file.exists(), \"Existing file should still exist\");\n        let content = tokio::fs::read(\u0026existing_file).await.unwrap();\n        assert_eq!(\n            content, b\"existing content\",\n            \"File content should be unchanged\"\n        );\n\n        let progress = file_manager.get_download_progress(episode_id).await;\n        if let Some(progress) = progress {\n            assert_eq!(\n                progress.status,\n                DownloadStatus::Completed,\n                \"Should be marked as completed\"\n            );\n            assert_eq!(progress.percentage, 100.0, \"Should be 100% complete\");\n        }\n\n        // The mock should NOT have been called since file already exists\n        mock.assert_hits(0);\n    }\n\n    #[tokio::test]\n    async fn test_user_story_3_download_network_error() {\n        // User Story #3 Acceptance Criteria: Clear error message for failed downloads\n        let file_manager = create_test_file_manager().await;\n        let server = MockServer::start();\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/error-episode.mp3\");\n            then.status(404);\n        });\n\n        let episode_id = 4;\n        let podcast_id = 1;\n        let url = server.url(\"/error-episode.mp3\");\n\n        let result = file_manager\n            .download_episode(\u0026url, episode_id, podcast_id)\n            .await;\n        assert!(result.is_err(), \"Download should fail for 404 error\");\n\n        // Check that error status is tracked\n        let progress = file_manager.get_download_progress(episode_id).await;\n        if let Some(progress) = progress {\n            matches!(progress.status, DownloadStatus::Failed(_));\n        }\n\n        mock.assert();\n    }\n\n    #[tokio::test]\n    async fn test_user_story_3_invalid_url() {\n        // Test handling of invalid URLs\n        let file_manager = create_test_file_manager().await;\n\n        let result = file_manager.download_episode(\"invalid-url\", 5, 1).await;\n        assert!(result.is_err(), \"Should fail for invalid URL\");\n\n        let progress = file_manager.get_download_progress(5).await;\n        if let Some(progress) = progress {\n            matches!(progress.status, DownloadStatus::Failed(_));\n        }\n    }\n\n    #[tokio::test]\n    async fn test_file_manager_initialization() {\n        let temp_dir = tempdir().unwrap();\n        let file_manager = FileManager::new(temp_dir.path().to_str().unwrap());\n\n        let result = file_manager.initialize().await;\n        assert!(\n            result.is_ok(),\n            \"File manager should initialize successfully\"\n        );\n        assert!(\n            file_manager.download_directory.exists(),\n            \"Download directory should be created\"\n        );\n    }\n\n    #[tokio::test]\n    async fn test_get_episode_path() {\n        let file_manager = create_test_file_manager().await;\n\n        let path = file_manager.get_episode_path(1, 123);\n        assert!(\n            path.to_string_lossy().contains(\"1\"),\n            \"Path should contain podcast ID\"\n        );\n        assert!(\n            path.to_string_lossy().contains(\"123.mp3\"),\n            \"Path should contain episode ID and extension\"\n        );\n    }\n\n    #[tokio::test]\n    async fn test_delete_episode() {\n        let file_manager = create_test_file_manager().await;\n        let podcast_id = 1;\n        let episode_id = 6;\n\n        // Create a test file\n        let podcast_dir = file_manager.download_directory.join(podcast_id.to_string());\n        tokio::fs::create_dir_all(\u0026podcast_dir).await.unwrap();\n        let test_file = podcast_dir.join(format!(\"{}.mp3\", episode_id));\n        tokio::fs::write(\u0026test_file, b\"test content\").await.unwrap();\n        assert!(test_file.exists(), \"Test file should exist\");\n\n        // Delete the episode\n        let result = file_manager.delete_episode(podcast_id, episode_id).await;\n        assert!(result.is_ok(), \"Delete should succeed\");\n        assert!(!test_file.exists(), \"Test file should be deleted\");\n    }\n\n    #[tokio::test]\n    async fn test_extract_filename_from_url() {\n        let file_manager = create_test_file_manager().await;\n\n        // Test with proper filename in URL\n        let filename = file_manager\n            .extract_filename_from_url(\"https://example.com/podcast/episode123.mp3\", 456);\n        assert_eq!(filename, \"episode123.mp3\");\n\n        // Test with URL without proper filename\n        let filename = file_manager.extract_filename_from_url(\"https://example.com/feed\", 789);\n        assert_eq!(filename, \"789.mp3\");\n\n        // Test with complex URL\n        let filename = file_manager.extract_filename_from_url(\n            \"https://cdn.example.com/episodes/show_name_ep_042.mp3?token=abc\",\n            42,\n        );\n        assert_eq!(filename, \"show_name_ep_042.mp3?token=abc\");\n    }\n\n    #[tokio::test]\n    async fn test_disk_space_check() {\n        let file_manager = create_test_file_manager().await;\n\n        // This should succeed for a valid temp directory\n        let result = file_manager\n            .check_disk_space(\u0026file_manager.download_directory)\n            .await;\n        assert!(\n            result.is_ok(),\n            \"Disk space check should succeed for valid directory\"\n        );\n    }\n}\n","traces":[{"line":40,"address":[9185948,9185456,9185920],"length":1,"stats":{"Line":1}},{"line":42,"address":[14805249],"length":1,"stats":{"Line":1}},{"line":43,"address":[9185511,9185647,9185687],"length":1,"stats":{"Line":3}},{"line":47,"address":[9185760,9185808],"length":1,"stats":{"Line":2}},{"line":51,"address":[9185968,9186130,9186124],"length":1,"stats":{"Line":1}},{"line":52,"address":[9186096,9186000],"length":1,"stats":{"Line":2}},{"line":55,"address":[13339734,13340091,13340471,13339552,13339694,13339587],"length":1,"stats":{"Line":4}},{"line":56,"address":[13339658,13339811,13339782],"length":1,"stats":{"Line":3}},{"line":57,"address":[8210246],"length":1,"stats":{"Line":3}},{"line":58,"address":[13340406],"length":1,"stats":{"Line":1}},{"line":61,"address":[9186160],"length":1,"stats":{"Line":1}},{"line":67,"address":[13340716,13340990,13341034],"length":1,"stats":{"Line":3}},{"line":74,"address":[13340996,13341397],"length":1,"stats":{"Line":2}},{"line":75,"address":[13341566,13340794,13343076,13341475,13341662],"length":1,"stats":{"Line":3}},{"line":78,"address":[13342007],"length":1,"stats":{"Line":1}},{"line":79,"address":[13342044,13342146],"length":1,"stats":{"Line":2}},{"line":82,"address":[13342287,13342182],"length":1,"stats":{"Line":2}},{"line":83,"address":[13342345,13342594,13342554],"length":1,"stats":{"Line":3}},{"line":90,"address":[13343110,13342560,13342983,13340815],"length":1,"stats":{"Line":2}},{"line":91,"address":[13343349,13343597],"length":1,"stats":{"Line":2}},{"line":92,"address":[13343413],"length":1,"stats":{"Line":1}},{"line":93,"address":[13343455],"length":1,"stats":{"Line":1}},{"line":99,"address":[13343425],"length":1,"stats":{"Line":1}},{"line":100,"address":[16447159],"length":1,"stats":{"Line":1}},{"line":103,"address":[13343619],"length":1,"stats":{"Line":1}},{"line":105,"address":[13343642],"length":1,"stats":{"Line":1}},{"line":109,"address":[13343906,13342314,13340836,13342451],"length":1,"stats":{"Line":2}},{"line":110,"address":[13344151,13344415],"length":1,"stats":{"Line":2}},{"line":111,"address":[16447981],"length":1,"stats":{"Line":1}},{"line":112,"address":[13344279],"length":1,"stats":{"Line":1}},{"line":118,"address":[13344249],"length":1,"stats":{"Line":1}},{"line":119,"address":[13344271],"length":1,"stats":{"Line":1}},{"line":122,"address":[13344437],"length":1,"stats":{"Line":1}},{"line":125,"address":[13344474,13344627,13340857],"length":1,"stats":{"Line":2}},{"line":128,"address":[13345043,13345406,13345002,13345073],"length":1,"stats":{"Line":4}},{"line":129,"address":[16448802],"length":1,"stats":{"Line":1}},{"line":130,"address":[16449042,16448842,16448902,16444510,16449306],"length":1,"stats":{"Line":4}},{"line":132,"address":[16449332],"length":1,"stats":{"Line":1}},{"line":133,"address":[13345647],"length":1,"stats":{"Line":1}},{"line":134,"address":[13345677,13345859,13345774],"length":1,"stats":{"Line":3}},{"line":135,"address":[13345780,13346205,13345846],"length":1,"stats":{"Line":3}},{"line":136,"address":[16449604],"length":1,"stats":{"Line":1}},{"line":137,"address":[16449618],"length":1,"stats":{"Line":1}},{"line":143,"address":[13346857,13346198,13346238,13340899],"length":1,"stats":{"Line":2}},{"line":144,"address":[13347019],"length":1,"stats":{"Line":1}},{"line":146,"address":[13345561],"length":1,"stats":{"Line":1}},{"line":147,"address":[16450208,16450147,16449414],"length":1,"stats":{"Line":3}},{"line":148,"address":[16450638,16450570,16450153],"length":1,"stats":{"Line":3}},{"line":149,"address":[16450170],"length":1,"stats":{"Line":1}},{"line":150,"address":[13346702,13346351],"length":1,"stats":{"Line":2}},{"line":156,"address":[13346787,13347182,13346827,13340920],"length":1,"stats":{"Line":2}},{"line":157,"address":[13347344],"length":1,"stats":{"Line":1}},{"line":162,"address":[9186224],"length":1,"stats":{"Line":1}},{"line":172,"address":[13347708,13348021],"length":1,"stats":{"Line":2}},{"line":173,"address":[16451701,16451890,16451950,16452010],"length":1,"stats":{"Line":2}},{"line":175,"address":[16452278,16451722,16458241,16452405,16458247,16453789,16458000,16452193,16452757],"length":1,"stats":{"Line":6}},{"line":177,"address":[13353923,13353971],"length":1,"stats":{"Line":2}},{"line":180,"address":[13348965,13349048],"length":1,"stats":{"Line":2}},{"line":181,"address":[16453112,16453304],"length":1,"stats":{"Line":2}},{"line":183,"address":[13349168,13349091],"length":1,"stats":{"Line":2}},{"line":184,"address":[13349199],"length":1,"stats":{"Line":1}},{"line":191,"address":[13349118,13349641],"length":1,"stats":{"Line":2}},{"line":192,"address":[16453645],"length":1,"stats":{"Line":1}},{"line":193,"address":[13350003,13350153,13350262,13349774,13349724,13350819],"length":1,"stats":{"Line":4}},{"line":194,"address":[16453695,16453755,16451743,16454075,16453811],"length":1,"stats":{"Line":4}},{"line":195,"address":[13350214,13354144,13354166],"length":1,"stats":{"Line":0}},{"line":197,"address":[13350640,13350520],"length":1,"stats":{"Line":2}},{"line":198,"address":[16454622],"length":1,"stats":{"Line":1}},{"line":200,"address":[16451764,16455214,16454765,16454804],"length":1,"stats":{"Line":3}},{"line":201,"address":[13352794,13351542,13351494,13351634],"length":1,"stats":{"Line":2}},{"line":202,"address":[16455614,16458566,16458544],"length":1,"stats":{"Line":0}},{"line":204,"address":[16456055,16456202,16455868,16455762],"length":1,"stats":{"Line":3}},{"line":205,"address":[13351821,13347893,13351881,13350857],"length":1,"stats":{"Line":3}},{"line":206,"address":[16458838,16458816,16456154],"length":1,"stats":{"Line":0}},{"line":208,"address":[16456331,16456239],"length":1,"stats":{"Line":1}},{"line":211,"address":[13352307,13352255],"length":1,"stats":{"Line":1}},{"line":212,"address":[16456365],"length":1,"stats":{"Line":1}},{"line":214,"address":[13352295],"length":1,"stats":{"Line":0}},{"line":218,"address":[16456467],"length":1,"stats":{"Line":1}},{"line":219,"address":[13352503,13352524],"length":1,"stats":{"Line":1}},{"line":220,"address":[16456588],"length":1,"stats":{"Line":1}},{"line":222,"address":[16456568],"length":1,"stats":{"Line":0}},{"line":225,"address":[13352595,13352685,13352715],"length":1,"stats":{"Line":3}},{"line":226,"address":[13352607],"length":1,"stats":{"Line":1}},{"line":227,"address":[16456677],"length":1,"stats":{"Line":1}},{"line":228,"address":[16456685],"length":1,"stats":{"Line":1}},{"line":229,"address":[16456694,16456709],"length":1,"stats":{"Line":2}},{"line":230,"address":[13352646],"length":1,"stats":{"Line":1}},{"line":231,"address":[16456716],"length":1,"stats":{"Line":1}},{"line":233,"address":[8222140],"length":1,"stats":{"Line":3}},{"line":236,"address":[13353086,13352796,13353142,13353257,13353795,13352853],"length":1,"stats":{"Line":4}},{"line":237,"address":[13347935,13353107,13352886,13352846,13352913],"length":1,"stats":{"Line":4}},{"line":238,"address":[13354966,13353209,13354944],"length":1,"stats":{"Line":0}},{"line":240,"address":[13353381,13353456,13353290],"length":1,"stats":{"Line":3}},{"line":243,"address":[14806064],"length":1,"stats":{"Line":1}},{"line":251,"address":[16459660,16459778,16459553,16459600],"length":1,"stats":{"Line":2}},{"line":252,"address":[16459968,16460035,16460106,16460222],"length":1,"stats":{"Line":3}},{"line":253,"address":[16460232,16460166],"length":1,"stats":{"Line":1}},{"line":254,"address":[13356144],"length":1,"stats":{"Line":1}},{"line":255,"address":[16460351],"length":1,"stats":{"Line":1}},{"line":256,"address":[13356172],"length":1,"stats":{"Line":1}},{"line":259,"address":[16460377],"length":1,"stats":{"Line":1}},{"line":260,"address":[16460470,16460418],"length":1,"stats":{"Line":0}},{"line":261,"address":[13356282,13356471],"length":1,"stats":{"Line":0}},{"line":262,"address":[13356448],"length":1,"stats":{"Line":0}},{"line":263,"address":[13356307],"length":1,"stats":{"Line":0}},{"line":269,"address":[9186368],"length":1,"stats":{"Line":1}},{"line":278,"address":[13820157],"length":1,"stats":{"Line":2}},{"line":279,"address":[13357387,13357330,13358700,13357456],"length":1,"stats":{"Line":4}},{"line":280,"address":[16461771,16461865],"length":1,"stats":{"Line":1}},{"line":281,"address":[16461969],"length":1,"stats":{"Line":1}},{"line":282,"address":[16461987],"length":1,"stats":{"Line":1}},{"line":283,"address":[16462003],"length":1,"stats":{"Line":1}},{"line":284,"address":[13357756],"length":1,"stats":{"Line":1}},{"line":287,"address":[16462040],"length":1,"stats":{"Line":1}},{"line":288,"address":[13357824,13357880],"length":1,"stats":{"Line":0}},{"line":289,"address":[13357888,13358078],"length":1,"stats":{"Line":0}},{"line":290,"address":[13358055],"length":1,"stats":{"Line":0}},{"line":291,"address":[13357914],"length":1,"stats":{"Line":0}},{"line":296,"address":[16462765,16461833],"length":1,"stats":{"Line":2}},{"line":297,"address":[13358083],"length":1,"stats":{"Line":1}},{"line":298,"address":[16462659],"length":1,"stats":{"Line":1}},{"line":299,"address":[16462367],"length":1,"stats":{"Line":1}},{"line":300,"address":[13358117],"length":1,"stats":{"Line":1}},{"line":301,"address":[16462401],"length":1,"stats":{"Line":1}},{"line":302,"address":[16462418],"length":1,"stats":{"Line":1}},{"line":303,"address":[16462437],"length":1,"stats":{"Line":1}},{"line":304,"address":[16462493,16462951,16462459],"length":1,"stats":{"Line":2}},{"line":305,"address":[16462543,16462799],"length":1,"stats":{"Line":2}},{"line":307,"address":[13358214],"length":1,"stats":{"Line":0}},{"line":309,"address":[16462610],"length":1,"stats":{"Line":1}},{"line":315,"address":[14806253,14806240],"length":1,"stats":{"Line":4}},{"line":316,"address":[13806583],"length":1,"stats":{"Line":2}},{"line":317,"address":[13359349,13359474,13359403],"length":1,"stats":{"Line":3}},{"line":320,"address":[16463923,16463888,16464097,16464412,16464039],"length":1,"stats":{"Line":4}},{"line":324,"address":[13359809,13359692],"length":1,"stats":{"Line":2}},{"line":325,"address":[13359815],"length":1,"stats":{"Line":1}},{"line":328,"address":[13359845],"length":1,"stats":{"Line":1}},{"line":329,"address":[8215951],"length":1,"stats":{"Line":4}},{"line":331,"address":[13799246],"length":1,"stats":{"Line":3}},{"line":332,"address":[13361047],"length":1,"stats":{"Line":1}},{"line":334,"address":[13360365,13360599],"length":1,"stats":{"Line":0}},{"line":341,"address":[9186544],"length":1,"stats":{"Line":1}},{"line":343,"address":[14806392],"length":1,"stats":{"Line":1}},{"line":344,"address":[9186717,9186864],"length":1,"stats":{"Line":2}},{"line":345,"address":[9186896],"length":1,"stats":{"Line":1}},{"line":350,"address":[9186732],"length":1,"stats":{"Line":1}},{"line":353,"address":[9187323,9186928,9187317],"length":1,"stats":{"Line":1}},{"line":354,"address":[9187033,9187274,9186976],"length":1,"stats":{"Line":3}},{"line":355,"address":[9186991],"length":1,"stats":{"Line":1}},{"line":356,"address":[9187135],"length":1,"stats":{"Line":1}},{"line":359,"address":[14807120],"length":1,"stats":{"Line":1}},{"line":364,"address":[13361244,13361394],"length":1,"stats":{"Line":2}},{"line":365,"address":[16465891,16465794,16465929],"length":1,"stats":{"Line":3}},{"line":367,"address":[13362349,13361509,13361821],"length":1,"stats":{"Line":3}},{"line":368,"address":[13361873,13362043,13361301],"length":1,"stats":{"Line":2}},{"line":372,"address":[13361842,13362367,13362523,13361322],"length":1,"stats":{"Line":2}},{"line":373,"address":[13362736,13362793],"length":1,"stats":{"Line":2}},{"line":375,"address":[13362845],"length":1,"stats":{"Line":1}},{"line":378,"address":[9187392],"length":1,"stats":{"Line":0}},{"line":380,"address":[9187411,9187453],"length":1,"stats":{"Line":0}}],"covered":143,"coverable":161},{"path":["/","home","patrick","Workspaces","podpico","src-tauri","src","lib.rs"],"content":"// Learn more about Tauri commands at https://tauri.app/develop/calling-rust/\n\n// PodPico - Desktop podcast management application\n// Backend entry point and module declarations\n// User Story Foundation Setup\n\n// Module declarations\npub mod commands;\npub mod config;\npub mod database;\npub mod episode_manager;\npub mod error;\npub mod file_manager;\npub mod rss_manager;\npub mod usb_manager;\n\n// Re-exports\npub use commands::*;\npub use error::PodPicoError;\n\nuse database::DatabaseManager;\nuse file_manager::FileManager;\nuse rss_manager::RssManager;\nuse std::fs;\nuse usb_manager::UsbManager;\n\n// Tauri application entry point\n#[cfg_attr(mobile, tauri::mobile_entry_point)]\npub fn run() {\n    // Initialize logging\n    env_logger::init();\n\n    tauri::Builder::default()\n        .plugin(tauri_plugin_opener::init())\n        .setup(|_app| {\n            // Initialize database and managers\n            tauri::async_runtime::spawn(async move {\n                if let Err(e) = initialize_app().await {\n                    log::error!(\"Failed to initialize application: {}\", e);\n                    std::process::exit(1);\n                }\n                log::info!(\"Application initialized successfully\");\n            });\n            Ok(())\n        })\n        .invoke_handler(tauri::generate_handler![\n            // Podcast management commands\n            commands::add_podcast,\n            commands::remove_podcast,\n            commands::get_podcasts,\n            commands::get_episodes,\n            commands::update_episode_status,\n            // Download management commands\n            commands::download_episode,\n            commands::get_download_progress,\n            // USB device management commands\n            commands::get_usb_devices,\n            commands::transfer_episode_to_device,\n            commands::remove_episode_from_device,\n            // Configuration commands\n            commands::get_app_config,\n            commands::update_app_config,\n            // Development/demo command\n            commands::greet\n        ])\n        .run(tauri::generate_context!())\n        .expect(\"error while running tauri application\");\n}\n\nasync fn initialize_app() -\u003e Result\u003c(), Box\u003cdyn std::error::Error + Send + Sync\u003e\u003e {\n    log::info!(\"Initializing PodPico application...\");\n\n    // Create data directory in the current working directory for now\n    let data_dir = std::path::PathBuf::from(\"./data\");\n    fs::create_dir_all(\u0026data_dir)?;\n    log::info!(\"Created data directory: {}\", data_dir.display());\n\n    // Create downloads directory for episodes\n    let downloads_dir = data_dir.join(\"episodes\");\n    fs::create_dir_all(\u0026downloads_dir)?;\n    log::info!(\"Created downloads directory: {}\", downloads_dir.display());\n\n    // Initialize database - create the file first to ensure permissions work\n    let db_path = data_dir.join(\"podcasts.db\");\n\n    // Create the database file if it doesn't exist\n    if !db_path.exists() {\n        std::fs::File::create(\u0026db_path)?;\n        log::info!(\"Created new database file: {}\", db_path.display());\n    }\n\n    let database_url = format!(\"sqlite:{}\", db_path.display());\n    log::info!(\"Connecting to database: {}\", database_url);\n\n    let db = DatabaseManager::new(\u0026database_url).await?;\n\n    // Create database tables (User Stories #1-11 foundation)\n    log::info!(\"Creating database schema for podcast management...\");\n    db.initialize().await?;\n\n    // Initialize RSS manager\n    let rss_manager = RssManager::new();\n\n    // Initialize file manager (User Story #3, #9)\n    let downloads_dir_str = downloads_dir.to_string_lossy().to_string();\n    let file_manager = FileManager::new(\u0026downloads_dir_str);\n    file_manager.initialize().await?;\n    log::info!(\n        \"File manager initialized with downloads directory: {}\",\n        downloads_dir_str\n    );\n\n    // Initialize USB manager (User Stories #8, #9, #10, #11)\n    let usb_manager = UsbManager::new();\n    log::info!(\"USB manager initialized for device operations\");\n\n    // Initialize managers globally\n    commands::initialize_managers(db, rss_manager, file_manager, usb_manager).await;\n\n    log::info!(\"All managers initialized successfully\");\n    Ok(())\n}\n","traces":[{"line":29,"address":[63800896],"length":1,"stats":{"Line":1}},{"line":31,"address":[20037962],"length":1,"stats":{"Line":1}},{"line":33,"address":[73217250],"length":1,"stats":{"Line":0}},{"line":34,"address":[7966007,7966110,7966026,7967087],"length":1,"stats":{"Line":0}},{"line":35,"address":[29898768],"length":1,"stats":{"Line":0}},{"line":37,"address":[29897637,29897685,29897701,29897653,29897717,29897733,29897669],"length":1,"stats":{"Line":1}},{"line":38,"address":[56234787],"length":1,"stats":{"Line":0}},{"line":39,"address":[78582965],"length":1,"stats":{"Line":1}},{"line":40,"address":[27400512],"length":1,"stats":{"Line":0}},{"line":42,"address":[73216320],"length":1,"stats":{"Line":1}},{"line":44,"address":[17229648],"length":1,"stats":{"Line":1}},{"line":46,"address":[30454254,30454212],"length":1,"stats":{"Line":0}},{"line":48,"address":[47176049],"length":1,"stats":{"Line":0}},{"line":49,"address":[75417035,75417000],"length":1,"stats":{"Line":0}},{"line":50,"address":[32682180],"length":1,"stats":{"Line":0}},{"line":51,"address":[47066843,47063939,47063963,47066819],"length":1,"stats":{"Line":1}},{"line":52,"address":[30454466],"length":1,"stats":{"Line":0}},{"line":54,"address":[27379444],"length":1,"stats":{"Line":2}},{"line":55,"address":[73658465],"length":1,"stats":{"Line":0}},{"line":57,"address":[57016856,57016684,57016744],"length":1,"stats":{"Line":0}},{"line":58,"address":[56541218,56541084],"length":1,"stats":{"Line":0}},{"line":59,"address":[73216494],"length":1,"stats":{"Line":0}},{"line":61,"address":[47176128],"length":1,"stats":{"Line":0}},{"line":62,"address":[73216512],"length":1,"stats":{"Line":0}},{"line":64,"address":[19612208],"length":1,"stats":{"Line":0}},{"line":66,"address":[29899024],"length":1,"stats":{"Line":0}},{"line":70,"address":[44836419,44836367,44839247,44839299],"length":1,"stats":{"Line":0}},{"line":71,"address":[56585632],"length":1,"stats":{"Line":0}},{"line":74,"address":[17231299],"length":1,"stats":{"Line":0}},{"line":75,"address":[12652461,12652382,12655571],"length":1,"stats":{"Line":0}},{"line":76,"address":[27379621],"length":1,"stats":{"Line":0}},{"line":79,"address":[48394896,48394920],"length":1,"stats":{"Line":1}},{"line":80,"address":[48394900],"length":1,"stats":{"Line":1}},{"line":81,"address":[79100267],"length":1,"stats":{"Line":2}},{"line":84,"address":[47067339,47064452],"length":1,"stats":{"Line":2}},{"line":87,"address":[56247320,56252979,56246951,56249000],"length":1,"stats":{"Line":1}},{"line":88,"address":[75416517,75416443],"length":1,"stats":{"Line":1}},{"line":89,"address":[47088917,47086837],"length":1,"stats":{"Line":1}},{"line":92,"address":[83524288,83524640,83524993],"length":1,"stats":{"Line":0}},{"line":93,"address":[61254272,61253376,61254048,61253600,61254384,61254496,61253152,61253264,61253488,61253712,61253824,61253936,61254160],"length":1,"stats":{"Line":0}},{"line":95,"address":[83694640],"length":1,"stats":{"Line":0}},{"line":98,"address":[62889920],"length":1,"stats":{"Line":2}},{"line":99,"address":[87633937,87634292,87634789],"length":1,"stats":{"Line":2}},{"line":102,"address":[71071544],"length":1,"stats":{"Line":1}},{"line":105,"address":[24381648],"length":1,"stats":{"Line":2}},{"line":106,"address":[35150662],"length":1,"stats":{"Line":4}},{"line":107,"address":[14290285],"length":1,"stats":{"Line":3}},{"line":108,"address":[83525456,83524160,83524224,83524192],"length":1,"stats":{"Line":6}},{"line":114,"address":[52658789,52658814,52658715],"length":1,"stats":{"Line":1}},{"line":115,"address":[66359212],"length":1,"stats":{"Line":1}},{"line":118,"address":[51962050],"length":1,"stats":{"Line":0}},{"line":120,"address":[75838247],"length":1,"stats":{"Line":0}},{"line":121,"address":[63801294,63801190],"length":1,"stats":{"Line":0}}],"covered":24,"coverable":53},{"path":["/","home","patrick","Workspaces","podpico","src-tauri","src","main.rs"],"content":"// Prevents additional console window on Windows in release, DO NOT REMOVE!!\n#![cfg_attr(not(debug_assertions), windows_subsystem = \"windows\")]\n\nfn main() {\n    podpico_lib::run()\n}\n","traces":[{"line":4,"address":[7964416],"length":1,"stats":{"Line":0}},{"line":5,"address":[7964417],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":2},{"path":["/","home","patrick","Workspaces","podpico","src-tauri","src","rss_manager.rs"],"content":"// RSS feed management module for PodPico\n// Handles RSS feed parsing, validation, and episode extraction\n// User Story #1: Add new podcast subscription via RSS URL\n\nuse crate::error::PodPicoError;\nuse reqwest;\nuse rss::Channel;\nuse std::time::Duration;\nuse tokio::time::timeout;\n\npub struct RssManager {\n    client: reqwest::Client,\n}\n\nimpl Default for RssManager {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\nimpl RssManager {\n    pub fn new() -\u003e Self {\n        Self {\n            client: reqwest::Client::builder()\n                .timeout(Duration::from_secs(10))\n                .build()\n                .unwrap_or_else(|_| reqwest::Client::new()),\n        }\n    }\n\n    pub fn clone_manager(\u0026self) -\u003e Self {\n        Self {\n            client: self.client.clone(),\n        }\n    }\n\n    pub async fn validate_feed(\u0026self, rss_url: \u0026str) -\u003e Result\u003cbool, PodPicoError\u003e {\n        log::info!(\"Validating RSS feed: {} (User Story #1)\", rss_url);\n\n        // User Story #1 Acceptance Criteria: Validate feed within 5 seconds\n        let validation_timeout = Duration::from_secs(5);\n\n        let validation_result = timeout(\n            validation_timeout,\n            self.fetch_and_validate_internal(rss_url),\n        )\n        .await;\n\n        match validation_result {\n            Ok(Ok(_)) =\u003e {\n                log::info!(\"RSS feed validation successful for: {}\", rss_url);\n                Ok(true)\n            }\n            Ok(Err(e)) =\u003e {\n                log::warn!(\"RSS feed validation failed for {}: {}\", rss_url, e);\n                Err(e)\n            }\n            Err(_) =\u003e {\n                log::error!(\n                    \"RSS feed validation timed out after 5 seconds for: {}\",\n                    rss_url\n                );\n                Err(PodPicoError::InvalidRssUrl(\n                    \"Feed validation timed out after 5 seconds\".to_string(),\n                ))\n            }\n        }\n    }\n\n    async fn fetch_and_validate_internal(\u0026self, rss_url: \u0026str) -\u003e Result\u003cChannel, PodPicoError\u003e {\n        // Basic URL validation\n        if rss_url.trim().is_empty() {\n            return Err(PodPicoError::InvalidRssUrl(\n                \"Empty URL provided\".to_string(),\n            ));\n        }\n\n        if !rss_url.starts_with(\"http://\") \u0026\u0026 !rss_url.starts_with(\"https://\") {\n            return Err(PodPicoError::InvalidRssUrl(\n                \"URL must start with http:// or https://\".to_string(),\n            ));\n        }\n\n        // Fetch the RSS feed\n        let response =\n            self.client.get(rss_url).send().await.map_err(|e| {\n                PodPicoError::NetworkError(format!(\"Failed to fetch RSS feed: {}\", e))\n            })?;\n\n        if !response.status().is_success() {\n            return Err(PodPicoError::NetworkError(format!(\n                \"HTTP error {}: {}\",\n                response.status(),\n                response\n                    .status()\n                    .canonical_reason()\n                    .unwrap_or(\"Unknown error\")\n            )));\n        }\n\n        let content = response\n            .text()\n            .await\n            .map_err(|e| PodPicoError::NetworkError(format!(\"Failed to read response: {}\", e)))?;\n\n        // Parse RSS content\n        let channel = Channel::read_from(content.as_bytes())\n            .map_err(|e| PodPicoError::InvalidRssUrl(format!(\"Invalid RSS format: {}\", e)))?;\n\n        // Basic validation - must have title and at least be parseable\n        if channel.title().trim().is_empty() {\n            return Err(PodPicoError::InvalidRssUrl(\n                \"RSS feed has no title\".to_string(),\n            ));\n        }\n\n        Ok(channel)\n    }\n\n    pub async fn fetch_feed(\u0026self, rss_url: \u0026str) -\u003e Result\u003cChannel, PodPicoError\u003e {\n        log::info!(\"Fetching RSS feed: {}\", rss_url);\n\n        // Use the same validation logic but without the 5-second timeout for actual fetching\n        self.fetch_and_validate_internal(rss_url).await\n    }\n\n    pub async fn validate_and_fetch_feed(\u0026self, rss_url: \u0026str) -\u003e Result\u003cChannel, PodPicoError\u003e {\n        log::info!(\n            \"Validating and fetching RSS feed: {} (User Story #1)\",\n            rss_url\n        );\n\n        // User Story #1 Acceptance Criteria: Validate feed within 5 seconds\n        let validation_timeout = Duration::from_secs(5);\n\n        let validation_result = timeout(\n            validation_timeout,\n            self.fetch_and_validate_internal(rss_url),\n        )\n        .await;\n\n        match validation_result {\n            Ok(Ok(channel)) =\u003e {\n                log::info!(\"RSS feed validation and fetch successful for: {}\", rss_url);\n                Ok(channel)\n            }\n            Ok(Err(e)) =\u003e {\n                log::warn!(\"RSS feed validation failed for {}: {}\", rss_url, e);\n                Err(e)\n            }\n            Err(_) =\u003e {\n                log::error!(\n                    \"RSS feed validation timed out after 5 seconds for: {}\",\n                    rss_url\n                );\n                Err(PodPicoError::InvalidRssUrl(\n                    \"Feed validation timed out after 5 seconds\".to_string(),\n                ))\n            }\n        }\n    }\n\n    pub async fn extract_podcast_info(\n        \u0026self,\n        channel: \u0026Channel,\n    ) -\u003e Result\u003c(String, Option\u003cString\u003e, Option\u003cString\u003e), PodPicoError\u003e {\n        log::info!(\"Extracting podcast information from RSS feed\");\n\n        let title = channel.title().to_string();\n        let description = if channel.description().trim().is_empty() {\n            None\n        } else {\n            Some(channel.description().to_string())\n        };\n\n        // Try to extract artwork URL from iTunes extension or image\n        let artwork_url = channel\n            .itunes_ext()\n            .and_then(|itunes| itunes.image())\n            .map(|s| s.to_string())\n            .or_else(|| channel.image().map(|img| img.url().to_string()));\n\n        Ok((title, description, artwork_url))\n    }\n\n    pub async fn extract_episodes(\n        \u0026self,\n        channel: \u0026Channel,\n    ) -\u003e Result\u003cVec\u003crss::Item\u003e, PodPicoError\u003e {\n        log::info!(\n            \"Extracting {} episodes from RSS feed\",\n            channel.items().len()\n        );\n\n        // Return clone of all items from the channel\n        Ok(channel.items().to_vec())\n    }\n\n    /// Extract website URL from RSS channel\n    pub fn extract_website_url(\u0026self, channel: \u0026Channel) -\u003e Option\u003cString\u003e {\n        if !channel.link().trim().is_empty() {\n            Some(channel.link().to_string())\n        } else {\n            None\n        }\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use httpmock::prelude::*;\n    use std::time::Instant;\n\n    #[test]\n    fn test_rss_manager_creation() {\n        let _rss_manager = RssManager::new();\n        // Just ensure it creates without panic - no assertion needed\n    }\n\n    #[tokio::test]\n    async fn test_user_story_1_valid_rss_url_validation() {\n        // User Story #1: Validate RSS feed within 5 seconds\n        let server = MockServer::start();\n        let rss_manager = RssManager::new();\n\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\" xmlns:itunes=\"http://www.itunes.com/dtds/podcast-1.0.dtd\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eTest Podcast\u003c/title\u003e\n            \u003cdescription\u003eA test podcast feed\u003c/description\u003e\n            \u003clink\u003ehttps://example.com\u003c/link\u003e\n            \u003clanguage\u003een-us\u003c/language\u003e\n            \u003citunes:image href=\"https://example.com/artwork.jpg\"/\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eTest Episode\u003c/title\u003e\n                \u003cdescription\u003eA test episode\u003c/description\u003e\n                \u003cenclosure url=\"https://example.com/episode.mp3\" type=\"audio/mpeg\" length=\"1000000\"/\u003e\n                \u003cpubDate\u003eMon, 01 Jan 2023 00:00:00 +0000\u003c/pubDate\u003e\n                \u003citunes:duration\u003e30:00\u003c/itunes:duration\u003e\n            \u003c/item\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/feed.xml\");\n            then.status(200)\n                .header(\"content-type\", \"application/rss+xml\")\n                .body(mock_feed);\n        });\n\n        let url = \u0026server.url(\"/feed.xml\");\n        let start_time = Instant::now();\n\n        let result = rss_manager.validate_feed(url).await;\n        let elapsed = start_time.elapsed();\n\n        assert!(result.is_ok());\n        assert!(result.unwrap());\n        assert!(elapsed.as_secs() \u003c 5); // Acceptance criteria: within 5 seconds\n        mock.assert();\n    }\n\n    #[tokio::test]\n    async fn test_user_story_1_timeout_validation() {\n        // User Story #1: Validate RSS feed times out after 5 seconds\n        let server = MockServer::start();\n        let rss_manager = RssManager::new();\n\n        let _mock = server.mock(|when, then| {\n            when.method(GET).path(\"/slow-feed.xml\");\n            then.status(200)\n                .delay(std::time::Duration::from_secs(6)) // Longer than 5 second timeout\n                .body(\"delayed response\");\n        });\n\n        let url = \u0026server.url(\"/slow-feed.xml\");\n        let start_time = Instant::now();\n\n        let result = rss_manager.validate_feed(url).await;\n        let elapsed = start_time.elapsed();\n\n        assert!(result.is_err());\n        assert!(elapsed.as_secs() \u003e= 5 \u0026\u0026 elapsed.as_secs() \u003c 7); // Should timeout at 5 seconds\n\n        if let Err(PodPicoError::InvalidRssUrl(msg)) = result {\n            assert!(msg.contains(\"timed out\"));\n        } else {\n            panic!(\"Expected InvalidRssUrl timeout error\");\n        }\n        // Note: mock.assert() not called because request times out before reaching mock\n    }\n\n    #[tokio::test]\n    async fn test_validate_feed_empty_url() {\n        let rss_manager = RssManager::new();\n\n        let result = rss_manager.validate_feed(\"\").await;\n        assert!(result.is_err());\n\n        if let Err(PodPicoError::InvalidRssUrl(msg)) = result {\n            assert!(msg.contains(\"Empty URL\"));\n        } else {\n            panic!(\"Expected InvalidRssUrl error for empty URL\");\n        }\n    }\n\n    #[tokio::test]\n    async fn test_validate_feed_invalid_protocol() {\n        let rss_manager = RssManager::new();\n\n        let result = rss_manager\n            .validate_feed(\"ftp://example.com/feed.xml\")\n            .await;\n        assert!(result.is_err());\n\n        if let Err(PodPicoError::InvalidRssUrl(msg)) = result {\n            assert!(msg.contains(\"must start with http://\"));\n        } else {\n            panic!(\"Expected InvalidRssUrl error for invalid protocol\");\n        }\n    }\n\n    #[tokio::test]\n    async fn test_validate_feed_http_error() {\n        let server = MockServer::start();\n        let rss_manager = RssManager::new();\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/not-found.xml\");\n            then.status(404);\n        });\n\n        let url = \u0026server.url(\"/not-found.xml\");\n        let result = rss_manager.validate_feed(url).await;\n\n        assert!(result.is_err());\n        if let Err(PodPicoError::NetworkError(msg)) = result {\n            assert!(msg.contains(\"HTTP error 404\"));\n        } else {\n            panic!(\"Expected NetworkError for 404 response\");\n        }\n        mock.assert();\n    }\n\n    #[tokio::test]\n    async fn test_validate_feed_invalid_xml() {\n        let server = MockServer::start();\n        let rss_manager = RssManager::new();\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/invalid.xml\");\n            then.status(200)\n                .header(\"content-type\", \"text/html\")\n                .body(\"\u003chtml\u003e\u003cbody\u003eNot RSS\u003c/body\u003e\u003c/html\u003e\");\n        });\n\n        let url = \u0026server.url(\"/invalid.xml\");\n        let result = rss_manager.validate_feed(url).await;\n\n        assert!(result.is_err());\n        if let Err(PodPicoError::InvalidRssUrl(msg)) = result {\n            assert!(msg.contains(\"Invalid RSS format\"));\n        } else {\n            panic!(\"Expected InvalidRssUrl error for invalid XML\");\n        }\n        mock.assert();\n    }\n\n    #[tokio::test]\n    async fn test_validate_feed_no_title() {\n        let server = MockServer::start();\n        let rss_manager = RssManager::new();\n\n        let feed_without_title = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003e\u003c/title\u003e\n            \u003cdescription\u003eNo title\u003c/description\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/no-title.xml\");\n            then.status(200)\n                .header(\"content-type\", \"application/rss+xml\")\n                .body(feed_without_title);\n        });\n\n        let url = \u0026server.url(\"/no-title.xml\");\n        let result = rss_manager.validate_feed(url).await;\n\n        assert!(result.is_err());\n        if let Err(PodPicoError::InvalidRssUrl(msg)) = result {\n            assert!(msg.contains(\"no title\"));\n        } else {\n            panic!(\"Expected InvalidRssUrl error for missing title\");\n        }\n        mock.assert();\n    }\n\n    #[tokio::test]\n    async fn test_fetch_feed_success() {\n        let server = MockServer::start();\n        let rss_manager = RssManager::new();\n\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eTest Podcast\u003c/title\u003e\n            \u003cdescription\u003eA test podcast\u003c/description\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/feed.xml\");\n            then.status(200)\n                .header(\"content-type\", \"application/rss+xml\")\n                .body(mock_feed);\n        });\n\n        let url = \u0026server.url(\"/feed.xml\");\n        let result = rss_manager.fetch_feed(url).await;\n\n        assert!(result.is_ok());\n        let channel = result.unwrap();\n        assert_eq!(channel.title(), \"Test Podcast\");\n        assert_eq!(channel.description(), \"A test podcast\");\n        mock.assert();\n    }\n\n    #[tokio::test]\n    async fn test_extract_podcast_info_complete() {\n        let rss_manager = RssManager::new();\n\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\" xmlns:itunes=\"http://www.itunes.com/dtds/podcast-1.0.dtd\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eTest Podcast\u003c/title\u003e\n            \u003cdescription\u003eA comprehensive test podcast\u003c/description\u003e\n            \u003clink\u003ehttps://example.com\u003c/link\u003e\n            \u003citunes:image href=\"https://example.com/artwork.jpg\"/\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let channel = Channel::read_from(mock_feed.as_bytes()).unwrap();\n        let result = rss_manager.extract_podcast_info(\u0026channel).await;\n\n        assert!(result.is_ok());\n        let (title, description, artwork_url) = result.unwrap();\n\n        assert_eq!(title, \"Test Podcast\");\n        assert_eq!(\n            description,\n            Some(\"A comprehensive test podcast\".to_string())\n        );\n        assert_eq!(\n            artwork_url,\n            Some(\"https://example.com/artwork.jpg\".to_string())\n        );\n    }\n\n    #[tokio::test]\n    async fn test_extract_podcast_info_minimal() {\n        let rss_manager = RssManager::new();\n\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eMinimal Podcast\u003c/title\u003e\n            \u003cdescription\u003e\u003c/description\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let channel = Channel::read_from(mock_feed.as_bytes()).unwrap();\n        let result = rss_manager.extract_podcast_info(\u0026channel).await;\n\n        assert!(result.is_ok());\n        let (title, description, artwork_url) = result.unwrap();\n\n        assert_eq!(title, \"Minimal Podcast\");\n        assert_eq!(description, None); // Empty description should be None\n        assert_eq!(artwork_url, None);\n    }\n\n    #[tokio::test]\n    async fn test_extract_episodes() {\n        let rss_manager = RssManager::new();\n\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\" xmlns:itunes=\"http://www.itunes.com/dtds/podcast-1.0.dtd\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eTest Podcast\u003c/title\u003e\n            \u003cdescription\u003eTest\u003c/description\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eEpisode 1\u003c/title\u003e\n                \u003cdescription\u003eFirst episode\u003c/description\u003e\n                \u003cenclosure url=\"https://example.com/ep1.mp3\" type=\"audio/mpeg\" length=\"1000000\"/\u003e\n                \u003cpubDate\u003eMon, 01 Jan 2023 00:00:00 +0000\u003c/pubDate\u003e\n                \u003citunes:duration\u003e30:00\u003c/itunes:duration\u003e\n            \u003c/item\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eEpisode 2\u003c/title\u003e\n                \u003cdescription\u003eSecond episode\u003c/description\u003e\n                \u003cenclosure url=\"https://example.com/ep2.mp3\" type=\"audio/mpeg\" length=\"2000000\"/\u003e\n                \u003cpubDate\u003eTue, 02 Jan 2023 00:00:00 +0000\u003c/pubDate\u003e\n                \u003citunes:duration\u003e45:30\u003c/itunes:duration\u003e\n            \u003c/item\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let channel = Channel::read_from(mock_feed.as_bytes()).unwrap();\n        let result = rss_manager.extract_episodes(\u0026channel).await;\n\n        assert!(result.is_ok());\n        let episodes = result.unwrap();\n\n        assert_eq!(episodes.len(), 2);\n        assert_eq!(episodes[0].title(), Some(\"Episode 1\"));\n        assert_eq!(episodes[1].title(), Some(\"Episode 2\"));\n    }\n\n    #[tokio::test]\n    async fn test_extract_website_url() {\n        let rss_manager = RssManager::new();\n\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eTest Podcast\u003c/title\u003e\n            \u003cdescription\u003eTest\u003c/description\u003e\n            \u003clink\u003ehttps://example.com/podcast\u003c/link\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let channel = Channel::read_from(mock_feed.as_bytes()).unwrap();\n        let website_url = rss_manager.extract_website_url(\u0026channel);\n\n        assert_eq!(website_url, Some(\"https://example.com/podcast\".to_string()));\n    }\n\n    #[tokio::test]\n    async fn test_extract_website_url_empty() {\n        let rss_manager = RssManager::new();\n\n        let mock_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eTest Podcast\u003c/title\u003e\n            \u003cdescription\u003eTest\u003c/description\u003e\n            \u003clink\u003e\u003c/link\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let channel = Channel::read_from(mock_feed.as_bytes()).unwrap();\n        let website_url = rss_manager.extract_website_url(\u0026channel);\n\n        assert_eq!(website_url, None);\n    }\n\n    #[tokio::test]\n    async fn test_user_story_1_acceptance_criteria_complete() {\n        // Complete User Story #1 acceptance criteria test\n        let server = MockServer::start();\n        let rss_manager = RssManager::new();\n\n        let complete_feed = r#\"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n        \u003crss version=\"2.0\" xmlns:itunes=\"http://www.itunes.com/dtds/podcast-1.0.dtd\"\u003e\n        \u003cchannel\u003e\n            \u003ctitle\u003eComplete Test Podcast\u003c/title\u003e\n            \u003cdescription\u003eA complete test podcast with all metadata\u003c/description\u003e\n            \u003clink\u003ehttps://example.com/podcast\u003c/link\u003e\n            \u003clanguage\u003een-us\u003c/language\u003e\n            \u003citunes:image href=\"https://example.com/artwork.jpg\"/\u003e\n            \u003cimage\u003e\n                \u003curl\u003ehttps://example.com/fallback-art.jpg\u003c/url\u003e\n                \u003ctitle\u003eComplete Test Podcast\u003c/title\u003e\n                \u003clink\u003ehttps://example.com/podcast\u003c/link\u003e\n            \u003c/image\u003e\n            \u003citem\u003e\n                \u003ctitle\u003eComplete Episode\u003c/title\u003e\n                \u003cdescription\u003eA complete episode with all metadata\u003c/description\u003e\n                \u003cenclosure url=\"https://example.com/episode.mp3\" type=\"audio/mpeg\" length=\"25000000\"/\u003e\n                \u003cpubDate\u003eMon, 01 Jan 2023 12:00:00 +0000\u003c/pubDate\u003e\n                \u003citunes:duration\u003e1:23:45\u003c/itunes:duration\u003e\n            \u003c/item\u003e\n        \u003c/channel\u003e\n        \u003c/rss\u003e\"#;\n\n        let mock = server.mock(|when, then| {\n            when.method(GET).path(\"/complete-feed.xml\");\n            then.status(200)\n                .header(\"content-type\", \"application/rss+xml\")\n                .body(complete_feed);\n        });\n\n        let url = \u0026server.url(\"/complete-feed.xml\");\n\n        // Test acceptance criteria: Validation and fetch within 5 seconds\n        let start_time = Instant::now();\n        let channel = rss_manager.validate_and_fetch_feed(url).await.unwrap();\n        let validation_time = start_time.elapsed();\n\n        assert!(validation_time.as_secs() \u003c 5);\n\n        // Test acceptance criteria: Complete podcast info extraction\n        let (title, description, artwork_url) =\n            rss_manager.extract_podcast_info(\u0026channel).await.unwrap();\n        let website_url = rss_manager.extract_website_url(\u0026channel);\n        let episodes = rss_manager.extract_episodes(\u0026channel).await.unwrap();\n\n        // Verify all metadata extracted correctly\n        assert_eq!(title, \"Complete Test Podcast\");\n        assert_eq!(\n            description,\n            Some(\"A complete test podcast with all metadata\".to_string())\n        );\n        assert_eq!(\n            artwork_url,\n            Some(\"https://example.com/artwork.jpg\".to_string())\n        );\n        assert_eq!(website_url, Some(\"https://example.com/podcast\".to_string()));\n        assert_eq!(episodes.len(), 1);\n        assert_eq!(episodes[0].title(), Some(\"Complete Episode\"));\n\n        mock.assert();\n    }\n}\n","traces":[{"line":16,"address":[12321296],"length":1,"stats":{"Line":0}},{"line":17,"address":[11538401],"length":1,"stats":{"Line":0}},{"line":22,"address":[11538597,11538416,11538629],"length":1,"stats":{"Line":1}},{"line":24,"address":[11538423,11538520,11538560],"length":1,"stats":{"Line":3}},{"line":31,"address":[11538640],"length":1,"stats":{"Line":1}},{"line":33,"address":[11538645],"length":1,"stats":{"Line":1}},{"line":37,"address":[12321570,12321552],"length":1,"stats":{"Line":4}},{"line":38,"address":[13088122,13087977,13088158],"length":1,"stats":{"Line":3}},{"line":41,"address":[13088469,13088133],"length":1,"stats":{"Line":2}},{"line":45,"address":[13088498],"length":1,"stats":{"Line":1}},{"line":47,"address":[13088619,13088706,13088052,13088656,13088945],"length":1,"stats":{"Line":4}},{"line":49,"address":[13089046,13088964],"length":1,"stats":{"Line":2}},{"line":51,"address":[13089288,13089176,13089325],"length":1,"stats":{"Line":3}},{"line":52,"address":[13089294],"length":1,"stats":{"Line":1}},{"line":54,"address":[13089083],"length":1,"stats":{"Line":1}},{"line":55,"address":[13089131,13089685,13089748],"length":1,"stats":{"Line":3}},{"line":56,"address":[13089691],"length":1,"stats":{"Line":1}},{"line":59,"address":[13090107,13090067,13089001],"length":1,"stats":{"Line":3}},{"line":63,"address":[13090375],"length":1,"stats":{"Line":1}},{"line":64,"address":[13090073],"length":1,"stats":{"Line":1}},{"line":70,"address":[11538722,11538704],"length":1,"stats":{"Line":4}},{"line":72,"address":[13091094,13090944],"length":1,"stats":{"Line":2}},{"line":73,"address":[13091663],"length":1,"stats":{"Line":1}},{"line":74,"address":[13091167],"length":1,"stats":{"Line":1}},{"line":78,"address":[13091137,13091208,13091309],"length":1,"stats":{"Line":3}},{"line":79,"address":[13091346],"length":1,"stats":{"Line":1}},{"line":80,"address":[13091315],"length":1,"stats":{"Line":1}},{"line":85,"address":[8224447],"length":1,"stats":{"Line":4}},{"line":87,"address":[13094403,13094451],"length":1,"stats":{"Line":0}},{"line":90,"address":[13262112,13262032],"length":1,"stats":{"Line":2}},{"line":91,"address":[13092546,13092712],"length":1,"stats":{"Line":2}},{"line":93,"address":[13092403,13092522],"length":1,"stats":{"Line":2}},{"line":94,"address":[13092553],"length":1,"stats":{"Line":1}},{"line":101,"address":[13093262,13093447,13093012,13094303,13092430,13093332],"length":1,"stats":{"Line":4}},{"line":103,"address":[13812098],"length":1,"stats":{"Line":3}},{"line":104,"address":[13094659,13093399,13094624],"length":1,"stats":{"Line":0}},{"line":107,"address":[13093623,13093773,13093552,13094301],"length":1,"stats":{"Line":4}},{"line":108,"address":[13094880,13093725,13094910],"length":1,"stats":{"Line":3}},{"line":111,"address":[13093886,13093961],"length":1,"stats":{"Line":2}},{"line":112,"address":[13094144],"length":1,"stats":{"Line":1}},{"line":113,"address":[13094096],"length":1,"stats":{"Line":1}},{"line":117,"address":[13094051],"length":1,"stats":{"Line":1}},{"line":120,"address":[11538770,11538752],"length":1,"stats":{"Line":4}},{"line":121,"address":[13095281,13095450,13095408],"length":1,"stats":{"Line":3}},{"line":124,"address":[13095715,13095344,13095796,13095419],"length":1,"stats":{"Line":3}},{"line":127,"address":[13265904,13265996,13266811,13266157,13266200,13267770],"length":1,"stats":{"Line":4}},{"line":128,"address":[13096401,13096437,13096256],"length":1,"stats":{"Line":3}},{"line":134,"address":[13096736,13096412],"length":1,"stats":{"Line":2}},{"line":138,"address":[13096765],"length":1,"stats":{"Line":1}},{"line":140,"address":[13266187,13267036,13266837,13266726,13266783],"length":1,"stats":{"Line":4}},{"line":142,"address":[13097257,13097175],"length":1,"stats":{"Line":2}},{"line":143,"address":[13267299],"length":1,"stats":{"Line":1}},{"line":144,"address":[13097507,13097417,13097570],"length":1,"stats":{"Line":3}},{"line":145,"address":[13267397],"length":1,"stats":{"Line":1}},{"line":147,"address":[13097294],"length":1,"stats":{"Line":1}},{"line":148,"address":[13267826,13267911,13267226],"length":1,"stats":{"Line":3}},{"line":149,"address":[13097944],"length":1,"stats":{"Line":1}},{"line":152,"address":[13097212,13098364,13098404],"length":1,"stats":{"Line":0}},{"line":156,"address":[13098674],"length":1,"stats":{"Line":0}},{"line":157,"address":[13098370],"length":1,"stats":{"Line":0}},{"line":163,"address":[12321744],"length":1,"stats":{"Line":1}},{"line":167,"address":[13098993,13099114,13099152],"length":1,"stats":{"Line":3}},{"line":169,"address":[13269016,13269265],"length":1,"stats":{"Line":2}},{"line":170,"address":[13099404,13099479,13099574],"length":1,"stats":{"Line":3}},{"line":171,"address":[13269444],"length":1,"stats":{"Line":1}},{"line":173,"address":[13099586,13099535],"length":1,"stats":{"Line":2}},{"line":177,"address":[13099726,13099661],"length":1,"stats":{"Line":2}},{"line":179,"address":[13100169,13100160],"length":1,"stats":{"Line":2}},{"line":180,"address":[13100192,13100214],"length":1,"stats":{"Line":2}},{"line":181,"address":[13100334,13100240,13100258,13100304],"length":1,"stats":{"Line":2}},{"line":183,"address":[13099799],"length":1,"stats":{"Line":1}},{"line":186,"address":[11538880],"length":1,"stats":{"Line":1}},{"line":190,"address":[13100576,13100702,13100470,13100611],"length":1,"stats":{"Line":3}},{"line":196,"address":[13100587,13100909],"length":1,"stats":{"Line":2}},{"line":200,"address":[11538912],"length":1,"stats":{"Line":1}},{"line":201,"address":[11539037,11538949],"length":1,"stats":{"Line":2}},{"line":202,"address":[11538986],"length":1,"stats":{"Line":1}},{"line":204,"address":[11539044],"length":1,"stats":{"Line":1}}],"covered":71,"coverable":78},{"path":["/","home","patrick","Workspaces","podpico","src-tauri","src","usb_manager.rs"],"content":"// USB device management module for PodPico\n// Handles USB device detection, mounting, and file operations\n\nuse crate::commands::UsbDevice;\nuse crate::error::PodPicoError;\nuse std::collections::HashMap;\nuse std::path::{Path, PathBuf};\nuse std::sync::Arc;\nuse sysinfo::{Disks, System};\nuse tokio::fs;\nuse tokio::io::{AsyncReadExt, AsyncWriteExt};\nuse tokio::sync::Mutex;\n\n#[derive(Debug, Clone)]\npub struct TransferProgress {\n    pub episode_id: i64,\n    pub device_id: String,\n    pub total_bytes: u64,\n    pub transferred_bytes: u64,\n    pub percentage: f64,\n    pub speed_bytes_per_sec: f64,\n    pub eta_seconds: Option\u003cu64\u003e,\n    pub status: TransferStatus,\n}\n\n#[derive(Debug, Clone, PartialEq)]\npub enum TransferStatus {\n    Pending,\n    InProgress,\n    Completed,\n    Failed(String),\n    Cancelled,\n}\n\npub struct UsbManager {\n    _system: System,\n    transfers: Arc\u003cMutex\u003cHashMap\u003cString, TransferProgress\u003e\u003e\u003e, // Key: episode_id_device_id\n}\n\nimpl Default for UsbManager {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\nimpl UsbManager {\n    pub fn new() -\u003e Self {\n        Self {\n            _system: System::new_all(),\n            transfers: Arc::new(Mutex::new(HashMap::new())),\n        }\n    }\n\n    pub fn clone_manager(\u0026self) -\u003e Self {\n        Self::new()\n    }\n\n    /// User Story #8: See USB device storage capacity\n    /// Detects connected USB devices and returns their information\n    pub fn detect_devices(\u0026mut self) -\u003e Result\u003cVec\u003cUsbDevice\u003e, PodPicoError\u003e {\n        log::info!(\"Detecting USB devices (User Story #8)\");\n\n        let disks = Disks::new_with_refreshed_list();\n        let mut usb_devices = Vec::new();\n\n        for disk in \u0026disks {\n            // Filter for removable devices (USB drives)\n            // We identify USB devices by checking if they're removable and not the main system disk\n            if self.is_usb_device(disk) {\n                let device_name = disk.name().to_string_lossy().to_string();\n                let mount_point = disk.mount_point().to_string_lossy().to_string();\n\n                // Generate a unique ID based on name and mount point\n                let device_id = format!(\n                    \"{}_{}\",\n                    device_name.replace([' ', '/'], \"_\"),\n                    mount_point.replace(['/', '\\\\'], \"_\")\n                );\n\n                let usb_device = UsbDevice {\n                    id: device_id,\n                    name: if device_name.is_empty() {\n                        \"USB Device\".to_string()\n                    } else {\n                        device_name\n                    },\n                    path: mount_point,\n                    total_space: disk.total_space(),\n                    available_space: disk.available_space(),\n                    is_connected: true,\n                };\n\n                usb_devices.push(usb_device);\n            }\n        }\n\n        log::info!(\"Found {} USB devices\", usb_devices.len());\n        Ok(usb_devices)\n    }\n\n    /// Helper function to determine if a disk is likely a USB device\n    fn is_usb_device(\u0026self, disk: \u0026sysinfo::Disk) -\u003e bool {\n        let mount_point = disk.mount_point().to_string_lossy().to_lowercase();\n        let name = disk.name().to_string_lossy().to_lowercase();\n\n        // Common USB mount points and device indicators\n        let usb_indicators = [\n            \"/media/\",\n            \"/mnt/\",\n            \"/run/media/\", // Linux\n            \"usb\",\n            \"removable\",\n            \"external\",\n            // Exclude system directories\n        ];\n\n        let system_paths = [\n            \"/\", \"/boot\", \"/home\", \"/var\", \"/usr\", \"/opt\", \"/tmp\", \"c:\\\\\",\n            \"d:\\\\\", // Common system drives on Windows\n        ];\n\n        // Check if it looks like a USB device\n        let looks_like_usb = usb_indicators\n            .iter()\n            .any(|indicator| mount_point.contains(indicator) || name.contains(indicator));\n\n        // Make sure it's not a system path\n        let is_system_path = system_paths\n            .iter()\n            .any(|path| mount_point.starts_with(path) \u0026\u0026 mount_point.len() \u003c= path.len() + 5);\n\n        // USB devices typically have available space \u003e 0 and total space \u003e 0\n        let has_valid_space = disk.total_space() \u003e 0 \u0026\u0026 disk.available_space() \u003e 0;\n\n        looks_like_usb \u0026\u0026 !is_system_path \u0026\u0026 has_valid_space\n    }\n\n    pub fn get_device_info(\u0026self, device_path: \u0026str) -\u003e Result\u003cUsbDevice, PodPicoError\u003e {\n        log::info!(\"Getting device info for: {} (User Story #8)\", device_path);\n\n        let disks = Disks::new_with_refreshed_list();\n\n        for disk in \u0026disks {\n            if disk.mount_point().to_string_lossy() == device_path {\n                let device_name = disk.name().to_string_lossy().to_string();\n                let device_id = format!(\n                    \"{}_{}\",\n                    device_name.replace([' ', '/'], \"_\"),\n                    device_path.replace(['/', '\\\\'], \"_\")\n                );\n\n                return Ok(UsbDevice {\n                    id: device_id,\n                    name: if device_name.is_empty() {\n                        \"USB Device\".to_string()\n                    } else {\n                        device_name\n                    },\n                    path: device_path.to_string(),\n                    total_space: disk.total_space(),\n                    available_space: disk.available_space(),\n                    is_connected: true,\n                });\n            }\n        }\n\n        Err(PodPicoError::UsbDeviceNotFound(device_path.to_string()))\n    }\n\n    /// User Story #9: Transfer episodes to USB device\n    /// Transfers a file from source path to USB device with progress tracking\n    pub async fn transfer_file(\n        \u0026self,\n        source_path: \u0026str,\n        device_path: \u0026str,\n        filename: \u0026str,\n    ) -\u003e Result\u003c(), PodPicoError\u003e {\n        log::info!(\n            \"Transferring file {} to device {} (User Story #9)\",\n            filename,\n            device_path\n        );\n\n        // User Story #9 Acceptance Criteria: Progress indicator appears immediately\n        let transfer_key = format!(\"{}_{}\", source_path, device_path);\n        let mut transfers = self.transfers.lock().await;\n        transfers.insert(\n            transfer_key.clone(),\n            TransferProgress {\n                episode_id: 0, // Will be set by caller\n                device_id: device_path.to_string(),\n                total_bytes: 0,\n                transferred_bytes: 0,\n                percentage: 0.0,\n                speed_bytes_per_sec: 0.0,\n                eta_seconds: None,\n                status: TransferStatus::Pending,\n            },\n        );\n        drop(transfers);\n\n        // User Story #9 Acceptance Criteria: Check source file exists\n        let source_path_buf = PathBuf::from(source_path);\n        if !source_path_buf.exists() {\n            self.update_transfer_status(\n                \u0026transfer_key,\n                TransferStatus::Failed(format!(\"Source file not found: {}\", source_path)),\n            )\n            .await;\n            return Err(PodPicoError::FileTransferFailed(format!(\n                \"Source file not found: {}\",\n                source_path\n            )));\n        }\n\n        // User Story #9 Acceptance Criteria: Check USB device exists and is accessible\n        let device_path_buf = PathBuf::from(device_path);\n        if !device_path_buf.exists() {\n            self.update_transfer_status(\n                \u0026transfer_key,\n                TransferStatus::Failed(format!(\"USB device not found: {}\", device_path)),\n            )\n            .await;\n            return Err(PodPicoError::UsbDeviceNotFound(device_path.to_string()));\n        }\n\n        // Get file size for progress tracking\n        let metadata = fs::metadata(\u0026source_path_buf).await.map_err(|e| {\n            PodPicoError::FileTransferFailed(format!(\"Cannot read source file: {}\", e))\n        })?;\n        let file_size = metadata.len();\n\n        // User Story #9 Acceptance Criteria: Check available space before transfer\n        if let Ok(device_info) = self.get_device_info(device_path) {\n            if device_info.available_space \u003c file_size {\n                let error_msg = format!(\n                    \"Insufficient space on USB device. Need {} bytes, available {} bytes\",\n                    file_size, device_info.available_space\n                );\n                self.update_transfer_status(\n                    \u0026transfer_key,\n                    TransferStatus::Failed(error_msg.clone()),\n                )\n                .await;\n                return Err(PodPicoError::FileTransferFailed(error_msg));\n            }\n        }\n\n        // Create podcast directory on USB device for organization\n        let usb_podcast_dir = device_path_buf.join(\"PodPico\");\n        fs::create_dir_all(\u0026usb_podcast_dir).await.map_err(|e| {\n            PodPicoError::FileTransferFailed(format!(\"Cannot create directory on USB: {}\", e))\n        })?;\n\n        let destination_path = usb_podcast_dir.join(filename);\n\n        // Update progress to InProgress\n        self.update_transfer_progress(\u0026transfer_key, file_size, 0, TransferStatus::InProgress)\n            .await;\n\n        // User Story #9 Acceptance Criteria: Transfer with progress tracking and speed calculation\n        let result = self\n            .transfer_with_progress(\n                \u0026source_path_buf,\n                \u0026destination_path,\n                \u0026transfer_key,\n                file_size,\n            )\n            .await;\n\n        match result {\n            Ok(_) =\u003e {\n                self.update_transfer_status(\u0026transfer_key, TransferStatus::Completed)\n                    .await;\n                log::info!(\"Successfully transferred {} to USB device\", filename);\n                Ok(())\n            }\n            Err(e) =\u003e {\n                self.update_transfer_status(\u0026transfer_key, TransferStatus::Failed(e.to_string()))\n                    .await;\n                log::error!(\"Failed to transfer {}: {}\", filename, e);\n                Err(e)\n            }\n        }\n    }\n\n    /// Performs the actual file transfer with progress tracking\n    async fn transfer_with_progress(\n        \u0026self,\n        source_path: \u0026Path,\n        destination_path: \u0026Path,\n        transfer_key: \u0026str,\n        total_size: u64,\n    ) -\u003e Result\u003c(), PodPicoError\u003e {\n        let mut source_file = fs::File::open(source_path).await.map_err(|e| {\n            PodPicoError::FileTransferFailed(format!(\"Cannot open source file: {}\", e))\n        })?;\n\n        let mut dest_file = fs::File::create(destination_path).await.map_err(|e| {\n            PodPicoError::FileTransferFailed(format!(\"Cannot create destination file: {}\", e))\n        })?;\n\n        let mut buffer = vec![0u8; 64 * 1024]; // 64KB buffer for good performance\n        let mut transferred = 0u64;\n        let start_time = std::time::Instant::now();\n\n        while transferred \u003c total_size {\n            let bytes_read = source_file\n                .read(\u0026mut buffer)\n                .await\n                .map_err(|e| PodPicoError::FileTransferFailed(format!(\"Read error: {}\", e)))?;\n\n            if bytes_read == 0 {\n                break; // End of file\n            }\n\n            dest_file\n                .write_all(\u0026buffer[..bytes_read])\n                .await\n                .map_err(|e| PodPicoError::FileTransferFailed(format!(\"Write error: {}\", e)))?;\n\n            transferred += bytes_read as u64;\n\n            // User Story #9 Acceptance Criteria: Update progress with speed and ETA\n            let elapsed = start_time.elapsed();\n            let speed = if elapsed.as_secs() \u003e 0 {\n                transferred as f64 / elapsed.as_secs() as f64\n            } else {\n                0.0\n            };\n\n            let eta = if speed \u003e 0.0 {\n                Some(((total_size - transferred) as f64 / speed) as u64)\n            } else {\n                None\n            };\n\n            // Update progress every 64KB\n            self.update_transfer_progress_detailed(\n                transfer_key,\n                total_size,\n                transferred,\n                speed,\n                eta,\n                TransferStatus::InProgress,\n            )\n            .await;\n        }\n\n        // Ensure all data is written to disk\n        dest_file\n            .flush()\n            .await\n            .map_err(|e| PodPicoError::FileTransferFailed(format!(\"Flush error: {}\", e)))?;\n\n        Ok(())\n    }\n\n    /// Update transfer status\n    async fn update_transfer_status(\u0026self, transfer_key: \u0026str, status: TransferStatus) {\n        let mut transfers = self.transfers.lock().await;\n        if let Some(progress) = transfers.get_mut(transfer_key) {\n            progress.status = status;\n        }\n    }\n\n    /// Update transfer progress with size information\n    async fn update_transfer_progress(\n        \u0026self,\n        transfer_key: \u0026str,\n        total_bytes: u64,\n        transferred_bytes: u64,\n        status: TransferStatus,\n    ) {\n        let percentage = if total_bytes \u003e 0 {\n            (transferred_bytes as f64 / total_bytes as f64) * 100.0\n        } else {\n            0.0\n        };\n\n        let mut transfers = self.transfers.lock().await;\n        if let Some(progress) = transfers.get_mut(transfer_key) {\n            progress.total_bytes = total_bytes;\n            progress.transferred_bytes = transferred_bytes;\n            progress.percentage = percentage;\n            progress.status = status;\n        }\n    }\n\n    /// Update transfer progress with detailed information including speed and ETA\n    async fn update_transfer_progress_detailed(\n        \u0026self,\n        transfer_key: \u0026str,\n        total_bytes: u64,\n        transferred_bytes: u64,\n        speed_bytes_per_sec: f64,\n        eta_seconds: Option\u003cu64\u003e,\n        status: TransferStatus,\n    ) {\n        let percentage = if total_bytes \u003e 0 {\n            (transferred_bytes as f64 / total_bytes as f64) * 100.0\n        } else {\n            0.0\n        };\n\n        let mut transfers = self.transfers.lock().await;\n        if let Some(progress) = transfers.get_mut(transfer_key) {\n            progress.total_bytes = total_bytes;\n            progress.transferred_bytes = transferred_bytes;\n            progress.percentage = percentage;\n            progress.speed_bytes_per_sec = speed_bytes_per_sec;\n            progress.eta_seconds = eta_seconds;\n            progress.status = status;\n        }\n    }\n\n    /// Get current transfer progress\n    pub async fn get_transfer_progress(\u0026self, transfer_key: \u0026str) -\u003e Option\u003cTransferProgress\u003e {\n        let transfers = self.transfers.lock().await;\n        transfers.get(transfer_key).cloned()\n    }\n\n    /// User Story #10: Remove episodes from USB device\n    /// Removes a file from the USB device with proper error handling\n    pub async fn remove_file(\u0026self, device_path: \u0026str, filename: \u0026str) -\u003e Result\u003c(), PodPicoError\u003e {\n        log::info!(\n            \"Removing file {} from device {} (User Story #10)\",\n            filename,\n            device_path\n        );\n\n        // User Story #10 Acceptance Criteria: Validation before removal\n\n        // Step 1: Validate device path exists\n        let device_path_buf = PathBuf::from(device_path);\n        if !device_path_buf.exists() {\n            log::warn!(\n                \"USB device path not found: {} (User Story #10)\",\n                device_path\n            );\n            return Err(PodPicoError::UsbDeviceNotFound(device_path.to_string()));\n        }\n\n        // Step 2: Construct full file path in PodPico directory structure\n        let file_path = format!(\"{}/PodPico/{}\", device_path, filename);\n        let file_path_buf = PathBuf::from(\u0026file_path);\n\n        // Step 3: Check if file exists before attempting removal\n        if !file_path_buf.exists() {\n            log::warn!(\n                \"Episode file not found on device: {} (User Story #10)\",\n                file_path\n            );\n            return Err(PodPicoError::FileTransferFailed(format!(\n                \"Episode file '{}' not found on device\",\n                filename\n            )));\n        }\n\n        // Step 4: User Story #10 Acceptance Criteria: Remove file from USB device\n        match std::fs::remove_file(\u0026file_path_buf) {\n            Ok(()) =\u003e {\n                log::info!(\n                    \"Successfully removed episode file: {} (User Story #10)\",\n                    file_path\n                );\n                Ok(())\n            }\n            Err(e) =\u003e {\n                log::error!(\n                    \"Failed to remove episode file {}: {} (User Story #10)\",\n                    file_path,\n                    e\n                );\n                Err(PodPicoError::FileTransferFailed(format!(\n                    \"Failed to remove episode file '{}': {}\",\n                    filename, e\n                )))\n            }\n        }\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use std::time::Instant;\n\n    #[tokio::test]\n    async fn test_usb_manager_initialization() {\n        let _usb_manager = UsbManager::new();\n\n        // Initialization test - if we get here without panic, initialization worked\n        // No need for assert since the test would fail if initialization panicked\n    }\n\n    #[tokio::test]\n    async fn test_user_story_8_detect_devices_performance() {\n        // User Story #8 Acceptance Criteria: Detection within 5 seconds\n        let mut usb_manager = UsbManager::new();\n        let start_time = Instant::now();\n\n        let result = usb_manager.detect_devices();\n        let elapsed = start_time.elapsed();\n\n        assert!(result.is_ok(), \"USB device detection should not fail\");\n        assert!(\n            elapsed.as_secs() \u003c 5,\n            \"USB device detection should complete within 5 seconds, took {:?}\",\n            elapsed\n        );\n    }\n\n    #[tokio::test]\n    async fn test_user_story_8_device_detection_basic() {\n        // User Story #8: See USB device storage capacity\n        let mut usb_manager = UsbManager::new();\n\n        let devices = usb_manager.detect_devices().unwrap();\n\n        // Should return a vector (even if empty)\n        assert!(devices.is_empty() || !devices.is_empty()); // Always true, but validates Vec\u003cUsbDevice\u003e\n\n        // If devices are found, they should have proper structure\n        for device in \u0026devices {\n            assert!(!device.id.is_empty(), \"Device ID should not be empty\");\n            assert!(!device.name.is_empty(), \"Device name should not be empty\");\n            assert!(!device.path.is_empty(), \"Device path should not be empty\");\n            assert!(\n                device.is_connected,\n                \"Detected devices should be marked as connected\"\n            );\n\n            // Storage information validation\n            assert!(\n                device.total_space \u003e 0,\n                \"Total space should be greater than 0\"\n            );\n            assert!(\n                device.available_space \u003c= device.total_space,\n                \"Available space cannot exceed total space\"\n            );\n        }\n    }\n\n    #[tokio::test]\n    async fn test_user_story_8_storage_capacity_display() {\n        // User Story #8 Acceptance Criteria: Storage space display\n        let mut usb_manager = UsbManager::new();\n\n        let devices = usb_manager.detect_devices().unwrap();\n\n        // Test storage information is meaningful\n        for device in \u0026devices {\n            // Should have valid space values (bytes) - u64 is always non-negative\n\n            // Available space should not exceed total space\n            assert!(\n                device.available_space \u003c= device.total_space,\n                \"Available space ({}) should not exceed total space ({})\",\n                device.available_space,\n                device.total_space\n            );\n\n            // Storage values should be realistic (at least 1MB for USB devices)\n            if device.total_space \u003e 0 {\n                assert!(\n                    device.total_space \u003e= 1_000_000,\n                    \"USB devices should have at least 1MB total space, got {}\",\n                    device.total_space\n                );\n            }\n        }\n    }\n\n    #[tokio::test]\n    async fn test_user_story_8_no_device_connected_message() {\n        // User Story #8 Acceptance Criteria: Clear \"No device connected\" handling\n        let mut usb_manager = UsbManager::new();\n\n        let devices = usb_manager.detect_devices().unwrap();\n\n        // Should handle case where no USB devices are connected\n        if devices.is_empty() {\n            // This is a valid state - no USB devices connected\n            log::info!(\"No USB devices detected - this is a valid test state\");\n        } else {\n            // If devices are found, they should be properly formatted\n            log::info!(\"Found {} USB devices during test\", devices.len());\n            for device in \u0026devices {\n                log::info!(\n                    \"  Device: {} at {} ({} bytes total)\",\n                    device.name,\n                    device.path,\n                    device.total_space\n                );\n            }\n        }\n\n        // Test passes if detect_devices() succeeds regardless of device count\n    }\n\n    #[tokio::test]\n    async fn test_get_device_info_nonexistent() {\n        let usb_manager = UsbManager::new();\n\n        let result = usb_manager.get_device_info(\"/nonexistent/path\");\n\n        assert!(\n            result.is_err(),\n            \"Should return error for nonexistent device\"\n        );\n        match result {\n            Err(PodPicoError::UsbDeviceNotFound(path)) =\u003e {\n                assert_eq!(path, \"/nonexistent/path\");\n            }\n            _ =\u003e panic!(\"Should return UsbDeviceNotFound error\"),\n        }\n    }\n\n    #[tokio::test]\n    async fn test_is_usb_device_logic() {\n        let mut usb_manager = UsbManager::new();\n\n        // We can't easily test the private is_usb_device method directly,\n        // but we can test that detect_devices doesn't return system drives\n        let devices = usb_manager.detect_devices().unwrap();\n\n        for device in \u0026devices {\n            // Should not detect root filesystem or common system paths\n            assert!(\n                !device.path.eq(\"/\"),\n                \"Should not detect root filesystem as USB device\"\n            );\n            assert!(\n                !device.path.starts_with(\"/boot\"),\n                \"Should not detect boot partition as USB device\"\n            );\n            assert!(\n                !device.path.starts_with(\"/home\") || device.path.contains(\"media\"),\n                \"Should not detect home directory as USB device unless in media subdirectory\"\n            );\n        }\n    }\n\n    #[tokio::test]\n    async fn test_user_story_8_device_structure_validation() {\n        // User Story #8: Device structure validation\n        let mut usb_manager = UsbManager::new();\n\n        let devices = usb_manager.detect_devices().unwrap();\n\n        for device in \u0026devices {\n            // ID validation\n            assert!(!device.id.is_empty(), \"Device ID should not be empty\");\n            assert!(\n                !device.id.contains('/'),\n                \"Device ID should not contain path separators\"\n            );\n            assert!(\n                !device.id.contains('\\\\'),\n                \"Device ID should not contain backslashes\"\n            );\n\n            // Name validation\n            assert!(!device.name.is_empty(), \"Device name should not be empty\");\n\n            // Path validation\n            assert!(!device.path.is_empty(), \"Device path should not be empty\");\n\n            // Storage validation\n            assert!(device.total_space \u003e 0, \"Total space should be positive\");\n            assert!(\n                device.available_space \u003c= device.total_space,\n                \"Available space should not exceed total\"\n            );\n\n            // Connection status\n            assert!(\n                device.is_connected,\n                \"Detected device should be marked as connected\"\n            );\n        }\n    }\n\n    // USER STORY #9 TESTS - Transfer episodes to USB device\n    // These tests validate acceptance criteria after implementation\n\n    #[tokio::test]\n    async fn test_user_story_9_transfer_progress_indicator() {\n        // User Story #9 Acceptance Criteria: Progress indicator shows immediately\n        let usb_manager = UsbManager::new();\n        let test_source = \"/tmp/test_episode.mp3\";\n        let test_device = \"/tmp/mock_usb_device\"; // Use /tmp as mock USB device\n        let test_filename = \"test_episode.mp3\";\n\n        // Create test file and mock USB device directory\n        std::fs::create_dir_all(\"/tmp\").unwrap();\n        std::fs::create_dir_all(test_device).unwrap();\n        std::fs::write(test_source, b\"test episode content\").unwrap();\n\n        let start_time = std::time::Instant::now();\n        let result = usb_manager\n            .transfer_file(test_source, test_device, test_filename)\n            .await;\n        let elapsed = start_time.elapsed();\n\n        // Should respond reasonably quickly (progress indicator appears immediately)\n        assert!(\n            elapsed.as_millis() \u003c 1000,\n            \"Transfer should complete quickly for small test file\"\n        );\n\n        // Should succeed now that we've implemented it\n        assert!(\n            result.is_ok(),\n            \"Transfer should succeed for valid inputs: {:?}\",\n            result\n        );\n\n        // Verify file was transferred\n        let dest_path = format!(\"{}/PodPico/{}\", test_device, test_filename);\n        assert!(\n            std::path::Path::new(\u0026dest_path).exists(),\n            \"File should exist on device after transfer\"\n        );\n\n        // Cleanup\n        std::fs::remove_file(test_source).unwrap_or(());\n        std::fs::remove_file(\u0026dest_path).unwrap_or(());\n        std::fs::remove_dir_all(format!(\"{}/PodPico\", test_device)).unwrap_or(());\n        std::fs::remove_dir_all(test_device).unwrap_or(());\n    }\n\n    #[tokio::test]\n    async fn test_user_story_9_transfer_speed_and_time_remaining() {\n        // User Story #9 Acceptance Criteria: Transfer speed and time remaining visible\n        let usb_manager = UsbManager::new();\n        let test_source = \"/tmp/test_large_episode.mp3\";\n        let test_device = \"/tmp/mock_usb_device_large\";\n        let test_filename = \"large_episode.mp3\";\n\n        // Create larger test file (100KB)\n        std::fs::create_dir_all(\"/tmp\").unwrap();\n        std::fs::create_dir_all(test_device).unwrap();\n        let large_content = vec![0u8; 100 * 1024]; // 100KB\n        std::fs::write(test_source, large_content).unwrap();\n\n        let result = usb_manager\n            .transfer_file(test_source, test_device, test_filename)\n            .await;\n\n        // Should succeed with proper implementation\n        assert!(\n            result.is_ok(),\n            \"Transfer should succeed for valid large file: {:?}\",\n            result\n        );\n\n        // Verify file was transferred and has correct size\n        let dest_path = format!(\"{}/PodPico/{}\", test_device, test_filename);\n        assert!(\n            std::path::Path::new(\u0026dest_path).exists(),\n            \"Large file should exist on device\"\n        );\n\n        let dest_metadata = std::fs::metadata(\u0026dest_path).unwrap();\n        assert_eq!(\n            dest_metadata.len(),\n            100 * 1024,\n            \"Transferred file should have correct size\"\n        );\n\n        // Cleanup\n        std::fs::remove_file(test_source).unwrap_or(());\n        std::fs::remove_file(\u0026dest_path).unwrap_or(());\n        std::fs::remove_dir_all(format!(\"{}/PodPico\", test_device)).unwrap_or(());\n        std::fs::remove_dir_all(test_device).unwrap_or(());\n    }\n\n    #[tokio::test]\n    async fn test_user_story_9_successful_transfer_indicator() {\n        // User Story #9 Acceptance Criteria: Episode shows \"on device\" indicator after successful transfer\n        let usb_manager = UsbManager::new();\n        let test_source = \"/tmp/test_success_episode.mp3\";\n        let test_device = \"/tmp/mock_usb_device_success\";\n        let test_filename = \"success_episode.mp3\";\n\n        // Create test file and device\n        std::fs::create_dir_all(\"/tmp\").unwrap();\n        std::fs::create_dir_all(test_device).unwrap();\n        std::fs::write(test_source, b\"successful episode content\").unwrap();\n\n        let result = usb_manager\n            .transfer_file(test_source, test_device, test_filename)\n            .await;\n\n        // Should succeed and indicate successful transfer\n        assert!(\n            result.is_ok(),\n            \"Transfer should succeed and return success status: {:?}\",\n            result\n        );\n\n        // Verify file exists on device (indicates successful transfer)\n        let dest_path = format!(\"{}/PodPico/{}\", test_device, test_filename);\n        assert!(\n            std::path::Path::new(\u0026dest_path).exists(),\n            \"File should exist on device after successful transfer\"\n        );\n\n        // Verify content is correct\n        let transferred_content = std::fs::read_to_string(\u0026dest_path).unwrap();\n        assert_eq!(\n            transferred_content, \"successful episode content\",\n            \"Transferred content should match original\"\n        );\n\n        // Cleanup\n        std::fs::remove_file(test_source).unwrap_or(());\n        std::fs::remove_file(\u0026dest_path).unwrap_or(());\n        std::fs::remove_dir_all(format!(\"{}/PodPico\", test_device)).unwrap_or(());\n        std::fs::remove_dir_all(test_device).unwrap_or(());\n    }\n\n    #[tokio::test]\n    async fn test_user_story_9_transfer_error_handling() {\n        // User Story #9 Acceptance Criteria: Clear error message and retry option on failure\n        let usb_manager = UsbManager::new();\n        let nonexistent_source = \"/tmp/nonexistent_episode.mp3\";\n        let test_device = \"/tmp/mock_usb_device_error\";\n        let test_filename = \"nonexistent.mp3\";\n\n        // Ensure test device exists but source file doesn't\n        std::fs::create_dir_all(test_device).unwrap();\n        std::fs::remove_file(nonexistent_source).unwrap_or(()); // Ensure it doesn't exist\n\n        let result = usb_manager\n            .transfer_file(nonexistent_source, test_device, test_filename)\n            .await;\n\n        // Should fail with clear error message\n        assert!(result.is_err(), \"Transfer of nonexistent file should fail\");\n\n        let error = result.unwrap_err();\n        let error_message = format!(\"{}\", error);\n\n        // Error message should be clear and actionable\n        assert!(\n            !error_message.is_empty(),\n            \"Error message should not be empty\"\n        );\n        assert!(\n            error_message.contains(\"Source file not found\"),\n            \"Error should mention source file not found\"\n        );\n        assert!(\n            error_message.contains(nonexistent_source),\n            \"Error should include the problematic path\"\n        );\n\n        // Cleanup\n        std::fs::remove_dir_all(test_device).unwrap_or(());\n    }\n\n    #[tokio::test]\n    async fn test_user_story_9_insufficient_space_warning() {\n        // User Story #9 Acceptance Criteria: Warn before transfer if insufficient USB space\n        // Note: This test verifies the space checking logic, but we can't easily simulate\n        // a device with insufficient space using filesystem mocking\n        let usb_manager = UsbManager::new();\n        let test_source = \"/tmp/test_large_episode_space.mp3\";\n        let test_device = \"/tmp/mock_usb_device_space\";\n        let test_filename = \"large_episode_space.mp3\";\n\n        // Create test file and device\n        std::fs::create_dir_all(\"/tmp\").unwrap();\n        std::fs::create_dir_all(test_device).unwrap();\n        let content = vec![0u8; 1024]; // 1KB test file\n        std::fs::write(test_source, content).unwrap();\n\n        let result = usb_manager\n            .transfer_file(test_source, test_device, test_filename)\n            .await;\n\n        // Should succeed for small file (1KB should fit in /tmp)\n        assert!(\n            result.is_ok(),\n            \"Transfer should succeed for small file: {:?}\",\n            result\n        );\n\n        // Verify space checking logic exists by checking the implementation handles the logic\n        // (The actual insufficient space scenario would require a device with very little space)\n        let dest_path = format!(\"{}/PodPico/{}\", test_device, test_filename);\n        assert!(\n            std::path::Path::new(\u0026dest_path).exists(),\n            \"File should be transferred successfully\"\n        );\n\n        // Cleanup\n        std::fs::remove_file(test_source).unwrap_or(());\n        std::fs::remove_file(\u0026dest_path).unwrap_or(());\n        std::fs::remove_dir_all(format!(\"{}/PodPico\", test_device)).unwrap_or(());\n        std::fs::remove_dir_all(test_device).unwrap_or(());\n    }\n\n    #[tokio::test]\n    async fn test_user_story_9_transfer_file_organization() {\n        // User Story #9: Verify files are organized properly on USB device\n        let usb_manager = UsbManager::new();\n        let test_source = \"/tmp/test_organized_episode.mp3\";\n        let test_device = \"/tmp/mock_usb_device_organized\";\n        let test_filename = \"organized_episode.mp3\";\n\n        // Create test file and device\n        std::fs::create_dir_all(\"/tmp\").unwrap();\n        std::fs::create_dir_all(test_device).unwrap();\n        std::fs::write(test_source, b\"organized episode content\").unwrap();\n\n        let result = usb_manager\n            .transfer_file(test_source, test_device, test_filename)\n            .await;\n\n        // Should succeed with proper file organization\n        assert!(\n            result.is_ok(),\n            \"Transfer should succeed with proper organization: {:?}\",\n            result\n        );\n\n        // Verify files are organized in PodPico directory structure\n        let podpico_dir = format!(\"{}/PodPico\", test_device);\n        assert!(\n            std::path::Path::new(\u0026podpico_dir).exists(),\n            \"PodPico directory should be created\"\n        );\n        assert!(\n            std::path::Path::new(\u0026podpico_dir).is_dir(),\n            \"PodPico should be a directory\"\n        );\n\n        let dest_path = format!(\"{}/{}\", podpico_dir, test_filename);\n        assert!(\n            std::path::Path::new(\u0026dest_path).exists(),\n            \"File should be in PodPico directory\"\n        );\n\n        // Verify content is preserved\n        let content = std::fs::read_to_string(\u0026dest_path).unwrap();\n        assert_eq!(\n            content, \"organized episode content\",\n            \"Content should be preserved during organized transfer\"\n        );\n\n        // Cleanup\n        std::fs::remove_file(test_source).unwrap_or(());\n        std::fs::remove_file(\u0026dest_path).unwrap_or(());\n        std::fs::remove_dir_all(\u0026podpico_dir).unwrap_or(());\n        std::fs::remove_dir_all(test_device).unwrap_or(());\n    }\n\n    #[tokio::test]\n    async fn test_user_story_9_transfer_performance_requirements() {\n        // User Story #9: Transfer should complete within reasonable time\n        let usb_manager = UsbManager::new();\n        let test_source = \"/tmp/test_performance_episode.mp3\";\n        let test_device = \"/tmp/mock_usb_device_perf\";\n        let test_filename = \"performance_episode.mp3\";\n\n        // Create medium-sized test file (50KB)\n        std::fs::create_dir_all(\"/tmp\").unwrap();\n        std::fs::create_dir_all(test_device).unwrap();\n        let content = vec![0u8; 50 * 1024]; // 50KB for performance testing\n        std::fs::write(test_source, content).unwrap();\n\n        let start_time = std::time::Instant::now();\n        let result = usb_manager\n            .transfer_file(test_source, test_device, test_filename)\n            .await;\n        let elapsed = start_time.elapsed();\n\n        // Should complete within reasonable time (generous for test environment)\n        assert!(\n            elapsed.as_secs() \u003c 10,\n            \"Transfer should complete within 10 seconds for 50KB file\"\n        );\n\n        // Should succeed\n        assert!(\n            result.is_ok(),\n            \"Performance test transfer should succeed: {:?}\",\n            result\n        );\n\n        // Verify file integrity\n        let dest_path = format!(\"{}/PodPico/{}\", test_device, test_filename);\n        let dest_metadata = std::fs::metadata(\u0026dest_path).unwrap();\n        assert_eq!(\n            dest_metadata.len(),\n            50 * 1024,\n            \"Transferred file should maintain correct size\"\n        );\n\n        // Calculate approximate transfer rate\n        let transfer_rate = (50 * 1024) as f64 / elapsed.as_secs_f64(); // bytes per second\n        assert!(\n            transfer_rate \u003e 1000.0,\n            \"Transfer rate should be at least 1KB/s, got {:.2} bytes/s\",\n            transfer_rate\n        );\n\n        // Cleanup\n        std::fs::remove_file(test_source).unwrap_or(());\n        std::fs::remove_file(\u0026dest_path).unwrap_or(());\n        std::fs::remove_dir_all(format!(\"{}/PodPico\", test_device)).unwrap_or(());\n        std::fs::remove_dir_all(test_device).unwrap_or(());\n    }\n\n    // USER STORY #10 TESTS - Remove episodes from USB device\n    // These tests validate acceptance criteria BEFORE implementation (Test-Driven Development)\n\n    #[tokio::test]\n    async fn test_user_story_10_remove_episode_confirmation_required() {\n        // User Story #10 Acceptance Criteria: Receive confirmation before deletion\n        let usb_manager = UsbManager::new();\n        let test_device = \"/tmp/mock_usb_device_remove\";\n        let test_filename = \"episode_to_remove.mp3\";\n\n        // Create test device and file structure\n        std::fs::create_dir_all(\"/tmp\").unwrap();\n        std::fs::create_dir_all(test_device).unwrap();\n        std::fs::create_dir_all(format!(\"{}/PodPico\", test_device)).unwrap();\n        let file_path = format!(\"{}/PodPico/{}\", test_device, test_filename);\n        std::fs::write(\u0026file_path, b\"episode content to remove\").unwrap();\n\n        // Verify file exists before removal\n        assert!(\n            std::path::Path::new(\u0026file_path).exists(),\n            \"File should exist before removal\"\n        );\n\n        // Test removal (should succeed after implementation)\n        let result = usb_manager.remove_file(test_device, test_filename).await;\n\n        // Should succeed with proper implementation\n        assert!(\n            result.is_ok(),\n            \"File removal should succeed for valid inputs: {:?}\",\n            result\n        );\n\n        // Verify file was removed\n        assert!(\n            !std::path::Path::new(\u0026file_path).exists(),\n            \"File should not exist after removal\"\n        );\n\n        // Cleanup\n        std::fs::remove_dir_all(test_device).unwrap_or(());\n    }\n\n    #[tokio::test]\n    async fn test_user_story_10_remove_nonexistent_episode() {\n        // User Story #10 Acceptance Criteria: Clear error handling for nonexistent files\n        let usb_manager = UsbManager::new();\n        let test_device = \"/tmp/mock_usb_device_remove_error\";\n        let nonexistent_filename = \"nonexistent_episode.mp3\";\n\n        // Create test device structure without the file\n        std::fs::create_dir_all(\"/tmp\").unwrap();\n        std::fs::create_dir_all(test_device).unwrap();\n        std::fs::create_dir_all(format!(\"{}/PodPico\", test_device)).unwrap();\n\n        // Try to remove nonexistent file\n        let result = usb_manager\n            .remove_file(test_device, nonexistent_filename)\n            .await;\n\n        // Should return appropriate error for nonexistent file\n        assert!(result.is_err(), \"Removal of nonexistent file should fail\");\n\n        let error = result.unwrap_err();\n        let error_message = format!(\"{}\", error);\n\n        // Error message should be clear and helpful\n        assert!(\n            !error_message.is_empty(),\n            \"Error message should not be empty\"\n        );\n        assert!(\n            error_message.contains(\"not found\") || error_message.contains(\"does not exist\"),\n            \"Error should indicate file not found: {}\",\n            error_message\n        );\n\n        // Cleanup\n        std::fs::remove_dir_all(test_device).unwrap_or(());\n    }\n\n    #[tokio::test]\n    async fn test_user_story_10_storage_space_increases_after_removal() {\n        // User Story #10 Acceptance Criteria: Available space increases after removal\n        let usb_manager = UsbManager::new();\n        let test_device = \"/tmp/mock_usb_device_storage\";\n        let test_filename = \"large_episode_for_removal.mp3\";\n\n        // Create test device structure with a larger file\n        std::fs::create_dir_all(\"/tmp\").unwrap();\n        std::fs::create_dir_all(test_device).unwrap();\n        std::fs::create_dir_all(format!(\"{}/PodPico\", test_device)).unwrap();\n\n        let file_path = format!(\"{}/PodPico/{}\", test_device, test_filename);\n        let large_content = vec![0u8; 50 * 1024]; // 50KB file\n        std::fs::write(\u0026file_path, large_content).unwrap();\n\n        // Get storage info before removal\n        let device_info_before = usb_manager.get_device_info(test_device);\n        let available_before = if let Ok(info) = device_info_before {\n            info.available_space\n        } else {\n            // For mock devices, we'll skip this test part\n            std::fs::remove_file(\u0026file_path).unwrap_or(());\n            std::fs::remove_dir_all(test_device).unwrap_or(());\n            return;\n        };\n\n        // Remove the file\n        let result = usb_manager.remove_file(test_device, test_filename).await;\n        assert!(result.is_ok(), \"File removal should succeed: {:?}\", result);\n\n        // Get storage info after removal\n        let device_info_after = usb_manager.get_device_info(test_device);\n        if let Ok(info_after) = device_info_after {\n            // Available space should have increased (or at least not decreased)\n            assert!(\n                info_after.available_space \u003e= available_before,\n                \"Available space should increase after file removal: {} \u003e= {}\",\n                info_after.available_space,\n                available_before\n            );\n        }\n\n        // Cleanup\n        std::fs::remove_dir_all(test_device).unwrap_or(());\n    }\n\n    #[tokio::test]\n    async fn test_user_story_10_invalid_device_path() {\n        // User Story #10: Error handling for invalid device paths\n        let usb_manager = UsbManager::new();\n        let invalid_device = \"/nonexistent/device/path\";\n        let test_filename = \"episode.mp3\";\n\n        let result = usb_manager.remove_file(invalid_device, test_filename).await;\n\n        // Should return appropriate error for invalid device\n        assert!(result.is_err(), \"Removal from invalid device should fail\");\n\n        let error = result.unwrap_err();\n        let error_message = format!(\"{}\", error);\n\n        // Error should indicate device not found\n        assert!(\n            error_message.contains(\"device\") || error_message.contains(\"not found\"),\n            \"Error should indicate device issue: {}\",\n            error_message\n        );\n    }\n\n    #[tokio::test]\n    async fn test_user_story_10_file_organization_structure() {\n        // User Story #10: Ensure removal respects PodPico directory structure\n        let usb_manager = UsbManager::new();\n        let test_device = \"/tmp/mock_usb_device_structure\";\n        let test_filename = \"structured_episode.mp3\";\n\n        // Create proper PodPico directory structure\n        std::fs::create_dir_all(\"/tmp\").unwrap();\n        std::fs::create_dir_all(test_device).unwrap();\n        std::fs::create_dir_all(format!(\"{}/PodPico\", test_device)).unwrap();\n\n        let file_path = format!(\"{}/PodPico/{}\", test_device, test_filename);\n        std::fs::write(\u0026file_path, b\"structured episode content\").unwrap();\n\n        // Verify file exists in correct structure\n        assert!(\n            std::path::Path::new(\u0026file_path).exists(),\n            \"File should exist in PodPico directory\"\n        );\n\n        // Remove file\n        let result = usb_manager.remove_file(test_device, test_filename).await;\n        assert!(\n            result.is_ok(),\n            \"Structured file removal should succeed: {:?}\",\n            result\n        );\n\n        // Verify file removed but directory structure preserved\n        assert!(\n            !std::path::Path::new(\u0026file_path).exists(),\n            \"File should be removed\"\n        );\n        assert!(\n            std::path::Path::new(\u0026format!(\"{}/PodPico\", test_device)).exists(),\n            \"PodPico directory should remain after file removal\"\n        );\n\n        // Cleanup\n        std::fs::remove_dir_all(test_device).unwrap_or(());\n    }\n\n    #[tokio::test]\n    async fn test_user_story_10_episode_removal_performance() {\n        // User Story #10: Ensure removal completes in reasonable time\n        let usb_manager = UsbManager::new();\n        let test_device = \"/tmp/mock_usb_device_perf\";\n        let test_filename = \"performance_test_episode.mp3\";\n\n        // Create test setup\n        std::fs::create_dir_all(\"/tmp\").unwrap();\n        std::fs::create_dir_all(test_device).unwrap();\n        std::fs::create_dir_all(format!(\"{}/PodPico\", test_device)).unwrap();\n\n        let file_path = format!(\"{}/PodPico/{}\", test_device, test_filename);\n        std::fs::write(\u0026file_path, b\"performance test content\").unwrap();\n\n        // Time the removal operation\n        let start_time = std::time::Instant::now();\n        let result = usb_manager.remove_file(test_device, test_filename).await;\n        let elapsed = start_time.elapsed();\n\n        // Should complete successfully and quickly\n        assert!(result.is_ok(), \"File removal should succeed: {:?}\", result);\n        assert!(\n            elapsed.as_secs() \u003c 5,\n            \"File removal should complete within 5 seconds, took {:?}\",\n            elapsed\n        );\n\n        // Cleanup\n        std::fs::remove_dir_all(test_device).unwrap_or(());\n    }\n}\n","traces":[{"line":41,"address":[18416064],"length":1,"stats":{"Line":0}},{"line":42,"address":[18416072],"length":1,"stats":{"Line":0}},{"line":47,"address":[18416096,18416293,18416299],"length":1,"stats":{"Line":1}},{"line":49,"address":[11055729],"length":1,"stats":{"Line":1}},{"line":50,"address":[11055796,11055751],"length":1,"stats":{"Line":2}},{"line":54,"address":[11055920],"length":1,"stats":{"Line":1}},{"line":55,"address":[11055937],"length":1,"stats":{"Line":1}},{"line":60,"address":[11058592,11055952,11058664],"length":1,"stats":{"Line":1}},{"line":61,"address":[18416407,18416499],"length":1,"stats":{"Line":2}},{"line":63,"address":[18416460],"length":1,"stats":{"Line":1}},{"line":64,"address":[11056069],"length":1,"stats":{"Line":1}},{"line":66,"address":[18416715,18416807],"length":1,"stats":{"Line":2}},{"line":69,"address":[11057028,11058568,11056505],"length":1,"stats":{"Line":2}},{"line":70,"address":[11057045],"length":1,"stats":{"Line":0}},{"line":71,"address":[11057238],"length":1,"stats":{"Line":0}},{"line":74,"address":[11057532,11057712],"length":1,"stats":{"Line":0}},{"line":76,"address":[11057431],"length":1,"stats":{"Line":0}},{"line":77,"address":[11057611],"length":1,"stats":{"Line":0}},{"line":82,"address":[11058094,11058153,11058215],"length":1,"stats":{"Line":0}},{"line":88,"address":[11058296],"length":1,"stats":{"Line":0}},{"line":89,"address":[11058366],"length":1,"stats":{"Line":0}},{"line":93,"address":[11058512],"length":1,"stats":{"Line":0}},{"line":97,"address":[11056719,11056522],"length":1,"stats":{"Line":2}},{"line":98,"address":[11056592],"length":1,"stats":{"Line":1}},{"line":102,"address":[11059950,11058688,11059944],"length":1,"stats":{"Line":1}},{"line":103,"address":[11058729],"length":1,"stats":{"Line":1}},{"line":104,"address":[11058938],"length":1,"stats":{"Line":1}},{"line":107,"address":[11059149],"length":1,"stats":{"Line":1}},{"line":117,"address":[11059311],"length":1,"stats":{"Line":1}},{"line":123,"address":[11059554],"length":1,"stats":{"Line":1}},{"line":125,"address":[11433991,11433968],"length":1,"stats":{"Line":2}},{"line":128,"address":[11059662],"length":1,"stats":{"Line":1}},{"line":130,"address":[11434080,11434104],"length":1,"stats":{"Line":2}},{"line":133,"address":[11059767,11059840],"length":1,"stats":{"Line":2}},{"line":135,"address":[11059829,11059858],"length":1,"stats":{"Line":2}},{"line":138,"address":[11059968,11062263,11062291],"length":1,"stats":{"Line":1}},{"line":139,"address":[11060012,11060108],"length":1,"stats":{"Line":2}},{"line":141,"address":[11060057],"length":1,"stats":{"Line":1}},{"line":143,"address":[11060396,11060084],"length":1,"stats":{"Line":2}},{"line":144,"address":[18421167,18420949],"length":1,"stats":{"Line":2}},{"line":145,"address":[11060853],"length":1,"stats":{"Line":0}},{"line":146,"address":[18421599,18421764],"length":1,"stats":{"Line":0}},{"line":148,"address":[18421494],"length":1,"stats":{"Line":0}},{"line":149,"address":[11061218],"length":1,"stats":{"Line":0}},{"line":152,"address":[18422477],"length":1,"stats":{"Line":0}},{"line":153,"address":[11061650],"length":1,"stats":{"Line":0}},{"line":154,"address":[11061690,11061749,11061811],"length":1,"stats":{"Line":0}},{"line":155,"address":[18422269,18422335],"length":1,"stats":{"Line":0}},{"line":157,"address":[11061755],"length":1,"stats":{"Line":0}},{"line":159,"address":[18422300],"length":1,"stats":{"Line":0}},{"line":160,"address":[11061930],"length":1,"stats":{"Line":0}},{"line":161,"address":[11061992],"length":1,"stats":{"Line":0}},{"line":167,"address":[11060525],"length":1,"stats":{"Line":1}},{"line":172,"address":[11062304],"length":1,"stats":{"Line":1}},{"line":178,"address":[11434524,11434897,11434861],"length":1,"stats":{"Line":3}},{"line":185,"address":[18386288,18385923],"length":1,"stats":{"Line":2}},{"line":186,"address":[8210994],"length":1,"stats":{"Line":2}},{"line":187,"address":[11435869,11436288],"length":1,"stats":{"Line":2}},{"line":188,"address":[11436013,11435947],"length":1,"stats":{"Line":2}},{"line":189,"address":[11436132],"length":1,"stats":{"Line":1}},{"line":191,"address":[11436021],"length":1,"stats":{"Line":1}},{"line":196,"address":[11436102],"length":1,"stats":{"Line":1}},{"line":197,"address":[11436124],"length":1,"stats":{"Line":1}},{"line":200,"address":[11436350],"length":1,"stats":{"Line":1}},{"line":203,"address":[11436387],"length":1,"stats":{"Line":1}},{"line":204,"address":[11436420,11436525],"length":1,"stats":{"Line":2}},{"line":205,"address":[11436903,11436552,11436873],"length":1,"stats":{"Line":3}},{"line":206,"address":[11436575],"length":1,"stats":{"Line":1}},{"line":207,"address":[11436674],"length":1,"stats":{"Line":1}},{"line":209,"address":[13792711],"length":1,"stats":{"Line":2}},{"line":210,"address":[11437806],"length":1,"stats":{"Line":1}},{"line":217,"address":[18387705],"length":1,"stats":{"Line":1}},{"line":218,"address":[11436969,11437074],"length":1,"stats":{"Line":2}},{"line":219,"address":[11437101,11437452,11437422],"length":1,"stats":{"Line":0}},{"line":220,"address":[11437124],"length":1,"stats":{"Line":0}},{"line":221,"address":[11437219],"length":1,"stats":{"Line":0}},{"line":223,"address":[13792732],"length":1,"stats":{"Line":0}},{"line":224,"address":[11438225],"length":1,"stats":{"Line":0}},{"line":228,"address":[18388266,18389541,18389893,18391382,18395616,18385721,18395857,18388646,18395863],"length":1,"stats":{"Line":3}},{"line":229,"address":[18395638,18395703],"length":1,"stats":{"Line":0}},{"line":231,"address":[11438838],"length":1,"stats":{"Line":1}},{"line":234,"address":[11438973,11438901,11439078],"length":1,"stats":{"Line":2}},{"line":235,"address":[11439126],"length":1,"stats":{"Line":0}},{"line":236,"address":[11439334,11439183],"length":1,"stats":{"Line":0}},{"line":240,"address":[11439733,11439763,11439491],"length":1,"stats":{"Line":0}},{"line":241,"address":[11439514],"length":1,"stats":{"Line":0}},{"line":242,"address":[11439627],"length":1,"stats":{"Line":0}},{"line":244,"address":[13792774],"length":1,"stats":{"Line":0}},{"line":245,"address":[11440330],"length":1,"stats":{"Line":0}},{"line":250,"address":[11439869,11439945],"length":1,"stats":{"Line":2}},{"line":251,"address":[13792795],"length":1,"stats":{"Line":3}},{"line":252,"address":[18395910,18395975],"length":1,"stats":{"Line":0}},{"line":255,"address":[11440986],"length":1,"stats":{"Line":1}},{"line":258,"address":[11441202,11441074,11441292],"length":1,"stats":{"Line":3}},{"line":259,"address":[11441285,11441485,11434728,11441325],"length":1,"stats":{"Line":2}},{"line":262,"address":[11442202,11441920,11441656,11441972],"length":1,"stats":{"Line":4}},{"line":264,"address":[18392979],"length":1,"stats":{"Line":1}},{"line":265,"address":[11441741],"length":1,"stats":{"Line":1}},{"line":266,"address":[11441811],"length":1,"stats":{"Line":1}},{"line":267,"address":[11441905],"length":1,"stats":{"Line":1}},{"line":269,"address":[18385805,18393253,18393313,18393347,18393623],"length":1,"stats":{"Line":4}},{"line":271,"address":[11442325],"length":1,"stats":{"Line":1}},{"line":273,"address":[11442616,11442475],"length":1,"stats":{"Line":2}},{"line":274,"address":[18385826,18393981,18394297,18393921],"length":1,"stats":{"Line":2}},{"line":275,"address":[18394546,18394471],"length":1,"stats":{"Line":2}},{"line":276,"address":[18394523],"length":1,"stats":{"Line":1}},{"line":278,"address":[18393693],"length":1,"stats":{"Line":0}},{"line":279,"address":[18393743,18394092,18394230],"length":1,"stats":{"Line":0}},{"line":280,"address":[11443477,11442911,11442871,11434791],"length":1,"stats":{"Line":0}},{"line":281,"address":[11443755,11443639],"length":1,"stats":{"Line":0}},{"line":282,"address":[11443691],"length":1,"stats":{"Line":0}},{"line":288,"address":[18422896],"length":1,"stats":{"Line":1}},{"line":295,"address":[18397146,18396435,18396383,18401312,18397582,18401559,18396723,18396603,18401553],"length":1,"stats":{"Line":3}},{"line":296,"address":[11449766,11449831],"length":1,"stats":{"Line":0}},{"line":299,"address":[8220139],"length":1,"stats":{"Line":3}},{"line":300,"address":[18401671,18401606],"length":1,"stats":{"Line":0}},{"line":303,"address":[18398166],"length":1,"stats":{"Line":1}},{"line":304,"address":[18398306],"length":1,"stats":{"Line":1}},{"line":305,"address":[18398325,18398447],"length":1,"stats":{"Line":2}},{"line":307,"address":[11446989],"length":1,"stats":{"Line":1}},{"line":308,"address":[11447358,11447477,11449309,11447841,11447447,11447686],"length":1,"stats":{"Line":4}},{"line":309,"address":[11447381],"length":1,"stats":{"Line":1}},{"line":310,"address":[18398950,18396477,18398519,18399030],"length":1,"stats":{"Line":4}},{"line":311,"address":[18401856,18399305,18401878],"length":1,"stats":{"Line":0}},{"line":313,"address":[18399421],"length":1,"stats":{"Line":1}},{"line":317,"address":[11449278,11448145,11448115,11447927,11448467,11448328],"length":1,"stats":{"Line":4}},{"line":318,"address":[18399469],"length":1,"stats":{"Line":1}},{"line":319,"address":[11448198,11447088,11445102,11448138],"length":1,"stats":{"Line":3}},{"line":320,"address":[18402150,18399963,18402128],"length":1,"stats":{"Line":0}},{"line":322,"address":[11448500,11448611],"length":1,"stats":{"Line":1}},{"line":325,"address":[11448646,11448562],"length":1,"stats":{"Line":2}},{"line":326,"address":[18400250,18400410,18400200],"length":1,"stats":{"Line":2}},{"line":327,"address":[11448704,11448810],"length":1,"stats":{"Line":0}},{"line":329,"address":[18400238],"length":1,"stats":{"Line":1}},{"line":332,"address":[18400743,18400424,18400327],"length":1,"stats":{"Line":2}},{"line":333,"address":[11449046,11449196,11448878],"length":1,"stats":{"Line":0}},{"line":335,"address":[11448864],"length":1,"stats":{"Line":1}},{"line":339,"address":[18400796,18400475,18400549],"length":1,"stats":{"Line":3}},{"line":340,"address":[18400487],"length":1,"stats":{"Line":1}},{"line":341,"address":[18400495],"length":1,"stats":{"Line":1}},{"line":342,"address":[18400499],"length":1,"stats":{"Line":1}},{"line":343,"address":[11448958],"length":1,"stats":{"Line":1}},{"line":344,"address":[11448967],"length":1,"stats":{"Line":1}},{"line":345,"address":[18400541],"length":1,"stats":{"Line":1}},{"line":347,"address":[11449233,11447151,11445123,11449273,11447121],"length":1,"stats":{"Line":3}},{"line":351,"address":[11447325,11449575,11449436,11449701,11448035],"length":1,"stats":{"Line":3}},{"line":353,"address":[18399528,18400875,18399570,18396540],"length":1,"stats":{"Line":4}},{"line":354,"address":[11450854,11449527,11450832],"length":1,"stats":{"Line":0}},{"line":356,"address":[11449615],"length":1,"stats":{"Line":1}},{"line":360,"address":[11062544,11062562],"length":1,"stats":{"Line":4}},{"line":361,"address":[18402942,18403060,18402882,18402832],"length":1,"stats":{"Line":2}},{"line":362,"address":[11451659,11451713,11451855],"length":1,"stats":{"Line":2}},{"line":363,"address":[18403411,18403474],"length":1,"stats":{"Line":1}},{"line":368,"address":[11062608],"length":1,"stats":{"Line":1}},{"line":375,"address":[11452363,11452430],"length":1,"stats":{"Line":1}},{"line":376,"address":[18404048],"length":1,"stats":{"Line":1}},{"line":378,"address":[18404033],"length":1,"stats":{"Line":0}},{"line":381,"address":[13809405],"length":1,"stats":{"Line":2}},{"line":382,"address":[11453128,11452892,11452946],"length":1,"stats":{"Line":2}},{"line":383,"address":[11453035],"length":1,"stats":{"Line":1}},{"line":384,"address":[11453048],"length":1,"stats":{"Line":1}},{"line":385,"address":[18404717],"length":1,"stats":{"Line":1}},{"line":386,"address":[11453134,11453076],"length":1,"stats":{"Line":1}},{"line":391,"address":[11062720],"length":1,"stats":{"Line":1}},{"line":400,"address":[18405368,18405438],"length":1,"stats":{"Line":1}},{"line":401,"address":[18405440],"length":1,"stats":{"Line":1}},{"line":403,"address":[11453742],"length":1,"stats":{"Line":0}},{"line":406,"address":[11454043,11453939,11453862,11453729],"length":1,"stats":{"Line":2}},{"line":407,"address":[11454522,11454232,11454286],"length":1,"stats":{"Line":2}},{"line":408,"address":[11454379],"length":1,"stats":{"Line":1}},{"line":409,"address":[11454392],"length":1,"stats":{"Line":1}},{"line":410,"address":[11454405],"length":1,"stats":{"Line":1}},{"line":411,"address":[11454423],"length":1,"stats":{"Line":1}},{"line":412,"address":[18406158],"length":1,"stats":{"Line":1}},{"line":413,"address":[11454528,11454464],"length":1,"stats":{"Line":1}},{"line":418,"address":[18406729,18406544,18406873,18406579,18407277,18406692],"length":1,"stats":{"Line":0}},{"line":419,"address":[11454941,11455155,11455057,11454987],"length":1,"stats":{"Line":0}},{"line":420,"address":[11455344,11455398],"length":1,"stats":{"Line":0}},{"line":425,"address":[18410952,18407335,18410905,18407296,18407513,18407535],"length":1,"stats":{"Line":4}},{"line":426,"address":[11455857,11455692,11455813],"length":1,"stats":{"Line":3}},{"line":435,"address":[11455819],"length":1,"stats":{"Line":1}},{"line":436,"address":[11456192,11456275],"length":1,"stats":{"Line":2}},{"line":437,"address":[18408160,18408078,18408204],"length":1,"stats":{"Line":3}},{"line":441,"address":[11456700,11456390],"length":1,"stats":{"Line":2}},{"line":445,"address":[11456814,11456347],"length":1,"stats":{"Line":2}},{"line":446,"address":[18408733],"length":1,"stats":{"Line":1}},{"line":449,"address":[18408812,18408880],"length":1,"stats":{"Line":2}},{"line":450,"address":[18408974,18409010,18408901],"length":1,"stats":{"Line":3}},{"line":454,"address":[11457196,11457492],"length":1,"stats":{"Line":2}},{"line":461,"address":[11457171,11457834],"length":1,"stats":{"Line":2}},{"line":463,"address":[11458053,11457934,11458024],"length":1,"stats":{"Line":3}},{"line":467,"address":[11458030],"length":1,"stats":{"Line":1}},{"line":469,"address":[11457873],"length":1,"stats":{"Line":0}},{"line":470,"address":[11457889,11458389,11458425],"length":1,"stats":{"Line":0}},{"line":475,"address":[11458395,11458732],"length":1,"stats":{"Line":0}}],"covered":138,"coverable":195}]};
        var previousData = null;
    </script>
    <script crossorigin>/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(d,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):(d=d||self,r(d.React={}))})(this,function(d){function r(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function w(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function da(){}function L(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function ea(a,b,c){var g,e={},fa=null,d=null;if(null!=b)for(g in void 0!==b.ref&&(d=b.ref),void 0!==b.key&&(fa=""+b.key),b)ha.call(b,g)&&!ia.hasOwnProperty(g)&&(e[g]=b[g]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var k=Array(h),f=0;f<h;f++)k[f]=arguments[f+2];e.children=k}if(a&&a.defaultProps)for(g in h=a.defaultProps,
h)void 0===e[g]&&(e[g]=h[g]);return{$$typeof:x,type:a,key:fa,ref:d,props:e,_owner:M.current}}function va(a,b){return{$$typeof:x,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return"object"===typeof a&&null!==a&&a.$$typeof===x}function wa(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ja(a,b,c,g){if(C.length){var e=C.pop();e.result=a;e.keyPrefix=b;e.func=c;e.context=g;e.count=0;return e}return{result:a,keyPrefix:b,func:c,
context:g,count:0}}function ka(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>C.length&&C.push(a)}function O(a,b,c,g){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var d=!1;if(null===a)d=!0;else switch(e){case "string":case "number":d=!0;break;case "object":switch(a.$$typeof){case x:case xa:d=!0}}if(d)return c(g,a,""===b?"."+P(a,0):b),1;d=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){e=a[f];var h=b+P(e,f);d+=O(e,h,c,g)}else if(null===a||
"object"!==typeof a?h=null:(h=la&&a[la]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(e=a.next()).done;)e=e.value,h=b+P(e,f++),d+=O(e,h,c,g);else if("object"===e)throw c=""+a,Error(r(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return d}function Q(a,b,c){return null==a?0:O(a,"",b,c)}function P(a,b){return"object"===typeof a&&null!==a&&null!=a.key?wa(a.key):b.toString(36)}function ya(a,b,c){a.func.call(a.context,b,
a.count++)}function za(a,b,c){var g=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?R(a,g,c,function(a){return a}):null!=a&&(N(a)&&(a=va(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(ma,"$&/")+"/")+c)),g.push(a))}function R(a,b,c,g,e){var d="";null!=c&&(d=(""+c).replace(ma,"$&/")+"/");b=ja(b,d,g,e);Q(a,za,b);ka(b)}function t(){var a=na.current;if(null===a)throw Error(r(321));return a}function S(a,b){var c=a.length;a.push(b);a:for(;;){var g=c-1>>>1,e=a[g];if(void 0!==
e&&0<D(e,b))a[g]=b,a[c]=e,c=g;else break a}}function n(a){a=a[0];return void 0===a?null:a}function E(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var g=0,e=a.length;g<e;){var d=2*(g+1)-1,f=a[d],h=d+1,k=a[h];if(void 0!==f&&0>D(f,c))void 0!==k&&0>D(k,f)?(a[g]=k,a[h]=c,g=h):(a[g]=f,a[d]=c,g=d);else if(void 0!==k&&0>D(k,c))a[g]=k,a[h]=c,g=h;else break a}}return b}return null}function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function F(a){for(var b=n(u);null!==
b;){if(null===b.callback)E(u);else if(b.startTime<=a)E(u),b.sortIndex=b.expirationTime,S(p,b);else break;b=n(u)}}function T(a){y=!1;F(a);if(!v)if(null!==n(p))v=!0,z(U);else{var b=n(u);null!==b&&G(T,b.startTime-a)}}function U(a,b){v=!1;y&&(y=!1,V());H=!0;var c=m;try{F(b);for(l=n(p);null!==l&&(!(l.expirationTime>b)||a&&!W());){var g=l.callback;if(null!==g){l.callback=null;m=l.priorityLevel;var e=g(l.expirationTime<=b);b=q();"function"===typeof e?l.callback=e:l===n(p)&&E(p);F(b)}else E(p);l=n(p)}if(null!==
l)var d=!0;else{var f=n(u);null!==f&&G(T,f.startTime-b);d=!1}return d}finally{l=null,m=c,H=!1}}function oa(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var f="function"===typeof Symbol&&Symbol.for,x=f?Symbol.for("react.element"):60103,xa=f?Symbol.for("react.portal"):60106,Aa=f?Symbol.for("react.fragment"):60107,Ba=f?Symbol.for("react.strict_mode"):60108,Ca=f?Symbol.for("react.profiler"):60114,Da=f?Symbol.for("react.provider"):60109,
Ea=f?Symbol.for("react.context"):60110,Fa=f?Symbol.for("react.forward_ref"):60112,Ga=f?Symbol.for("react.suspense"):60113,Ha=f?Symbol.for("react.memo"):60115,Ia=f?Symbol.for("react.lazy"):60116,la="function"===typeof Symbol&&Symbol.iterator,pa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,I=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+
String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,e=1;e<arguments.length;e++){var d=Object(arguments[e]);
for(var f in d)Ja.call(d,f)&&(c[f]=d[f]);if(pa){g=pa(d);for(var h=0;h<g.length;h++)Ka.call(d,g[h])&&(c[g[h]]=d[g[h]])}}return c},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},ba={};w.prototype.isReactComponent={};w.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(r(85));this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=
function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};da.prototype=w.prototype;f=L.prototype=new da;f.constructor=L;I(f,w.prototype);f.isPureReactComponent=!0;var M={current:null},ha=Object.prototype.hasOwnProperty,ia={key:!0,ref:!0,__self:!0,__source:!0},ma=/\/+/g,C=[],na={current:null},X;if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,qa=null,ra=function(){if(null!==A)try{var a=q();A(!0,a);A=null}catch(b){throw setTimeout(ra,0),b;}},La=Date.now();var q=
function(){return Date.now()-La};var z=function(a){null!==A?setTimeout(z,0,a):(A=a,setTimeout(ra,0))};var G=function(a,b){qa=setTimeout(a,b)};var V=function(){clearTimeout(qa)};var W=function(){return!1};f=X=function(){}}else{var Y=window.performance,sa=window.Date,Ma=window.setTimeout,Na=window.clearTimeout;"undefined"!==typeof console&&(f=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof Y&&"function"===typeof Y.now)q=function(){return Y.now()};else{var Oa=sa.now();q=function(){return sa.now()-Oa}}var J=!1,K=null,Z=-1,ta=5,ua=0;W=function(){return q()>=ua};f=function(){};X=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):
ta=0<a?Math.floor(1E3/a):5};var B=new MessageChannel,aa=B.port2;B.port1.onmessage=function(){if(null!==K){var a=q();ua=a+ta;try{K(!0,a)?aa.postMessage(null):(J=!1,K=null)}catch(b){throw aa.postMessage(null),b;}}else J=!1};z=function(a){K=a;J||(J=!0,aa.postMessage(null))};G=function(a,b){Z=Ma(function(){a(q())},b)};V=function(){Na(Z);Z=-1}}var p=[],u=[],Pa=1,l=null,m=3,H=!1,v=!1,y=!1,Qa=0;B={ReactCurrentDispatcher:na,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:I};I(B,{Scheduler:{__proto__:null,
unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=m;m=a;try{return b()}finally{m=c}},unstable_next:function(a){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var c=m;m=b;try{return a()}finally{m=c}},unstable_scheduleCallback:function(a,b,c){var d=q();if("object"===typeof c&&null!==c){var e=c.delay;
e="number"===typeof e&&0<e?d+e:d;c="number"===typeof c.timeout?c.timeout:oa(a)}else c=oa(a),e=d;c=e+c;a={id:Pa++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,S(u,a),null===n(p)&&a===n(u)&&(y?V():y=!0,G(T,e-d))):(a.sortIndex=c,S(p,a),v||H||(v=!0,z(U)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=m;return function(){var c=m;m=b;try{return a.apply(this,arguments)}finally{m=c}}},unstable_getCurrentPriorityLevel:function(){return m},
unstable_shouldYield:function(){var a=q();F(a);var b=n(p);return b!==l&&null!==l&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<l.expirationTime||W()},unstable_requestPaint:f,unstable_continueExecution:function(){v||H||(v=!0,z(U))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return n(p)},get unstable_now(){return q},get unstable_forceFrameRate(){return X},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,
unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Qa},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}});d.Children={map:function(a,b,c){if(null==a)return a;var d=[];R(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=ja(null,null,b,c);Q(a,ya,b);ka(b)},count:function(a){return Q(a,function(){return null},null)},
toArray:function(a){var b=[];R(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw Error(r(143));return a}};d.Component=w;d.Fragment=Aa;d.Profiler=Ca;d.PureComponent=L;d.StrictMode=Ba;d.Suspense=Ga;d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B;d.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(r(267,a));var d=I({},a.props),e=a.key,f=a.ref,m=a._owner;if(null!=b){void 0!==b.ref&&(f=b.ref,m=M.current);void 0!==b.key&&(e=""+b.key);if(a.type&&a.type.defaultProps)var h=
a.type.defaultProps;for(k in b)ha.call(b,k)&&!ia.hasOwnProperty(k)&&(d[k]=void 0===b[k]&&void 0!==h?h[k]:b[k])}var k=arguments.length-2;if(1===k)d.children=c;else if(1<k){h=Array(k);for(var l=0;l<k;l++)h[l]=arguments[l+2];d.children=h}return{$$typeof:x,type:a.type,key:e,ref:f,props:d,_owner:m}};d.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:Ea,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Da,_context:a};return a.Consumer=
a};d.createElement=ea;d.createFactory=function(a){var b=ea.bind(null,a);b.type=a;return b};d.createRef=function(){return{current:null}};d.forwardRef=function(a){return{$$typeof:Fa,render:a}};d.isValidElement=N;d.lazy=function(a){return{$$typeof:Ia,_ctor:a,_status:-1,_result:null}};d.memo=function(a,b){return{$$typeof:Ha,type:a,compare:void 0===b?null:b}};d.useCallback=function(a,b){return t().useCallback(a,b)};d.useContext=function(a,b){return t().useContext(a,b)};d.useDebugValue=function(a,b){};
d.useEffect=function(a,b){return t().useEffect(a,b)};d.useImperativeHandle=function(a,b,c){return t().useImperativeHandle(a,b,c)};d.useLayoutEffect=function(a,b){return t().useLayoutEffect(a,b)};d.useMemo=function(a,b){return t().useMemo(a,b)};d.useReducer=function(a,b,c){return t().useReducer(a,b,c)};d.useRef=function(a){return t().useRef(a)};d.useState=function(a){return t().useState(a)};d.version="16.13.1"});
</script>
    <script crossorigin>/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(I,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],ea):(I=I||self,ea(I.ReactDOM={},I.React))})(this,function(I,ea){function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function ji(a,b,c,d,e,f,g,h,m){yb=!1;gc=null;ki.apply(li,arguments)}function mi(a,b,c,d,e,f,g,h,m){ji.apply(this,arguments);if(yb){if(yb){var n=gc;yb=!1;gc=null}else throw Error(k(198));hc||(hc=!0,pd=n)}}function lf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=mf(c);mi(d,b,void 0,a);a.currentTarget=null}function nf(){if(ic)for(var a in cb){var b=cb[a],c=ic.indexOf(a);if(!(-1<c))throw Error(k(96,a));if(!jc[c]){if(!b.extractEvents)throw Error(k(97,a));jc[c]=b;c=b.eventTypes;for(var d in c){var e=
void 0;var f=c[d],g=b,h=d;if(qd.hasOwnProperty(h))throw Error(k(99,h));qd[h]=f;var m=f.phasedRegistrationNames;if(m){for(e in m)m.hasOwnProperty(e)&&of(m[e],g,h);e=!0}else f.registrationName?(of(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(k(98,d,a));}}}}function of(a,b,c){if(db[a])throw Error(k(100,a));db[a]=b;rd[a]=b.eventTypes[c].dependencies}function pf(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!cb.hasOwnProperty(c)||cb[c]!==d){if(cb[c])throw Error(k(102,c));cb[c]=
d;b=!0}}b&&nf()}function qf(a){if(a=rf(a)){if("function"!==typeof sd)throw Error(k(280));var b=a.stateNode;b&&(b=td(b),sd(a.stateNode,a.type,b))}}function sf(a){eb?fb?fb.push(a):fb=[a]:eb=a}function tf(){if(eb){var a=eb,b=fb;fb=eb=null;qf(a);if(b)for(a=0;a<b.length;a++)qf(b[a])}}function ud(){if(null!==eb||null!==fb)vd(),tf()}function uf(a,b,c){if(wd)return a(b,c);wd=!0;try{return vf(a,b,c)}finally{wd=!1,ud()}}function ni(a){if(wf.call(xf,a))return!0;if(wf.call(yf,a))return!1;if(oi.test(a))return xf[a]=
!0;yf[a]=!0;return!1}function pi(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function qi(a,b,c,d){if(null===b||"undefined"===typeof b||pi(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function L(a,
b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}function xd(a,b,c,d){var e=E.hasOwnProperty(b)?E[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(qi(b,c,e,d)&&(c=null),d||null===e?ni(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,
d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function zb(a){if(null===a||"object"!==typeof a)return null;a=zf&&a[zf]||a["@@iterator"];return"function"===typeof a?a:null}function ri(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function na(a){if(null==a)return null;
if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Ma:return"Fragment";case gb:return"Portal";case kc:return"Profiler";case Af:return"StrictMode";case lc:return"Suspense";case yd:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Bf:return"Context.Consumer";case Cf:return"Context.Provider";case zd:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ad:return na(a.type);
case Df:return na(a.render);case Ef:if(a=1===a._status?a._result:null)return na(a)}return null}function Bd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=na(a.type);c=null;d&&(c=na(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(si,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function va(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function Ff(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function ti(a){var b=Ff(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,
b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function mc(a){a._valueTracker||(a._valueTracker=ti(a))}function Gf(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ff(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Cd(a,b){var c=b.checked;return M({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=
c?c:a._wrapperState.initialChecked})}function Hf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=va(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function If(a,b){b=b.checked;null!=b&&xd(a,"checked",b,!1)}function Dd(a,b){If(a,b);var c=va(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==
""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?Ed(a,b.type,c):b.hasOwnProperty("defaultValue")&&Ed(a,b.type,va(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Jf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=
b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function Ed(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function ui(a){var b="";ea.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Fd(a,b){a=M({children:void 0},b);if(b=ui(b.children))a.children=b;return a}function hb(a,b,c,d){a=a.options;if(b){b={};
for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+va(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Gd(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(k(91));return M({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}
function Kf(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(k(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(k(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:va(c)}}function Lf(a,b){var c=va(b.value),d=va(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Mf(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==
b&&null!==b&&(a.value=b)}function Nf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function oc(a){if(Id[a])return Id[a];
if(!ib[a])return a;var b=ib[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Of)return Id[a]=b[c];return a}function Jd(a){var b=Pf.get(a);void 0===b&&(b=new Map,Pf.set(a,b));return b}function Na(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Qf(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Rf(a){if(Na(a)!==
a)throw Error(k(188));}function vi(a){var b=a.alternate;if(!b){b=Na(a);if(null===b)throw Error(k(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Rf(e),a;if(f===d)return Rf(e),b;f=f.sibling}throw Error(k(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=
f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(k(189));}}if(c.alternate!==d)throw Error(k(190));}if(3!==c.tag)throw Error(k(188));return c.stateNode.current===c?a:b}function Sf(a){a=vi(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function jb(a,b){if(null==
b)throw Error(k(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Kd(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function pc(a){null!==a&&(Ab=jb(Ab,a));a=Ab;Ab=null;if(a){Kd(a,wi);if(Ab)throw Error(k(95));if(hc)throw a=pd,hc=!1,pd=null,a;}}function Ld(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:
a}function Tf(a){if(!wa)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Uf(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>qc.length&&qc.push(a)}function Vf(a,b,c,d){if(qc.length){var e=qc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function Wf(a){var b=
a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=Bb(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Ld(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,m=0;m<jc.length;m++){var n=jc[m];n&&(n=n.extractEvents(d,b,f,e,g))&&(h=jb(h,n))}pc(h)}}function Md(a,
b,c){if(!c.has(a)){switch(a){case "scroll":Cb(b,"scroll",!0);break;case "focus":case "blur":Cb(b,"focus",!0);Cb(b,"blur",!0);c.set("blur",null);c.set("focus",null);break;case "cancel":case "close":Tf(a)&&Cb(b,a,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Db.indexOf(a)&&w(a,b)}c.set(a,null)}}function xi(a,b){var c=Jd(b);Nd.forEach(function(a){Md(a,b,c)});yi.forEach(function(a){Md(a,b,c)})}function Od(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,
container:d}}function Xf(a,b){switch(a){case "focus":case "blur":xa=null;break;case "dragenter":case "dragleave":ya=null;break;case "mouseover":case "mouseout":za=null;break;case "pointerover":case "pointerout":Eb.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Fb.delete(b.pointerId)}}function Gb(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Od(b,c,d,e,f),null!==b&&(b=Hb(b),null!==b&&Yf(b)),a;a.eventSystemFlags|=d;return a}function zi(a,b,c,d,e){switch(b){case "focus":return xa=
Gb(xa,a,b,c,d,e),!0;case "dragenter":return ya=Gb(ya,a,b,c,d,e),!0;case "mouseover":return za=Gb(za,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Eb.set(f,Gb(Eb.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Fb.set(f,Gb(Fb.get(f)||null,a,b,c,d,e)),!0}return!1}function Ai(a){var b=Bb(a.target);if(null!==b){var c=Na(b);if(null!==c)if(b=c.tag,13===b){if(b=Qf(c),null!==b){a.blockedOn=b;Pd(a.priority,function(){Bi(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=
3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function rc(a){if(null!==a.blockedOn)return!1;var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Hb(b);null!==c&&Yf(c);a.blockedOn=b;return!1}return!0}function Zf(a,b,c){rc(a)&&c.delete(b)}function Ci(){for(Rd=!1;0<fa.length;){var a=fa[0];if(null!==a.blockedOn){a=Hb(a.blockedOn);null!==a&&Di(a);break}var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:fa.shift()}null!==
xa&&rc(xa)&&(xa=null);null!==ya&&rc(ya)&&(ya=null);null!==za&&rc(za)&&(za=null);Eb.forEach(Zf);Fb.forEach(Zf)}function Ib(a,b){a.blockedOn===b&&(a.blockedOn=null,Rd||(Rd=!0,$f(ag,Ci)))}function bg(a){if(0<fa.length){Ib(fa[0],a);for(var b=1;b<fa.length;b++){var c=fa[b];c.blockedOn===a&&(c.blockedOn=null)}}null!==xa&&Ib(xa,a);null!==ya&&Ib(ya,a);null!==za&&Ib(za,a);b=function(b){return Ib(b,a)};Eb.forEach(b);Fb.forEach(b);for(b=0;b<Jb.length;b++)c=Jb[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Jb.length&&
(b=Jb[0],null===b.blockedOn);)Ai(b),null===b.blockedOn&&Jb.shift()}function Sd(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b};Td.set(d,b);cg.set(d,f);dg[e]=f}}function w(a,b){Cb(b,a,!1)}function Cb(a,b,c){var d=Td.get(b);switch(void 0===d?2:d){case 0:d=Ei.bind(null,b,1,a);break;case 1:d=Fi.bind(null,b,1,a);break;default:d=sc.bind(null,b,1,a)}c?a.addEventListener(b,
d,!0):a.addEventListener(b,d,!1)}function Ei(a,b,c,d){Oa||vd();var e=sc,f=Oa;Oa=!0;try{eg(e,a,b,c,d)}finally{(Oa=f)||ud()}}function Fi(a,b,c,d){Gi(Hi,sc.bind(null,a,b,c,d))}function sc(a,b,c,d){if(tc)if(0<fa.length&&-1<Nd.indexOf(a))a=Od(null,a,b,c,d),fa.push(a);else{var e=Qd(a,b,c,d);if(null===e)Xf(a,d);else if(-1<Nd.indexOf(a))a=Od(e,a,b,c,d),fa.push(a);else if(!zi(e,a,b,c,d)){Xf(a,d);a=Vf(a,d,null,b);try{uf(Wf,a)}finally{Uf(a)}}}}function Qd(a,b,c,d){c=Ld(d);c=Bb(c);if(null!==c){var e=Na(c);if(null===
e)c=null;else{var f=e.tag;if(13===f){c=Qf(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=Vf(a,d,c,b);try{uf(Wf,a)}finally{Uf(a)}return null}function fg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||Kb.hasOwnProperty(a)&&Kb[a]?(""+b).trim():b+"px"}function gg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=fg(c,b[c],d);"float"===
c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ud(a,b){if(b){if(Ii[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(k(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(k(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(k(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(k(62,""));}}function Vd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function oa(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Jd(a);b=rd[b];for(var d=0;d<b.length;d++)Md(b[d],a,c)}function uc(){}function Wd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function hg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ig(a,b){var c=hg(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,
offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=hg(c)}}function jg(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?jg(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function kg(){for(var a=window,b=Wd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Wd(a.document)}return b}
function Xd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function lg(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}function Yd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&
null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function kb(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function mg(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ng||c===Zd||c===$d){if(0===b)return a;b--}else c===og&&b++}a=a.previousSibling}return null}function Bb(a){var b=a[Aa];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Lb]||c[Aa]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=mg(a);null!==
a;){if(c=a[Aa])return c;a=mg(a)}return b}a=c;c=a.parentNode}return null}function Hb(a){a=a[Aa]||a[Lb];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(k(33));}function ae(a){return a[vc]||null}function pa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function pg(a,b){var c=a.stateNode;if(!c)return null;var d=td(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=
!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==typeof c)throw Error(k(231,b,typeof c));return c}function qg(a,b,c){if(b=pg(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a)}function Ji(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=pa(b);for(b=c.length;0<b--;)qg(c[b],
"captured",a);for(b=0;b<c.length;b++)qg(c[b],"bubbled",a)}}function be(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=pg(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a))}function Ki(a){a&&a.dispatchConfig.registrationName&&be(a._targetInst,null,a)}function lb(a){Kd(a,Ji)}function rg(){if(wc)return wc;var a,b=ce,c=b.length,d,e="value"in Ba?Ba.value:Ba.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=
c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return wc=e.slice(a,1<d?1-d:void 0)}function xc(){return!0}function yc(){return!1}function R(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?xc:yc;this.isPropagationStopped=yc;return this}function Li(a,b,c,d){if(this.eventPool.length){var e=
this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Mi(a){if(!(a instanceof this))throw Error(k(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function sg(a){a.eventPool=[];a.getPooled=Li;a.release=Mi}function tg(a,b){switch(a){case "keyup":return-1!==Ni.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function ug(a){a=a.detail;return"object"===typeof a&&"data"in
a?a.data:null}function Oi(a,b){switch(a){case "compositionend":return ug(b);case "keypress":if(32!==b.which)return null;vg=!0;return wg;case "textInput":return a=b.data,a===wg&&vg?null:a;default:return null}}function Pi(a,b){if(mb)return"compositionend"===a||!de&&tg(a,b)?(a=rg(),wc=ce=Ba=null,mb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return xg&&"ko"!==b.locale?null:b.data;default:return null}}function yg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Qi[a.type]:"textarea"===b?!0:!1}function zg(a,b,c){a=R.getPooled(Ag.change,a,b,c);a.type="change";sf(c);lb(a);return a}function Ri(a){pc(a)}function zc(a){var b=Pa(a);if(Gf(b))return a}function Si(a,b){if("change"===a)return b}function Bg(){Mb&&(Mb.detachEvent("onpropertychange",Cg),Nb=Mb=null)}function Cg(a){if("value"===a.propertyName&&
zc(Nb))if(a=zg(Nb,a,Ld(a)),Oa)pc(a);else{Oa=!0;try{ee(Ri,a)}finally{Oa=!1,ud()}}}function Ti(a,b,c){"focus"===a?(Bg(),Mb=b,Nb=c,Mb.attachEvent("onpropertychange",Cg)):"blur"===a&&Bg()}function Ui(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return zc(Nb)}function Vi(a,b){if("click"===a)return zc(b)}function Wi(a,b){if("input"===a||"change"===a)return zc(b)}function Xi(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Yi[a])?!!b[a]:!1}function fe(a){return Xi}
function Zi(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function Ob(a,b){if(Qa(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!$i.call(b,c[d])||!Qa(a[c[d]],b[c[d]]))return!1;return!0}function Dg(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(ge||null==nb||nb!==Wd(c))return null;c=nb;"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,
end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return Pb&&Ob(Pb,c)?null:(Pb=c,a=R.getPooled(Eg.select,he,a,b),a.type="select",a.target=nb,lb(a),a)}function Ac(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function q(a,b){0>ob||(a.current=ie[ob],ie[ob]=null,ob--)}function y(a,b,c){ob++;
ie[ob]=a.current;a.current=b}function pb(a,b){var c=a.type.contextTypes;if(!c)return Ca;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Fg(a,b,c){if(B.current!==Ca)throw Error(k(168));y(B,b);y(G,c)}
function Gg(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(k(108,na(b)||"Unknown",e));return M({},c,{},d)}function Bc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ca;Ra=B.current;y(B,a);y(G,G.current);return!0}function Hg(a,b,c){var d=a.stateNode;if(!d)throw Error(k(169));c?(a=Gg(a,b,Ra),d.__reactInternalMemoizedMergedChildContext=a,q(G),q(B),y(B,a)):q(G);y(G,c)}function Cc(){switch(aj()){case Dc:return 99;
case Ig:return 98;case Jg:return 97;case Kg:return 96;case Lg:return 95;default:throw Error(k(332));}}function Mg(a){switch(a){case 99:return Dc;case 98:return Ig;case 97:return Jg;case 96:return Kg;case 95:return Lg;default:throw Error(k(332));}}function Da(a,b){a=Mg(a);return bj(a,b)}function Ng(a,b,c){a=Mg(a);return je(a,b,c)}function Og(a){null===qa?(qa=[a],Ec=je(Dc,Pg)):qa.push(a);return Qg}function ha(){if(null!==Ec){var a=Ec;Ec=null;Rg(a)}Pg()}function Pg(){if(!ke&&null!==qa){ke=!0;var a=0;
try{var b=qa;Da(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});qa=null}catch(c){throw null!==qa&&(qa=qa.slice(a+1)),je(Dc,ha),c;}finally{ke=!1}}}function Fc(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function aa(a,b){if(a&&a.defaultProps){b=M({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function le(){Gc=qb=Hc=null}function me(a){var b=Ic.current;q(Ic);a.type._context._currentValue=b}function Sg(a,b){for(;null!==a;){var c=
a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function rb(a,b){Hc=a;Gc=qb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(ia=!0),a.firstContext=null)}function W(a,b){if(Gc!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Gc=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===qb){if(null===
Hc)throw Error(k(308));qb=b;Hc.dependencies={expirationTime:0,firstContext:b,responders:null}}else qb=qb.next=b}return a._currentValue}function ne(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oe(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Ea(a,b){a={expirationTime:a,suspenseConfig:b,tag:Tg,payload:null,callback:null,next:null};return a.next=
a}function Fa(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}function Ug(a,b){var c=a.alternate;null!==c&&oe(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function Qb(a,b,c,d){var e=a.updateQueue;Ga=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&
(h.baseQueue=g))}if(null!==f){h=f.next;var m=e.baseState,n=0,k=null,ba=null,l=null;if(null!==h){var p=h;do{g=p.expirationTime;if(g<d){var t={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===l?(ba=l=t,k=m):l=l.next=t;g>n&&(n=g)}else{null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null});Vg(g,p.suspenseConfig);a:{var q=a,r=p;g=b;t=c;switch(r.tag){case 1:q=
r.payload;if("function"===typeof q){m=q.call(t,m,g);break a}m=q;break a;case 3:q.effectTag=q.effectTag&-4097|64;case Tg:q=r.payload;g="function"===typeof q?q.call(t,m,g):q;if(null===g||void 0===g)break a;m=M({},m,g);break a;case Jc:Ga=!0}}null!==p.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[p]:g.push(p))}p=p.next;if(null===p||p===h)if(g=e.shared.pending,null===g)break;else p=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===l?k=m:l.next=ba;e.baseState=k;e.baseQueue=
l;Kc(n);a.expirationTime=n;a.memoizedState=m}}function Wg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if("function"!==typeof d)throw Error(k(191,d));d.call(e)}}}function Lc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:M({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}function Xg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,
f,g):b.prototype&&b.prototype.isPureReactComponent?!Ob(c,d)||!Ob(e,f):!0}function Yg(a,b,c){var d=!1,e=Ca;var f=b.contextType;"object"===typeof f&&null!==f?f=W(f):(e=N(b)?Ra:B.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?pb(a,e):Ca);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Mc;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zg(a,
b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Mc.enqueueReplaceState(b,b.state,null)}function pe(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$g;ne(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=W(f):(f=N(b)?Ra:B.current,e.context=pb(a,f));Qb(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;
"function"===typeof f&&(Lc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Mc.enqueueReplaceState(e,e.state,null),Qb(a,c,e,d),e.state=a.memoizedState);"function"===
typeof e.componentDidMount&&(a.effectTag|=4)}function Rb(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(k(309));var d=c.stateNode}if(!d)throw Error(k(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$g&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(k(284));if(!c._owner)throw Error(k(290,
a));}return a}function Nc(a,b){if("textarea"!==a.type)throw Error(k(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""));}function ah(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,
b),b=b.sibling;return a}function e(a,b){a=Sa(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=qe(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function m(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Rb(a,b,c),d.return=a,d;d=Oc(c.type,
c.key,c.props,null,a.mode,d);d.ref=Rb(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=re(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ha(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function ba(a,b,c){if("string"===typeof b||"number"===typeof b)return b=qe(""+b,a.mode,c),b.return=a,b;if("object"===
typeof b&&null!==b){switch(b.$$typeof){case Pc:return c=Oc(b.type,b.key,b.props,null,a.mode,c),c.ref=Rb(a,null,b),c.return=a,c;case gb:return b=re(b,a.mode,c),b.return=a,b}if(Qc(b)||zb(b))return b=Ha(b,a.mode,c,null),b.return=a,b;Nc(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Pc:return c.key===e?c.type===Ma?l(a,b,c.props.children,d,e):m(a,b,c,
d):null;case gb:return c.key===e?n(a,b,c,d):null}if(Qc(c)||zb(c))return null!==e?null:l(a,b,c,d,null);Nc(a,c)}return null}function t(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Pc:return a=a.get(null===d.key?c:d.key)||null,d.type===Ma?l(b,a,d.props.children,e,d.key):m(b,a,d,e);case gb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(Qc(d)||zb(d))return a=a.get(c)||null,l(b,a,d,e,null);
Nc(b,d)}return null}function q(e,g,h,m){for(var n=null,k=null,l=g,r=g=0,C=null;null!==l&&r<h.length;r++){l.index>r?(C=l,l=null):C=l.sibling;var O=p(e,l,h[r],m);if(null===O){null===l&&(l=C);break}a&&l&&null===O.alternate&&b(e,l);g=f(O,g,r);null===k?n=O:k.sibling=O;k=O;l=C}if(r===h.length)return c(e,l),n;if(null===l){for(;r<h.length;r++)l=ba(e,h[r],m),null!==l&&(g=f(l,g,r),null===k?n=l:k.sibling=l,k=l);return n}for(l=d(e,l);r<h.length;r++)C=t(l,e,r,h[r],m),null!==C&&(a&&null!==C.alternate&&l.delete(null===
C.key?r:C.key),g=f(C,g,r),null===k?n=C:k.sibling=C,k=C);a&&l.forEach(function(a){return b(e,a)});return n}function w(e,g,h,n){var m=zb(h);if("function"!==typeof m)throw Error(k(150));h=m.call(h);if(null==h)throw Error(k(151));for(var l=m=null,r=g,C=g=0,O=null,v=h.next();null!==r&&!v.done;C++,v=h.next()){r.index>C?(O=r,r=null):O=r.sibling;var q=p(e,r,v.value,n);if(null===q){null===r&&(r=O);break}a&&r&&null===q.alternate&&b(e,r);g=f(q,g,C);null===l?m=q:l.sibling=q;l=q;r=O}if(v.done)return c(e,r),m;
if(null===r){for(;!v.done;C++,v=h.next())v=ba(e,v.value,n),null!==v&&(g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);return m}for(r=d(e,r);!v.done;C++,v=h.next())v=t(r,e,C,v.value,n),null!==v&&(a&&null!==v.alternate&&r.delete(null===v.key?C:v.key),g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);a&&r.forEach(function(a){return b(e,a)});return m}return function(a,d,f,h){var m="object"===typeof f&&null!==f&&f.type===Ma&&null===f.key;m&&(f=f.props.children);var n="object"===typeof f&&null!==f;if(n)switch(f.$$typeof){case Pc:a:{n=
f.key;for(m=d;null!==m;){if(m.key===n){switch(m.tag){case 7:if(f.type===Ma){c(a,m.sibling);d=e(m,f.props.children);d.return=a;a=d;break a}break;default:if(m.elementType===f.type){c(a,m.sibling);d=e(m,f.props);d.ref=Rb(a,m,f);d.return=a;a=d;break a}}c(a,m);break}else b(a,m);m=m.sibling}f.type===Ma?(d=Ha(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Oc(f.type,f.key,f.props,null,a.mode,h),h.ref=Rb(a,d,f),h.return=a,a=h)}return g(a);case gb:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===
f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=re(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=qe(f,a.mode,h),d.return=a,a=d),g(a);if(Qc(f))return q(a,d,f,h);if(zb(f))return w(a,d,f,h);n&&Nc(a,f);if("undefined"===typeof f&&!m)switch(a.tag){case 1:case 0:throw a=
a.type,Error(k(152,a.displayName||a.name||"Component"));}return c(a,d)}}function Ta(a){if(a===Sb)throw Error(k(174));return a}function se(a,b){y(Tb,b);y(Ub,a);y(ja,Sb);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Hd(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Hd(b,a)}q(ja);y(ja,b)}function tb(a){q(ja);q(Ub);q(Tb)}function bh(a){Ta(Tb.current);var b=Ta(ja.current);var c=Hd(b,a.type);b!==c&&(y(Ub,a),y(ja,c))}function te(a){Ub.current===
a&&(q(ja),q(Ub))}function Rc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===$d||c.data===Zd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ue(a,b){return{responder:a,props:b}}
function S(){throw Error(k(321));}function ve(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Qa(a[c],b[c]))return!1;return!0}function we(a,b,c,d,e,f){Ia=f;z=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;Sc.current=null===a||null===a.memoizedState?dj:ej;a=c(d,e);if(b.expirationTime===Ia){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(k(301));f+=1;J=K=null;b.updateQueue=null;Sc.current=fj;a=c(d,e)}while(b.expirationTime===Ia)}Sc.current=Tc;b=null!==K&&null!==K.next;
Ia=0;J=K=z=null;Uc=!1;if(b)throw Error(k(300));return a}function ub(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===J?z.memoizedState=J=a:J=J.next=a;return J}function vb(){if(null===K){var a=z.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===J?z.memoizedState:J.next;if(null!==b)J=b,K=a;else{if(null===a)throw Error(k(310));K=a;a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===J?z.memoizedState=
J=a:J=J.next=a}return J}function Ua(a,b){return"function"===typeof b?b(a):b}function Vc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,m=e;do{var n=m.expirationTime;if(n<Ia){var l={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,
next:null};null===h?(g=h=l,f=d):h=h.next=l;n>z.expirationTime&&(z.expirationTime=n,Kc(n))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),Vg(n,m.suspenseConfig),d=m.eagerReducer===a?m.eagerState:a(d,m.action);m=m.next}while(null!==m&&m!==e);null===h?f=d:h.next=g;Qa(d,b.memoizedState)||(ia=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,
c.dispatch]}function Wc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Qa(f,b.memoizedState)||(ia=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function xe(a){var b=ub();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Ua,
lastRenderedState:a};a=a.dispatch=ch.bind(null,z,a);return[b.memoizedState,a]}function ye(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=z.updateQueue;null===b?(b={lastEffect:null},z.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function dh(a){return vb().memoizedState}function ze(a,b,c,d){var e=ub();z.effectTag|=a;e.memoizedState=ye(1|b,c,void 0,void 0===d?null:d)}function Ae(a,b,c,d){var e=vb();
d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&ve(d,g.deps)){ye(b,c,f,d);return}}z.effectTag|=a;e.memoizedState=ye(1|b,c,f,d)}function eh(a,b){return ze(516,4,a,b)}function Xc(a,b){return Ae(516,4,a,b)}function fh(a,b){return Ae(4,2,a,b)}function gh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function hh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;
return Ae(4,2,gh.bind(null,b,a),c)}function Be(a,b){}function ih(a,b){ub().memoizedState=[a,void 0===b?null:b];return a}function Yc(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function jh(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Ce(a,b,c){var d=Cc();Da(98>d?98:d,function(){a(!0)});Da(97<d?97:d,function(){var d=
X.suspense;X.suspense=void 0===b?null:b;try{a(!1),c()}finally{X.suspense=d}})}function ch(a,b,c){var d=ka(),e=Vb.suspense;d=Va(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===z||null!==f&&f===z)Uc=!0,e.expirationTime=Ia,z.expirationTime=Ia;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.eagerReducer=f;e.eagerState=h;if(Qa(h,g))return}catch(m){}finally{}Ja(a,d)}}function kh(a,b){var c=la(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function lh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?
null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function De(a){if(Wa){var b=Ka;if(b){var c=b;if(!lh(a,b)){b=kb(c.nextSibling);if(!b||!lh(a,b)){a.effectTag=a.effectTag&-1025|2;Wa=!1;ra=a;return}kh(ra,c)}ra=a;Ka=kb(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Wa=!1,ra=a}}function mh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ra=a}function Zc(a){if(a!==ra)return!1;if(!Wa)return mh(a),Wa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==
b&&!Yd(b,a.memoizedProps))for(b=Ka;b;)kh(a,b),b=kb(b.nextSibling);mh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(k(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===og){if(0===b){Ka=kb(a.nextSibling);break a}b--}else c!==ng&&c!==Zd&&c!==$d||b++}a=a.nextSibling}Ka=null}}else Ka=ra?kb(a.stateNode.nextSibling):null;return!0}function Ee(){Ka=ra=null;Wa=!1}function T(a,b,c,d){b.child=null===a?Fe(b,null,c,d):wb(b,a.child,c,d)}function nh(a,
b,c,d,e){c=c.render;var f=b.ref;rb(b,e);d=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,d,e);return b.child}function oh(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Ge(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ph(a,b,g,d,e,f);a=Oc(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Ob,c(e,d)&&a.ref===b.ref))return sa(a,b,f);b.effectTag|=1;a=Sa(g,d);a.ref=b.ref;a.return=b;return b.child=a}function ph(a,b,c,d,e,f){return null!==a&&Ob(a.memoizedProps,d)&&a.ref===b.ref&&(ia=!1,e<f)?(b.expirationTime=a.expirationTime,sa(a,b,f)):He(a,b,c,d,f)}function qh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function He(a,b,c,d,e){var f=N(c)?Ra:B.current;f=pb(b,f);rb(b,e);c=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=
a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,c,e);return b.child}function rh(a,b,c,d,e){if(N(c)){var f=!0;Bc(b)}else f=!1;rb(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yg(b,c,d),pe(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var m=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n));var l=c.getDerivedStateFromProps,k="function"===
typeof l||"function"===typeof g.getSnapshotBeforeUpdate;k||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n);Ga=!1;var p=b.memoizedState;g.state=p;Qb(b,d,g,e);m=b.memoizedState;h!==d||p!==m||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),m=b.memoizedState),(h=Ga||Xg(b,c,h,d,p,m,n))?(k||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&
g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,oe(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:aa(b.type,h),m=g.context,n=c.contextType,"object"===typeof n&&null!==
n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n)),l=c.getDerivedStateFromProps,(k="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n),Ga=!1,m=b.memoizedState,g.state=m,Qb(b,d,g,e),p=b.memoizedState,h!==d||m!==p||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),p=b.memoizedState),(l=Ga||Xg(b,c,h,d,m,p,n))?(k||"function"!==typeof g.UNSAFE_componentWillUpdate&&
"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,n),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,n)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===
a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=n,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=256),d=!1);return Ie(a,b,c,d,f,e)}function Ie(a,b,c,d,e,f){qh(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hg(b,c,!1),sa(a,b,f);d=b.stateNode;gj.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?
null:d.render();b.effectTag|=1;null!==a&&g?(b.child=wb(b,a.child,null,f),b.child=wb(b,null,h,f)):T(a,b,h,f);b.memoizedState=d.state;e&&Hg(b,c,!0);return b.child}function sh(a){var b=a.stateNode;b.pendingContext?Fg(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Fg(a,b.context,!1);se(a,b.containerInfo)}function th(a,b,c){var d=b.mode,e=b.pendingProps,f=D.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===
a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);y(D,f&1);if(null===a){void 0!==e.fallback&&De(b);if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;b.memoizedState=Je;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Fe(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;
c=Sa(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sa(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=Je;b.child=c;return d}c=wb(b,a.child,e.children,c);b.memoizedState=null;return b.child=c}a=a.child;if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==
a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=Je;b.child=e;return c}b.memoizedState=null;return b.child=wb(b,a,e.children,c)}function uh(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);Sg(a.return,b)}function Ke(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,
lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function vh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;T(a,b,d.children,c);d=D.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&uh(a,c);else if(19===a.tag)uh(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===
a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(D,d);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Rc(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ke(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Rc(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ke(b,
!0,c,null,f,b.lastEffect);break;case "together":Ke(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function sa(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Kc(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(k(153));if(null!==b.child){a=b.child;c=Sa(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sa(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function $c(a,b){switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function hj(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return N(b.type)&&(q(G),q(B)),
null;case 3:return tb(),q(G),q(B),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Zc(b)||(b.effectTag|=4),wh(b),null;case 5:te(b);c=Ta(Tb.current);var e=b.type;if(null!==a&&null!=b.stateNode)ij(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(k(166));return null}a=Ta(ja.current);if(Zc(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Aa]=b;d[vc]=f;switch(e){case "iframe":case "object":case "embed":w("load",
d);break;case "video":case "audio":for(a=0;a<Db.length;a++)w(Db[a],d);break;case "source":w("error",d);break;case "img":case "image":case "link":w("error",d);w("load",d);break;case "form":w("reset",d);w("submit",d);break;case "details":w("toggle",d);break;case "input":Hf(d,f);w("invalid",d);oa(c,"onChange");break;case "select":d._wrapperState={wasMultiple:!!f.multiple};w("invalid",d);oa(c,"onChange");break;case "textarea":Kf(d,f),w("invalid",d),oa(c,"onChange")}Ud(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(a=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(a=["children",""+h]):db.hasOwnProperty(g)&&null!=h&&oa(c,g)}switch(e){case "input":mc(d);Jf(d,f,!0);break;case "textarea":mc(d);Mf(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=uc)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=Nf(e));"http://www.w3.org/1999/xhtml"===
a?"script"===e?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Aa]=b;a[vc]=d;jj(a,b,!1,!1);b.stateNode=a;g=Vd(e,d);switch(e){case "iframe":case "object":case "embed":w("load",a);h=d;break;case "video":case "audio":for(h=0;h<Db.length;h++)w(Db[h],a);h=d;break;case "source":w("error",a);
h=d;break;case "img":case "image":case "link":w("error",a);w("load",a);h=d;break;case "form":w("reset",a);w("submit",a);h=d;break;case "details":w("toggle",a);h=d;break;case "input":Hf(a,d);h=Cd(a,d);w("invalid",a);oa(c,"onChange");break;case "option":h=Fd(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};h=M({},d,{value:void 0});w("invalid",a);oa(c,"onChange");break;case "textarea":Kf(a,d);h=Gd(a,d);w("invalid",a);oa(c,"onChange");break;default:h=d}Ud(e,h);var m=h;for(f in m)if(m.hasOwnProperty(f)){var n=
m[f];"style"===f?gg(a,n):"dangerouslySetInnerHTML"===f?(n=n?n.__html:void 0,null!=n&&xh(a,n)):"children"===f?"string"===typeof n?("textarea"!==e||""!==n)&&Wb(a,n):"number"===typeof n&&Wb(a,""+n):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(db.hasOwnProperty(f)?null!=n&&oa(c,f):null!=n&&xd(a,f,n,g))}switch(e){case "input":mc(a);Jf(a,d,!1);break;case "textarea":mc(a);Mf(a);break;case "option":null!=d.value&&a.setAttribute("value",""+va(d.value));break;case "select":a.multiple=
!!d.multiple;c=d.value;null!=c?hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof h.onClick&&(a.onclick=uc)}lg(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)kj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(k(166));c=Ta(Tb.current);Ta(ja.current);Zc(b)?(c=b.stateNode,d=b.memoizedProps,c[Aa]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?
c:c.ownerDocument).createTextNode(d),c[Aa]=b,b.stateNode=c)}return null;case 13:q(D);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Zc(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||
0!==(D.current&1))F===Xa&&(F=ad);else{if(F===Xa||F===ad)F=bd;0!==Xb&&null!==U&&(Ya(U,P),yh(U,Xb))}if(c||d)b.effectTag|=4;return null;case 4:return tb(),wh(b),null;case 10:return me(b),null;case 17:return N(b.type)&&(q(G),q(B)),null;case 19:q(D);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)$c(d,!1);else{if(F!==Xa||null!==a&&0!==(a.effectTag&64))for(f=b.child;null!==f;){a=Rc(f);if(null!==a){b.effectTag|=64;$c(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=
e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,
e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;y(D,D.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=Rc(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),$c(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Y()-d.renderingStartTime>d.tailExpiration&&
1<c&&(b.effectTag|=64,e=!0,$c(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=Y()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=Y(),c.sibling=null,b=D.current,y(D,e?b&1|2:b&1),c):null}throw Error(k(156,b.tag));}function lj(a,b){switch(a.tag){case 1:return N(a.type)&&(q(G),q(B)),b=a.effectTag,b&4096?
(a.effectTag=b&-4097|64,a):null;case 3:tb();q(G);q(B);b=a.effectTag;if(0!==(b&64))throw Error(k(285));a.effectTag=b&-4097|64;return a;case 5:return te(a),null;case 13:return q(D),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return q(D),null;case 4:return tb(),null;case 10:return me(a),null;default:return null}}function Le(a,b){return{value:a,source:b,stack:Bd(b)}}function Me(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Bd(c));null!==c&&na(c.type);b=b.value;null!==a&&1===a.tag&&
na(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function mj(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Za(a,c)}}function zh(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Za(a,c)}else b.current=null}function nj(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===
b.type?c:aa(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(k(163));}function Ah(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Bh(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function oj(a,b,c,d){switch(c.tag){case 0:case 11:case 15:case 22:Bh(3,
c);return;case 1:a=c.stateNode;c.effectTag&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:aa(c.type,b.memoizedProps),a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Wg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Wg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.effectTag&4&&lg(c.type,c.memoizedProps)&&
a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&bg(c))));return;case 19:case 17:case 20:case 21:return}throw Error(k(163));}function Ch(a,b,c){"function"===typeof Ne&&Ne(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Da(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Za(g,
h)}}a=a.next}while(a!==d)})}break;case 1:zh(b);c=b.stateNode;"function"===typeof c.componentWillUnmount&&mj(b,c);break;case 5:zh(b);break;case 4:Dh(a,b,c)}}function Eh(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Eh(b)}function Fh(a){return 5===a.tag||3===a.tag||4===a.tag}function Gh(a){a:{for(var b=a.return;null!==
b;){if(Fh(b)){var c=b;break a}b=b.return}throw Error(k(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(k(161));}c.effectTag&16&&(Wb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fh(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;
else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Oe(a,c,b):Pe(a,c,b)}function Oe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=uc));else if(4!==d&&(a=a.child,null!==a))for(Oe(a,b,c),a=a.sibling;null!==a;)Oe(a,b,c),a=a.sibling}
function Pe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Pe(a,b,c),a=a.sibling;null!==a;)Pe(a,b,c),a=a.sibling}function Dh(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(k(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=
a,m=d,n=c,l=m;;)if(Ch(h,l,n),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===m)break a;for(;null===l.sibling;){if(null===l.return||l.return===m)break a;l=l.return}l.sibling.return=l.return;l=l.sibling}g?(h=f,m=d.stateNode,8===h.nodeType?h.parentNode.removeChild(m):h.removeChild(m)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ch(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===
b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}function Qe(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Ah(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[vc]=d;"input"===a&&"radio"===d.type&&null!=d.name&&If(c,d);Vd(a,e);b=Vd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],
h=f[e+1];"style"===g?gg(c,h):"dangerouslySetInnerHTML"===g?xh(c,h):"children"===g?Wb(c,h):xd(c,g,h,b)}switch(a){case "input":Dd(c,d);break;case "textarea":Lf(c,d);break;case "select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?hb(c,!!d.multiple,d.defaultValue,!0):hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(k(162));b.stateNode.nodeValue=b.memoizedProps;
return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,bg(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,Re=Y());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null,f.style.display=fg("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?
"":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Hh(b);return;case 19:Hh(b);return;case 17:return}throw Error(k(163));}function Hh(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=
new pj);b.forEach(function(b){var d=qj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Ih(a,b,c){c=Ea(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){cd||(cd=!0,Se=d);Me(a,b)};return c}function Jh(a,b,c){c=Ea(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Me(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&
(null===La?La=new Set([this]):La.add(this),Me(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ka(){return(p&(ca|ma))!==H?1073741821-(Y()/10|0):0!==dd?dd:dd=1073741821-(Y()/10|0)}function Va(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=Cc();if(0===(b&4))return 99===d?1073741823:1073741822;if((p&ca)!==H)return P;if(null!==c)a=Fc(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=Fc(a,150,100);break;case 97:case 96:a=
Fc(a,5E3,250);break;case 95:a=2;break;default:throw Error(k(326));}null!==U&&a===P&&--a;return a}function ed(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&
(U===e&&(Kc(b),F===bd&&Ya(e,P)),yh(e,b));return e}function fd(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Kh(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}function V(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Og(Te.bind(null,a));else{var b=fd(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=ka();
1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qg&&Rg(c)}a.callbackExpirationTime=b;a.callbackPriority=d;b=1073741823===b?Og(Te.bind(null,a)):Ng(d,Lh.bind(null,a),{timeout:10*(1073741821-b)-Y()});a.callbackNode=b}}}function Lh(a,b){dd=0;if(b)return b=ka(),Ue(a,b),V(a),null;var c=fd(a);if(0!==c){b=a.callbackNode;if((p&(ca|ma))!==H)throw Error(k(327));
xb();a===U&&c===P||$a(a,c);if(null!==t){var d=p;p|=ca;var e=Mh();do try{rj();break}catch(h){Nh(a,h)}while(1);le();p=d;gd.current=e;if(F===hd)throw b=id,$a(a,c),Ya(a,c),V(a),b;if(null===t)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=F,U=null,d){case Xa:case hd:throw Error(k(345));case Oh:Ue(a,2<c?2:c);break;case ad:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(1073741823===ta&&(e=Re+Ph-Y(),10<e)){if(jd){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=
c;$a(a,c);break}}f=fd(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=We(ab.bind(null,a),e);break}ab(a);break;case bd:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(jd&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;$a(a,c);break}e=fd(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}1073741823!==Yb?d=10*(1073741821-Yb)-Y():1073741823===ta?d=0:(d=10*(1073741821-ta)-5E3,e=Y(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=
(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*sj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=We(ab.bind(null,a),d);break}ab(a);break;case Xe:if(1073741823!==ta&&null!==kd){f=ta;var g=kd;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=Y()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){Ya(a,c);a.timeoutHandle=We(ab.bind(null,a),d);break}}ab(a);break;default:throw Error(k(329));}V(a);if(a.callbackNode===b)return Lh.bind(null,a)}}return null}function Te(a){var b=
a.lastExpiredTime;b=0!==b?b:1073741823;if((p&(ca|ma))!==H)throw Error(k(327));xb();a===U&&b===P||$a(a,b);if(null!==t){var c=p;p|=ca;var d=Mh();do try{tj();break}catch(e){Nh(a,e)}while(1);le();p=c;gd.current=d;if(F===hd)throw c=id,$a(a,b),Ya(a,b),V(a),c;if(null!==t)throw Error(k(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;U=null;ab(a);V(a)}return null}function uj(){if(null!==bb){var a=bb;bb=null;a.forEach(function(a,c){Ue(c,a);V(c)});ha()}}function Qh(a,b){var c=p;p|=1;try{return a(b)}finally{p=
c,p===H&&ha()}}function Rh(a,b){var c=p;p&=-2;p|=Ye;try{return a(b)}finally{p=c,p===H&&ha()}}function $a(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,vj(c));if(null!==t)for(c=t.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(q(G),q(B));break;case 3:tb();q(G);q(B);break;case 5:te(d);break;case 4:tb();break;case 13:q(D);break;case 19:q(D);break;case 10:me(d)}c=c.return}U=a;t=Sa(a.current,null);
P=b;F=Xa;id=null;Yb=ta=1073741823;kd=null;Xb=0;jd=!1}function Nh(a,b){do{try{le();Sc.current=Tc;if(Uc)for(var c=z.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}Ia=0;J=K=z=null;Uc=!1;if(null===t||null===t.return)return F=hd,id=b,t=null;a:{var e=a,f=t.return,g=t,h=b;b=P;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&"object"===typeof h&&"function"===typeof h.then){var m=h;if(0===(g.mode&2)){var n=g.alternate;n?(g.updateQueue=n.updateQueue,g.memoizedState=
n.memoizedState,g.expirationTime=n.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var l=0!==(D.current&1),k=f;do{var p;if(p=13===k.tag){var q=k.memoizedState;if(null!==q)p=null!==q.dehydrated?!0:!1;else{var w=k.memoizedProps;p=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:l?!1:!0}}if(p){var y=k.updateQueue;if(null===y){var r=new Set;r.add(m);k.updateQueue=r}else y.add(m);if(0===(k.mode&2)){k.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var O=
Ea(1073741823,null);O.tag=Jc;Fa(g,O)}g.expirationTime=1073741823;break a}h=void 0;g=b;var v=e.pingCache;null===v?(v=e.pingCache=new wj,h=new Set,v.set(m,h)):(h=v.get(m),void 0===h&&(h=new Set,v.set(m,h)));if(!h.has(g)){h.add(g);var x=xj.bind(null,e,m,g);m.then(x,x)}k.effectTag|=4096;k.expirationTime=b;break a}k=k.return}while(null!==k);h=Error((na(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
Bd(g))}F!==Xe&&(F=Oh);h=Le(h,g);k=f;do{switch(k.tag){case 3:m=h;k.effectTag|=4096;k.expirationTime=b;var A=Ih(k,m,b);Ug(k,A);break a;case 1:m=h;var u=k.type,B=k.stateNode;if(0===(k.effectTag&64)&&("function"===typeof u.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===La||!La.has(B)))){k.effectTag|=4096;k.expirationTime=b;var H=Jh(k,m,b);Ug(k,H);break a}}k=k.return}while(null!==k)}t=Sh(t)}catch(cj){b=cj;continue}break}while(1)}function Mh(a){a=gd.current;gd.current=
Tc;return null===a?Tc:a}function Vg(a,b){a<ta&&2<a&&(ta=a);null!==b&&a<Yb&&2<a&&(Yb=a,kd=b)}function Kc(a){a>Xb&&(Xb=a)}function tj(){for(;null!==t;)t=Th(t)}function rj(){for(;null!==t&&!yj();)t=Th(t)}function Th(a){var b=zj(a.alternate,a,P);a.memoizedProps=a.pendingProps;null===b&&(b=Sh(a));Uh.current=null;return b}function Sh(a){t=a;do{var b=t.alternate;a=t.return;if(0===(t.effectTag&2048)){b=hj(b,t,P);if(1===P||1!==t.childExpirationTime){for(var c=0,d=t.child;null!==d;){var e=d.expirationTime,
f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}t.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=t.firstEffect),a.lastEffect=t.lastEffect),1<t.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=t:a.firstEffect=t,a.lastEffect=t))}else{b=lj(t);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=
2048)}b=t.sibling;if(null!==b)return b;t=a}while(null!==t);F===Xa&&(F=Xe);return null}function Ve(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function ab(a){var b=Cc();Da(99,Aj.bind(null,a,b));return null}function Aj(a,b){do xb();while(null!==Zb);if((p&(ca|ma))!==H)throw Error(k(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(k(177));a.callbackNode=null;a.callbackExpirationTime=
0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ve(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===U&&(t=U=null,P=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=p;p|=ma;Uh.current=null;Ze=tc;var g=kg();if(Xd(g)){if("selectionStart"in
g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&0!==m.rangeCount){h=m.anchorNode;var n=m.anchorOffset,q=m.focusNode;m=m.focusOffset;try{h.nodeType,q.nodeType}catch(sb){h=null;break a}var ba=0,w=-1,y=-1,B=0,D=0,r=g,z=null;b:for(;;){for(var v;;){r!==h||0!==n&&3!==r.nodeType||(w=ba+n);r!==q||0!==m&&3!==r.nodeType||(y=ba+m);3===r.nodeType&&(ba+=r.nodeValue.length);if(null===(v=r.firstChild))break;z=r;
r=v}for(;;){if(r===g)break b;z===h&&++B===n&&(w=ba);z===q&&++D===m&&(y=ba);if(null!==(v=r.nextSibling))break;r=z;z=r.parentNode}r=v}h=-1===w||-1===y?null:{start:w,end:y}}else h=null}h=h||{start:0,end:0}}else h=null;$e={activeElementDetached:null,focusedElem:g,selectionRange:h};tc=!1;l=e;do try{Bj()}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=e;do try{for(g=a,h=b;null!==l;){var x=l.effectTag;x&16&&Wb(l.stateNode,"");if(x&128){var A=l.alternate;if(null!==A){var u=
A.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}switch(x&1038){case 2:Gh(l);l.effectTag&=-3;break;case 6:Gh(l);l.effectTag&=-3;Qe(l.alternate,l);break;case 1024:l.effectTag&=-1025;break;case 1028:l.effectTag&=-1025;Qe(l.alternate,l);break;case 4:Qe(l.alternate,l);break;case 8:n=l,Dh(g,n,h),Eh(n)}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);u=$e;A=kg();x=u.focusedElem;h=u.selectionRange;if(A!==x&&x&&x.ownerDocument&&jg(x.ownerDocument.documentElement,
x)){null!==h&&Xd(x)&&(A=h.start,u=h.end,void 0===u&&(u=A),"selectionStart"in x?(x.selectionStart=A,x.selectionEnd=Math.min(u,x.value.length)):(u=(A=x.ownerDocument||document)&&A.defaultView||window,u.getSelection&&(u=u.getSelection(),n=x.textContent.length,g=Math.min(h.start,n),h=void 0===h.end?g:Math.min(h.end,n),!u.extend&&g>h&&(n=h,h=g,g=n),n=ig(x,g),q=ig(x,h),n&&q&&(1!==u.rangeCount||u.anchorNode!==n.node||u.anchorOffset!==n.offset||u.focusNode!==q.node||u.focusOffset!==q.offset)&&(A=A.createRange(),
A.setStart(n.node,n.offset),u.removeAllRanges(),g>h?(u.addRange(A),u.extend(q.node,q.offset)):(A.setEnd(q.node,q.offset),u.addRange(A))))));A=[];for(u=x;u=u.parentNode;)1===u.nodeType&&A.push({element:u,left:u.scrollLeft,top:u.scrollTop});"function"===typeof x.focus&&x.focus();for(x=0;x<A.length;x++)u=A[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}tc=!!Ze;$e=Ze=null;a.current=c;l=e;do try{for(x=a;null!==l;){var F=l.effectTag;F&36&&oj(x,l.alternate,l);if(F&128){A=void 0;var E=l.ref;if(null!==
E){var G=l.stateNode;switch(l.tag){case 5:A=G;break;default:A=G}"function"===typeof E?E(A):E.current=A}}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=null;Cj();p=f}else a.current=c;if(ld)ld=!1,Zb=a,$b=b;else for(l=e;null!==l;)b=l.nextEffect,l.nextEffect=null,l=b;b=a.firstPendingTime;0===b&&(La=null);1073741823===b?a===af?ac++:(ac=0,af=a):ac=0;"function"===typeof bf&&bf(c.stateNode,d);V(a);if(cd)throw cd=!1,a=Se,Se=null,a;if((p&Ye)!==H)return null;
ha();return null}function Bj(){for(;null!==l;){var a=l.effectTag;0!==(a&256)&&nj(l.alternate,l);0===(a&512)||ld||(ld=!0,Ng(97,function(){xb();return null}));l=l.nextEffect}}function xb(){if(90!==$b){var a=97<$b?97:$b;$b=90;return Da(a,Dj)}}function Dj(){if(null===Zb)return!1;var a=Zb;Zb=null;if((p&(ca|ma))!==H)throw Error(k(331));var b=p;p|=ma;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Ah(5,c),Bh(5,c)}}catch(d){if(null===
a)throw Error(k(330));Za(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}p=b;ha();return!0}function Vh(a,b,c){b=Le(c,b);b=Ih(a,b,1073741823);Fa(a,b);a=ed(a,1073741823);null!==a&&V(a)}function Za(a,b){if(3===a.tag)Vh(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Vh(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===La||!La.has(d))){a=Le(b,a);a=Jh(c,a,1073741823);Fa(c,a);c=ed(c,1073741823);null!==
c&&V(c);break}}c=c.return}}function xj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);U===a&&P===c?F===bd||F===ad&&1073741823===ta&&Y()-Re<Ph?$a(a,P):jd=!0:Kh(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,V(a)))}function qj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=ka(),b=Va(b,a,null));a=ed(a,b);null!==a&&V(a)}function Ej(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=
b.inject(a);bf=function(a,e){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(f){}};Ne=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}function Fj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=
null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Ge(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Gj(a){if("function"===typeof a)return Ge(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===zd)return 11;if(a===Ad)return 14}return 2}function Sa(a,b){var c=a.alternate;null===c?(c=la(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=
null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function Oc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Ge(a)&&(g=1);else if("string"===typeof a)g=
5;else a:switch(a){case Ma:return Ha(c.children,e,f,b);case Hj:g=8;e|=7;break;case Af:g=8;e|=1;break;case kc:return a=la(12,c,b,e|8),a.elementType=kc,a.type=kc,a.expirationTime=f,a;case lc:return a=la(13,c,b,e),a.type=lc,a.elementType=lc,a.expirationTime=f,a;case yd:return a=la(19,c,b,e),a.elementType=yd,a.expirationTime=f,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Cf:g=10;break a;case Bf:g=9;break a;case zd:g=11;break a;case Ad:g=14;break a;case Ef:g=16;d=null;break a;case Df:g=
22;break a}throw Error(k(130,null==a?a:typeof a,""));}b=la(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Ha(a,b,c,d){a=la(7,a,d,b);a.expirationTime=c;return a}function qe(a,b,c){a=la(6,a,null,b);a.expirationTime=c;return a}function re(a,b,c){b=la(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Ij(a,b,c){this.tag=b;this.current=null;this.containerInfo=
a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Kh(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function Ya(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;
c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yh(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Ue(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}
function md(a,b,c,d){var e=b.current,f=ka(),g=Vb.suspense;f=Va(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(Na(c)!==c||1!==c.tag)throw Error(k(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(N(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(k(171));}if(1===c.tag){var m=c.type;if(N(m)){c=Gg(c,m,h);break a}}c=h}else c=Ca;null===b.context?b.context=c:b.pendingContext=c;b=Ea(f,g);b.payload={element:a};d=void 0===
d?null:d;null!==d&&(b.callback=d);Fa(e,b);Ja(e,f);return f}function cf(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wh(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function df(a,b){Wh(a,b);(a=a.alternate)&&Wh(a,b)}function ef(a,b,c){c=null!=c&&!0===c.hydrate;var d=new Ij(a,b,c),e=la(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ne(e);a[Lb]=d.current;c&&0!==b&&
xi(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}function bc(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Jj(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ef(a,0,b?{hydrate:!0}:void 0)}function nd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;
if("function"===typeof e){var h=e;e=function(){var a=cf(g);h.call(a)}}md(b,g,a,e)}else{f=c._reactRootContainer=Jj(c,d);g=f._internalRoot;if("function"===typeof e){var m=e;e=function(){var a=cf(g);m.call(a)}}Rh(function(){md(b,g,a,e)})}return cf(g)}function Kj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Xh(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;
if(!bc(b))throw Error(k(200));return Kj(a,b,null,c)}if(!ea)throw Error(k(227));var ki=function(a,b,c,d,e,f,g,h,m){var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(C){this.onError(C)}},yb=!1,gc=null,hc=!1,pd=null,li={onError:function(a){yb=!0;gc=a}},td=null,rf=null,mf=null,ic=null,cb={},jc=[],qd={},db={},rd={},wa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,
sd=null,eb=null,fb=null,ee=function(a,b){return a(b)},eg=function(a,b,c,d,e){return a(b,c,d,e)},vd=function(){},vf=ee,Oa=!1,wd=!1,Z=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Lj=Z.unstable_cancelCallback,ff=Z.unstable_now,$f=Z.unstable_scheduleCallback,Mj=Z.unstable_shouldYield,Yh=Z.unstable_requestPaint,Pd=Z.unstable_runWithPriority,Nj=Z.unstable_getCurrentPriorityLevel,Oj=Z.unstable_ImmediatePriority,Zh=Z.unstable_UserBlockingPriority,ag=Z.unstable_NormalPriority,Pj=Z.unstable_LowPriority,
Qj=Z.unstable_IdlePriority,oi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf=Object.prototype.hasOwnProperty,yf={},xf={},E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=
new L(a,0,!1,a,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];E[b]=new L(b,1,!1,a[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new L(a,2,!1,a.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new L(a,2,!1,a,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=
new L(a,3,!1,a.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(a){E[a]=new L(a,3,!0,a,null,!1)});["capture","download"].forEach(function(a){E[a]=new L(a,4,!1,a,null,!1)});["cols","rows","size","span"].forEach(function(a){E[a]=new L(a,6,!1,a,null,!1)});["rowSpan","start"].forEach(function(a){E[a]=new L(a,5,!1,a.toLowerCase(),null,!1)});var gf=/[\-:]([a-z])/g,hf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(gf,hf);E[b]=new L(b,1,!1,a,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!1)});E.xlinkHref=new L("xlinkHref",1,
!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!0)});var da=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.hasOwnProperty("ReactCurrentDispatcher")||(da.ReactCurrentDispatcher={current:null});da.hasOwnProperty("ReactCurrentBatchConfig")||(da.ReactCurrentBatchConfig={suspense:null});var si=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,Pc=Q?Symbol.for("react.element"):60103,gb=Q?Symbol.for("react.portal"):
60106,Ma=Q?Symbol.for("react.fragment"):60107,Af=Q?Symbol.for("react.strict_mode"):60108,kc=Q?Symbol.for("react.profiler"):60114,Cf=Q?Symbol.for("react.provider"):60109,Bf=Q?Symbol.for("react.context"):60110,Hj=Q?Symbol.for("react.concurrent_mode"):60111,zd=Q?Symbol.for("react.forward_ref"):60112,lc=Q?Symbol.for("react.suspense"):60113,yd=Q?Symbol.for("react.suspense_list"):60120,Ad=Q?Symbol.for("react.memo"):60115,Ef=Q?Symbol.for("react.lazy"):60116,Df=Q?Symbol.for("react.block"):60121,zf="function"===
typeof Symbol&&Symbol.iterator,od,xh=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{od=od||document.createElement("div");od.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=od.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Wb=function(a,
b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},ib={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Id={},Of={};wa&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete ib.animationend.animation,delete ib.animationiteration.animation,delete ib.animationstart.animation),"TransitionEvent"in
window||delete ib.transitionend.transition);var $h=oc("animationend"),ai=oc("animationiteration"),bi=oc("animationstart"),ci=oc("transitionend"),Db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new ("function"===typeof WeakMap?WeakMap:Map),Ab=null,wi=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;
if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)lf(a,b[d],c[d]);else b&&lf(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},qc=[],Rd=!1,fa=[],xa=null,ya=null,za=null,Eb=new Map,Fb=new Map,Jb=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),dg={},cg=new Map,Td=new Map,Rj=["abort","abort",$h,"animationEnd",ai,"animationIteration",bi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ci,"transitionEnd","waiting","waiting"];Sd("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Sd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Sd(Rj,2);(function(a,b){for(var c=0;c<a.length;c++)Td.set(a[c],b)})("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var Hi=Zh,Gi=Pd,tc=!0,Kb={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,
strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sj=["Webkit","ms","Moz","O"];Object.keys(Kb).forEach(function(a){Sj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Kb[b]=Kb[a]})});var Ii=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ng="$",og="/$",$d="$?",Zd="$!",Ze=null,$e=null,We="function"===typeof setTimeout?setTimeout:void 0,vj="function"===
typeof clearTimeout?clearTimeout:void 0,jf=Math.random().toString(36).slice(2),Aa="__reactInternalInstance$"+jf,vc="__reactEventHandlers$"+jf,Lb="__reactContainere$"+jf,Ba=null,ce=null,wc=null;M(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==
typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){this.isPersistent=xc},isPersistent:yc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=yc;this._dispatchInstances=this._dispatchListeners=null}});R.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||
Date.now()},defaultPrevented:null,isTrusted:null};R.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;M(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=M({},c.Interface,a);b.extend=c.extend;sg(b);return b};sg(R);var Tj=R.extend({data:null}),Uj=R.extend({data:null}),Ni=[9,13,27,32],de=wa&&"CompositionEvent"in window,cc=null;wa&&"documentMode"in document&&(cc=document.documentMode);var Vj=wa&&"TextEvent"in window&&
!cc,xg=wa&&(!de||cc&&8<cc&&11>=cc),wg=String.fromCharCode(32),ua={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},
dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vg=!1,mb=!1,Wj={eventTypes:ua,extractEvents:function(a,b,c,d,e){var f;if(de)b:{switch(a){case "compositionstart":var g=ua.compositionStart;break b;case "compositionend":g=ua.compositionEnd;break b;case "compositionupdate":g=
ua.compositionUpdate;break b}g=void 0}else mb?tg(a,c)&&(g=ua.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=ua.compositionStart);g?(xg&&"ko"!==c.locale&&(mb||g!==ua.compositionStart?g===ua.compositionEnd&&mb&&(f=rg()):(Ba=d,ce="value"in Ba?Ba.value:Ba.textContent,mb=!0)),e=Tj.getPooled(g,b,c,d),f?e.data=f:(f=ug(c),null!==f&&(e.data=f)),lb(e),f=e):f=null;(a=Vj?Oi(a,c):Pi(a,c))?(b=Uj.getPooled(ua.beforeInput,b,c,d),b.data=a,lb(b)):b=null;return null===f?b:null===b?f:[f,b]}},Qi={color:!0,date:!0,
datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ag={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Mb=null,Nb=null,kf=!1;wa&&(kf=Tf("input")&&(!document.documentMode||9<document.documentMode));var Xj={eventTypes:Ag,_isInputEventSupported:kf,extractEvents:function(a,b,c,d,e){e=b?Pa(b):window;var f=
e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Si;else if(yg(e))if(kf)g=Wi;else{g=Ui;var h=Ti}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Vi);if(g&&(g=g(a,b)))return zg(g,c,d);h&&h(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Ed(e,"number",e.value)}},dc=R.extend({view:null,detail:null}),Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},di=0,ei=0,fi=!1,gi=!1,ec=dc.extend({screenX:null,
screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=di;di=a.screenX;return fi?"mousemove"===a.type?a.screenX-b:0:(fi=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ei;ei=a.screenY;return gi?"mousemove"===
a.type?a.screenY-b:0:(gi=!0,0)}}),hi=ec.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout",
"pointerover"]}},Yj={eventTypes:fc,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Bb(b):null,null!==b){var h=Na(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a){var m=ec;var n=fc.mouseLeave;
var l=fc.mouseEnter;var k="mouse"}else if("pointerout"===a||"pointerover"===a)m=hi,n=fc.pointerLeave,l=fc.pointerEnter,k="pointer";a=null==g?f:Pa(g);f=null==b?f:Pa(b);n=m.getPooled(n,g,c,d);n.type=k+"leave";n.target=a;n.relatedTarget=f;c=m.getPooled(l,b,c,d);c.type=k+"enter";c.target=f;c.relatedTarget=a;d=g;k=b;if(d&&k)a:{m=d;l=k;g=0;for(a=m;a;a=pa(a))g++;a=0;for(b=l;b;b=pa(b))a++;for(;0<g-a;)m=pa(m),g--;for(;0<a-g;)l=pa(l),a--;for(;g--;){if(m===l||m===l.alternate)break a;m=pa(m);l=pa(l)}m=null}else m=
null;l=m;for(m=[];d&&d!==l;){g=d.alternate;if(null!==g&&g===l)break;m.push(d);d=pa(d)}for(d=[];k&&k!==l;){g=k.alternate;if(null!==g&&g===l)break;d.push(k);k=pa(k)}for(k=0;k<m.length;k++)be(m[k],"bubbled",n);for(k=d.length;0<k--;)be(d[k],"captured",c);return 0===(e&64)?[n]:[n,c]}},Qa="function"===typeof Object.is?Object.is:Zi,$i=Object.prototype.hasOwnProperty,Zj=wa&&"documentMode"in document&&11>=document.documentMode,Eg={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},nb=null,he=null,Pb=null,ge=!1,ak={eventTypes:Eg,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=Jd(e);f=rd.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pa(b):window;switch(a){case "focus":if(yg(e)||"true"===e.contentEditable)nb=e,he=b,Pb=null;break;case "blur":Pb=he=nb=null;
break;case "mousedown":ge=!0;break;case "contextmenu":case "mouseup":case "dragend":return ge=!1,Dg(c,d);case "selectionchange":if(Zj)break;case "keydown":case "keyup":return Dg(c,d)}return null}},bk=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ck=R.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dk=dc.extend({relatedTarget:null}),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",
Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",
224:"Meta"},gk=dc.extend({key:function(a){if(a.key){var b=ek[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Ac(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?fk[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fe,charCode:function(a){return"keypress"===a.type?Ac(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?Ac(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),hk=ec.extend({dataTransfer:null}),ik=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fe}),jk=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kk=ec.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?
-a.wheelDelta:0},deltaZ:null,deltaMode:null}),lk={eventTypes:dg,extractEvents:function(a,b,c,d,e){e=cg.get(a);if(!e)return null;switch(a){case "keypress":if(0===Ac(c))return null;case "keydown":case "keyup":a=gk;break;case "blur":case "focus":a=dk;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=ec;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=
hk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=ik;break;case $h:case ai:case bi:a=bk;break;case ci:a=jk;break;case "scroll":a=dc;break;case "wheel":a=kk;break;case "copy":case "cut":case "paste":a=ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=hi;break;default:a=R}b=a.getPooled(e,b,c,d);lb(b);return b}};(function(a){if(ic)throw Error(k(101));
ic=Array.prototype.slice.call(a);nf()})("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){td=a;rf=b;mf=c})(ae,Hb,Pa);pf({SimpleEventPlugin:lk,EnterLeaveEventPlugin:Yj,ChangeEventPlugin:Xj,SelectEventPlugin:ak,BeforeInputEventPlugin:Wj});var ie=[],ob=-1,Ca={},B={current:Ca},G={current:!1},Ra=Ca,bj=Pd,je=$f,Rg=Lj,aj=Nj,Dc=Oj,Ig=Zh,Jg=ag,Kg=Pj,Lg=Qj,Qg={},yj=Mj,Cj=void 0!==Yh?Yh:function(){},qa=null,
Ec=null,ke=!1,ii=ff(),Y=1E4>ii?ff:function(){return ff()-ii},Ic={current:null},Hc=null,qb=null,Gc=null,Tg=0,Jc=2,Ga=!1,Vb=da.ReactCurrentBatchConfig,$g=(new ea.Component).refs,Mc={isMounted:function(a){return(a=a._reactInternalFiber)?Na(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;d=Va(d,a,e);e=Ea(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;
d=Va(d,a,e);e=Ea(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka(),d=Vb.suspense;c=Va(c,a,d);d=Ea(c,d);d.tag=Jc;void 0!==b&&null!==b&&(d.callback=b);Fa(a,d);Ja(a,c)}},Qc=Array.isArray,wb=ah(!0),Fe=ah(!1),Sb={},ja={current:Sb},Ub={current:Sb},Tb={current:Sb},D={current:0},Sc=da.ReactCurrentDispatcher,X=da.ReactCurrentBatchConfig,Ia=0,z=null,K=null,J=null,Uc=!1,Tc={readContext:W,useCallback:S,useContext:S,
useEffect:S,useImperativeHandle:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useResponder:S,useDeferredValue:S,useTransition:S},dj={readContext:W,useCallback:ih,useContext:W,useEffect:eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ze(4,2,gh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ze(4,2,a,b)},useMemo:function(a,b){var c=ub();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=
ub();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=ch.bind(null,z,a);return[d.memoizedState,a]},useRef:function(a){var b=ub();a={current:a};return b.memoizedState=a},useState:xe,useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=xe(a),d=c[0],e=c[1];eh(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=
xe(!1),c=b[0];b=b[1];return[ih(Ce.bind(null,b,a),[b,a]),c]}},ej={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Vc,useRef:dh,useState:function(a){return Vc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Vc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Vc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,
b,a),[b,a]),c]}},fj={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Wc,useRef:dh,useState:function(a){return Wc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Wc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Wc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,b,a),[b,a]),c]}},ra=null,Ka=null,Wa=
!1,gj=da.ReactCurrentOwner,ia=!1,Je={dehydrated:null,retryTime:0};var jj=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};var wh=function(a){};var ij=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ta(ja.current);a=null;switch(c){case "input":f=
Cd(g,f);d=Cd(g,d);a=[];break;case "option":f=Fd(g,f);d=Fd(g,d);a=[];break;case "select":f=M({},f,{value:void 0});d=M({},d,{value:void 0});a=[];break;case "textarea":f=Gd(g,f);d=Gd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=uc)}Ud(c,d);var h,m;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(m in g=f[h],g)g.hasOwnProperty(m)&&(c||(c={}),c[m]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==
h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(db.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var k=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&k!==g&&(null!=k||null!=g))if("style"===h)if(g){for(m in g)!g.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(c||(c={}),c[m]="");for(m in k)k.hasOwnProperty(m)&&g[m]!==k[m]&&(c||(c={}),c[m]=k[m])}else c||(a||(a=[]),a.push(h,c)),c=k;else"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,g=g?g.__html:void 0,null!=k&&g!==k&&(a=a||
[]).push(h,k)):"children"===h?g===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(h,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(db.hasOwnProperty(h)?(null!=k&&oa(e,h),a||g===k||(a=[])):(a=a||[]).push(h,k))}c&&(a=a||[]).push("style",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};var kj=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var pj="function"===typeof WeakSet?WeakSet:Set,wj="function"===typeof WeakMap?WeakMap:Map,sj=Math.ceil,gd=da.ReactCurrentDispatcher,
Uh=da.ReactCurrentOwner,H=0,Ye=8,ca=16,ma=32,Xa=0,hd=1,Oh=2,ad=3,bd=4,Xe=5,p=H,U=null,t=null,P=0,F=Xa,id=null,ta=1073741823,Yb=1073741823,kd=null,Xb=0,jd=!1,Re=0,Ph=500,l=null,cd=!1,Se=null,La=null,ld=!1,Zb=null,$b=90,bb=null,ac=0,af=null,dd=0,Ja=function(a,b){if(50<ac)throw ac=0,af=null,Error(k(185));a=ed(a,b);if(null!==a){var c=Cc();1073741823===b?(p&Ye)!==H&&(p&(ca|ma))===H?Te(a):(V(a),p===H&&ha()):V(a);(p&4)===H||98!==c&&99!==c||(null===bb?bb=new Map([[a,b]]):(c=bb.get(a),(void 0===c||c>b)&&bb.set(a,
b)))}};var zj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||G.current)ia=!0;else{if(d<c){ia=!1;switch(b.tag){case 3:sh(b);Ee();break;case 5:bh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Bc(b);break;case 4:se(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;y(Ic,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;
if(0!==d&&d>=c)return th(a,b,c);y(D,D.current&1);b=sa(a,b,c);return null!==b?b.sibling:null}y(D,D.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return vh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);y(D,D.current);if(!d)return null}return sa(a,b,c)}ia=!1}}else ia=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=pb(b,B.current);rb(b,c);e=we(null,
b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(N(d)){var f=!0;Bc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ne(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Lc(b,d,g,a);e.updater=Mc;b.stateNode=e;e._reactInternalFiber=b;pe(b,d,a,c);b=Ie(null,b,d,!0,f,c)}else b.tag=0,T(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=
null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ri(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Gj(e);a=aa(e,a);switch(f){case 0:b=He(null,b,e,a,c);break a;case 1:b=rh(null,b,e,a,c);break a;case 11:b=nh(null,b,e,a,c);break a;case 14:b=oh(null,b,e,aa(e.type,a),d,c);break a}throw Error(k(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),He(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),rh(a,b,d,e,c);
case 3:sh(b);d=b.updateQueue;if(null===a||null===d)throw Error(k(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;oe(a,b);Qb(b,d,null,c);d=b.memoizedState.element;if(d===e)Ee(),b=sa(a,b,c);else{if(e=b.stateNode.hydrate)Ka=kb(b.stateNode.containerInfo.firstChild),ra=b,e=Wa=!0;if(e)for(c=Fe(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else T(a,b,d,c),Ee();b=b.child}return b;case 5:return bh(b),null===a&&De(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:
null,g=e.children,Yd(d,e)?g=null:null!==f&&Yd(d,f)&&(b.effectTag|=16),qh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(T(a,b,g,c),b=b.child),b;case 6:return null===a&&De(b),null;case 13:return th(a,b,c);case 4:return se(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=wb(b,null,d,c):T(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),nh(a,b,d,e,c);case 7:return T(a,b,b.pendingProps,c),b.child;case 8:return T(a,
b,b.pendingProps.children,c),b.child;case 12:return T(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;y(Ic,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=Qa(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!G.current){b=sa(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var m=h.dependencies;if(null!==
m){g=h.child;for(var l=m.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=Ea(c,null),l.tag=Jc,Fa(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);Sg(h.return,c);m.expirationTime<c&&(m.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=
g}T(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,rb(b,c),e=W(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,T(a,b,d,c),b.child;case 14:return e=b.type,f=aa(e,b.pendingProps),f=aa(e.type,f),oh(a,b,e,f,d,c);case 15:return ph(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Bc(b)):a=!1,rb(b,c),Yg(b,d,e),pe(b,d,e,c),Ie(null,
b,d,!0,a,c);case 19:return vh(a,b,c)}throw Error(k(156,b.tag));};var bf=null,Ne=null,la=function(a,b,c,d){return new Fj(a,b,c,d)};ef.prototype.render=function(a){md(a,this._internalRoot,null,null)};ef.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;md(null,a,null,function(){b[Lb]=null})};var Di=function(a){if(13===a.tag){var b=Fc(ka(),150,100);Ja(a,b);df(a,b)}};var Yf=function(a){13===a.tag&&(Ja(a,3),df(a,3))};var Bi=function(a){if(13===a.tag){var b=ka();b=Va(b,a,null);Ja(a,
b);df(a,b)}};sd=function(a,b,c){switch(b){case "input":Dd(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ae(d);if(!e)throw Error(k(90));Gf(d);Dd(d,e)}}}break;case "textarea":Lf(a,c);break;case "select":b=c.value,null!=b&&hb(a,!!c.multiple,b,!1)}};(function(a,b,c,d){ee=a;eg=b;vd=c;vf=d})(Qh,function(a,b,c,d,e){var f=p;p|=4;
try{return Da(98,a.bind(null,b,c,d,e))}finally{p=f,p===H&&ha()}},function(){(p&(1|ca|ma))===H&&(uj(),xb())},function(a,b){var c=p;p|=2;try{return a(b)}finally{p=c,p===H&&ha()}});var mk={Events:[Hb,Pa,ae,pf,qd,lb,function(a){Kd(a,Ki)},sf,tf,sc,pc,xb,{current:!1}]};(function(a){var b=a.findFiberByHostInstance;return Ej(M({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Sf(a);
return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Bb,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"});I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;I.createPortal=Xh;I.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===
b){if("function"===typeof a.render)throw Error(k(188));throw Error(k(268,Object.keys(a)));}a=Sf(b);a=null===a?null:a.stateNode;return a};I.flushSync=function(a,b){if((p&(ca|ma))!==H)throw Error(k(187));var c=p;p|=1;try{return Da(99,a.bind(null,b))}finally{p=c,ha()}};I.hydrate=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!0,c)};I.render=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!1,c)};I.unmountComponentAtNode=function(a){if(!bc(a))throw Error(k(40));return a._reactRootContainer?
(Rh(function(){nd(null,null,a,!1,function(){a._reactRootContainer=null;a[Lb]=null})}),!0):!1};I.unstable_batchedUpdates=Qh;I.unstable_createPortal=function(a,b){return Xh(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};I.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!bc(c))throw Error(k(200));if(null==a||void 0===a._reactInternalFiber)throw Error(k(38));return nd(a,b,c,!1,d)};I.version="16.13.1"});
</script>
    <script>const e = React.createElement;

function pathToString(path) {
  if (path[0] === '/') {
    return '/' + path.slice(1).join('/');
  } else {
    return path.join('/');
  }
}

function findCommonPath(files) {
  if (!files || !files.length) {
    return [];
  }

  function isPrefix(arr, prefix) {
    if (arr.length < prefix.length) {
      return false;
    }
    for (let i = prefix.length - 1; i >= 0; --i) {
      if (arr[i] !== prefix[i]) {
        return false;
      }
    }
    return true;
  }

  let commonPath = files[0].path.slice(0, -1);
  while (commonPath.length) {
    if (files.every(file => isPrefix(file.path, commonPath))) {
      break;
    }
    commonPath.pop();
  }
  return commonPath;
}

function findFolders(files) {
  if (!files || !files.length) {
    return [];
  }

  let folders = files.filter(file => file.path.length > 1).map(file => file.path[0]);
  folders = [...new Set(folders)]; // unique
  folders.sort();

  folders = folders.map(folder => {
    let filesInFolder = files
      .filter(file => file.path[0] === folder)
      .map(file => ({
        ...file,
        path: file.path.slice(1),
        parent: [...file.parent, file.path[0]],
      }));

    const children = findFolders(filesInFolder); // recursion

    return {
      is_folder: true,
      path: [folder],
      parent: files[0].parent,
      children,
      covered: children.reduce((sum, file) => sum + file.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.coverable, 0),
      prevRun: {
        covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
        coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
      }
    };
  });

  return [
    ...folders,
    ...files.filter(file => file.path.length === 1),
  ];
}

class App extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      current: [],
    };
  }

  componentDidMount() {
    this.updateStateFromLocation();
    window.addEventListener("hashchange", () => this.updateStateFromLocation(), false);
  }

  updateStateFromLocation() {
    if (window.location.hash.length > 1) {
      const current = window.location.hash.substr(1).split('/');
      this.setState({current});
    } else {
      this.setState({current: []});
    }
  }

  getCurrentPath() {
    let file = this.props.root;
    let path = [file];
    for (let p of this.state.current) {
      file = file.children.find(file => file.path[0] === p);
      if (!file) {
        return path;
      }
      path.push(file);
    }
    return path;
  }

  render() {
    const path = this.getCurrentPath();
    const file = path[path.length - 1];

    let w = null;
    if (file.is_folder) {
      w = e(FilesList, {
        folder: file,
        onSelectFile: this.selectFile.bind(this),
        onBack: path.length > 1 ? this.back.bind(this) : null,
      });
    } else {
      w = e(DisplayFile, {
        file,
        onBack: this.back.bind(this),
      });
    }

    return e('div', {className: 'app'}, w);
  }

  selectFile(file) {
    this.setState(({current}) => {
      return {current: [...current, file.path[0]]};
    }, () => this.updateHash());
  }

  back(file) {
    this.setState(({current}) => {
      return {current: current.slice(0, current.length - 1)};
    }, () => this.updateHash());
  }

  updateHash() {
    if (!this.state.current || !this.state.current.length) {
      window.location = '#';
    } else {
      window.location = '#' + this.state.current.join('/');
    }
  }
}

function FilesList({folder, onSelectFile, onBack}) {
  let files = folder.children;
  return e('div', {className: 'display-folder'},
    e(FileHeader, {file: folder, onBack}),
    e('table', {className: 'files-list'},
      e('thead', {className: 'files-list__head'},
        e('tr', null,
          e('th', null, "Path"),
          e('th', null, "Coverage")
        )
      ),
      e('tbody', {className: 'files-list__body'},
        files.map(file => e(File, {file, onClick: onSelectFile}))
      )
    )
  );
}

function File({file, onClick}) {
  const coverage = file.coverable ? file.covered / file.coverable * 100 : -1;
  const coverageDelta = file.prevRun &&
    (file.covered / file.coverable * 100 - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('tr', {
      className: 'files-list__file'
        + (coverage >= 0 && coverage < 50 ? ' files-list__file_low': '')
        + (coverage >= 50 && coverage < 80 ? ' files-list__file_medium': '')
        + (coverage >= 80 ? ' files-list__file_high': '')
        + (file.is_folder ? ' files-list__file_folder': ''),
      onClick: () => onClick(file),
    },
    e('td', null, e('a', null, pathToString(file.path))),
    e('td', null,
      file.covered + ' / ' + file.coverable +
      (coverage >= 0 ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function DisplayFile({file, onBack}) {
  return e('div', {className: 'display-file'},
    e(FileHeader, {file, onBack}),
    e(FileContent, {file})
  );
}

function FileHeader({file, onBack}) {
  const coverage = file.covered / file.coverable * 100;
  const coverageDelta = file.prevRun && (coverage - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('div', {className: 'file-header'},
    onBack ? e('a', {className: 'file-header__back', onClick: onBack}, 'Back') : null,
    e('div', {className: 'file-header__name'}, pathToString([...file.parent, ...file.path])),
    e('div', {className: 'file-header__stat'},
      'Covered: ' + file.covered + ' of ' + file.coverable +
      (file.coverable ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function FileContent({file}) {
  return e('pre', {className: 'file-content'},
    file.content.split(/\r?\n/).map((line, index) => {
      const trace = file.traces.find(trace => trace.line === index + 1);
      const covered = trace && trace.stats.Line;
      const uncovered = trace && !trace.stats.Line;
      return e('code', {
          className: 'code-line'
            + (covered ? ' code-line_covered' : '')
            + (uncovered ? ' code-line_uncovered' : ''),
          title: trace ? JSON.stringify(trace.stats, null, 2) : null,
        }, line);
    })
  );
}

(function(){
  const commonPath = findCommonPath(data.files);
  const prevFilesMap = new Map();

  previousData && previousData.files.forEach((file) => {
    const path = file.path.slice(commonPath.length).join('/');
    prevFilesMap.set(path, file);
  });

  const files = data.files.map((file) => {
    const path = file.path.slice(commonPath.length);
    const { covered = 0, coverable = 0 } = prevFilesMap.get(path.join('/')) || {};
    return {
      ...file,
      path,
      parent: commonPath,
      prevRun: { covered, coverable },
    };
  });

  const children = findFolders(files);

  const root = {
    is_folder: true,
    children,
    path: commonPath,
    parent: [],
    covered: children.reduce((sum, file) => sum + file.covered, 0),
    coverable: children.reduce((sum, file) => sum + file.coverable, 0),
    prevRun: {
      covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
    }
  };

  ReactDOM.render(e(App, {root, prevFilesMap}), document.getElementById('root'));
}());
</script>
</body>
</html>